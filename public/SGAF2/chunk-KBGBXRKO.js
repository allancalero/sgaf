import{Fa as m,Ma as s,e as l,f as u,h,k as b,p,q as o,s as a,xa as c,za as n}from"./chunk-C7QVRIZI.js";var f=class e{constructor(t,r){this.http=t;this.router=r}apiUrl=s.apiUrl;currentUserSubject=new l(null);currentUser=this.currentUserSubject.asObservable();login(t){return this.http.post(`${this.apiUrl}/login`,t).pipe(p(r=>{r.user&&(localStorage.setItem("user",JSON.stringify(r.user)),this.currentUserSubject.next(r.user))}))}logout(){localStorage.removeItem("user"),this.currentUserSubject.next(null),this.router.navigate(["/login"]),this.http.post(`${this.apiUrl}/logout`,{}).subscribe({next:()=>console.log("Backend logout success"),error:t=>console.warn("Backend logout failed or token already invalid",t)})}checkAuthStatus(){return this.http.get(`${this.apiUrl}/user`).pipe(p(t=>{localStorage.setItem("user",JSON.stringify(t)),this.currentUserSubject.next(t)}),h(()=>!0),b(()=>(localStorage.removeItem("user"),this.currentUserSubject.next(null),u(!1))))}getToken(){return null}isLoggedIn(){return!!this.currentUserSubject.value}static \u0275fac=function(r){return new(r||e)(a(n),a(m))};static \u0275prov=o({token:e,factory:e.\u0275fac,providedIn:"root"})};var g=class e{constructor(t){this.http=t}apiUrl=s.apiUrl;getDepreciacion(t=1,r=""){let i=new c().set("page",t.toString());return r&&(i=i.set("search",r)),this.http.get(`${this.apiUrl}/depreciacion`,{params:i})}getSinConfigurar(t=1,r=""){let i=new c().set("page",t.toString());return r&&(i=i.set("search",r)),this.http.get(`${this.apiUrl}/depreciacion/sin-configurar`,{params:i})}getCatalogo(){return this.http.get(`${this.apiUrl}/depreciacion/catalogo`)}configurar(t,r){return this.http.post(`${this.apiUrl}/depreciacion/${t}/configurar`,r)}calcular(t){return this.http.post(`${this.apiUrl}/depreciacion/${t}/calcular`,{})}resetear(){return this.http.post(`${this.apiUrl}/depreciacion/reset`,{})}limpiarTodo(){return this.http.post(`${this.apiUrl}/depreciacion/limpiar-todo`,{})}procesarMasivo(t){let r=t?{fecha_corte:t}:{};return this.http.post(`${this.apiUrl}/depreciacion/procesar`,r)}static \u0275fac=function(r){return new(r||e)(a(n))};static \u0275prov=o({token:e,factory:e.\u0275fac,providedIn:"root"})};export{f as a,g as b};
