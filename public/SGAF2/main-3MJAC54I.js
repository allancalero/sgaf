import{a as Z,b as Ht}from"./chunk-KBGBXRKO.js";import{$ as o,$a as me,A as De,Aa as Dt,B as K,Ba as Rt,C as Re,Ca as ut,D as yt,Da as Lt,E as l,Ea as jt,F as E,Fa as ge,G as I,Ga as Le,Ha as Ut,I as h,Ia as Ot,J as St,Ja as Nt,K as pt,Ka as Bt,L as m,La as je,M as t,Ma as U,N as i,O as g,Oa as N,P as be,Pa as D,Q as ve,Qa as ee,R as y,Ra as te,S as f,Sa as R,T as d,Ta as ie,U as Et,Ua as Ue,V as kt,Va as ne,W as It,Wa as re,X as Fe,Xa as oe,Y as ke,Ya as Wt,Z as F,Za as qt,_ as B,_a as L,a as Y,aa as x,ab as Me,b as Ce,ba as b,bb as Oe,c as de,ca as M,cb as Te,d as he,da as Mt,ea as _,f as ht,fa as w,g as bt,ga as C,ha as Ie,ia as Tt,j as dt,k as vt,ka as P,l as ye,la as Ae,m as Se,ma as O,n as _t,na as Ft,o as wt,oa as W,p as mt,q as H,qa as V,ra as A,s as $,sa as X,t as Ee,ta as ce,u as p,ua as T,v as u,va as At,w as v,wa as Vt,x as S,xa as ue,ya as Pt,z as Ct,za as q}from"./chunk-C7QVRIZI.js";function ti(s){let n=s,e=Math.floor(Math.abs(s)),r=s.toString().replace(/^[^.]*\.?/,"").length,a=parseInt(s.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return n===1?1:a===0&&e!==0&&e%1e6===0&&r===0||!(a>=0&&a<=5)?4:5}var zt=["es-NI",[["a.\u202Fm.","p.\u202Fm."],void 0,["a.\xA0m.","p.\xA0m."]],void 0,[["D","L","M","M","J","V","S"],["dom","lun","mar","mi\xE9","jue","vie","s\xE1b"],["domingo","lunes","martes","mi\xE9rcoles","jueves","viernes","s\xE1bado"],["DO","LU","MA","MI","JU","VI","SA"]],void 0,[["E","F","M","A","M","J","J","A","S","O","N","D"],["ene","feb","mar","abr","may","jun","jul","ago","sept","oct","nov","dic"],["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]],void 0,[["a.C.","d.C."],void 0,["antes de Cristo","despu\xE9s de Cristo"]],0,[6,0],["d/M/yy","d MMM y","d 'de' MMMM 'de' y","EEEE, d 'de' MMMM 'de' y"],["h:mm\u202Fa","h:mm:ss\u202Fa","h:mm:ss\u202Fa z","h:mm:ss\u202Fa zzzz"],["{1}, {0}",void 0,void 0,void 0],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"NIO","C$","c\xF3rdoba nicarag\xFCense",{AUD:[void 0,"$"],BRL:[void 0,"R$"],BYN:[void 0,"\u0440."],CAD:[void 0,"$"],CNY:[void 0,"\xA5"],ESP:["\u20A7"],EUR:[void 0,"\u20AC"],FKP:[void 0,"FK\xA3"],GBP:[void 0,"\xA3"],HKD:[void 0,"$"],ILS:[void 0,"\u20AA"],INR:[void 0,"\u20B9"],JPY:[void 0,"\xA5"],KRW:[void 0,"\u20A9"],MXN:[void 0,"$"],NIO:["C$"],NZD:[void 0,"$"],PHP:[void 0,"\u20B1"],RON:[void 0,"L"],SSP:[void 0,"SD\xA3"],SYP:[void 0,"S\xA3"],TWD:[void 0,"NT$"],USD:[void 0,"$"],VEF:[void 0,"BsF"],VND:[void 0,"\u20AB"],XAF:[],XCD:[void 0,"$"],XOF:[]},"ltr",ti];var Gt=(s,n)=>{let e=Ee(Z),r=Ee(ge),a=s.clone({withCredentials:!0});return n(a).pipe(vt(c=>(c instanceof Pt&&c.status===401&&(console.warn("Auto-Logout triggered by 401 on:",s.url),s.url.endsWith("/logout")||e.logout()),bt(()=>c))))};var Ne=class s{constructor(n){this.http=n;let e=window.location.pathname,r=U.apiUrl;e.includes("SGAF2")&&(r=e.split("SGAF2")[0]+"api"),this.apiUrl=`${r}/dashboard`}apiUrl;getStats(){return this.http.get(this.apiUrl)}static \u0275fac=function(e){return new(e||s)($(q))};static \u0275prov=H({token:s,factory:s.\u0275fac,providedIn:"root"})};function ni(s,n){if(s&1&&(t(0,"div",39)(1,"div",40)(2,"div",41)(3,"span",42),o(4),i(),t(5,"span",43),o(6),i()(),t(7,"div",44),g(8,"div",45),i()()()),s&2){let e=n.$implicit,r=d();l(4),x(e.area),l(2),b("",e.cantidad," activos"),l(2),ke("width",e.cantidad/((r.stats==null?null:r.stats.totalActivos)||1)*100+"%")}}var Be=class s{constructor(n,e){this.dashboardService=n;this.cdr=e}stats=null;loading=!0;error=null;ngOnInit(){this.loadDashboard()}loadDashboard(){console.log("DashboardComponent: Fetching stats..."),this.dashboardService.getStats().subscribe({next:n=>{console.log("DashboardComponent: Received data:",n),this.stats=n,this.loading=!1,this.cdr.detectChanges(),console.log("DashboardComponent: Stats assigned, totalActivos =",this.stats?.totalActivos)},error:n=>{console.error("DashboardComponent: Error fetching stats:",n),this.error=n.message||"Error loading data",this.loading=!1,this.cdr.detectChanges()}})}formatCurrency(n){return new Intl.NumberFormat("es-NI",{style:"currency",currency:"NIO",minimumFractionDigits:2}).format(n)}getBuenosCount(){return this.stats?.activosPorEstado&&this.stats.activosPorEstado.find(e=>e.estado==="BUENO")?.cantidad||0}getMalosCount(){return this.stats?.activosPorEstado&&this.stats.activosPorEstado.find(e=>e.estado==="MALO")?.cantidad||0}static \u0275fac=function(e){return new(e||s)(E(Ne),E(W))};static \u0275cmp=I({type:s,selectors:[["app-dashboard"]],decls:73,vars:5,consts:[[1,"p-6","lg:p-8"],[1,"mb-10","animate-fade-in"],[1,"text-4xl","font-black","text-primary","tracking-tight"],[1,"text-secondary","mt-1","text-lg"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-6","mb-10"],[1,"card-stat","p-6","group","hover:scale-[1.02]"],[1,"flex","items-center","justify-between","mb-4"],[1,"w-12","h-12","rounded-2xl","bg-blue-500/10","flex","items-center","justify-center","text-blue-500","group-hover:bg-blue-500","group-hover:text-white","transition-all"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"],[1,"text-[10px]","font-black","text-muted","uppercase","tracking-[0.2em]"],[1,"text-3xl","font-black","text-primary","mt-1"],[1,"card-stat","p-6","group","hover:scale-[1.02]","border-emerald-500/20"],[1,"w-12","h-12","rounded-2xl","bg-emerald-500/10","flex","items-center","justify-center","text-emerald-500","group-hover:bg-emerald-500","group-hover:text-white","transition-all"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-3xl","font-black","text-emerald-500","mt-1"],[1,"card-stat","p-6","group","hover:scale-[1.02]","border-red-500/20"],[1,"w-12","h-12","rounded-2xl","bg-red-500/10","flex","items-center","justify-center","text-red-500","group-hover:bg-red-500","group-hover:text-white","transition-all"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"text-3xl","font-black","text-red-500","mt-1"],[1,"card-stat","p-6","group","hover:scale-[1.02]","border-blue-500/20","text-right"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-2xl","font-black","text-primary","mt-1"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-8"],[1,"lg:col-span-2","space-y-6"],[1,"flex","items-center","justify-between"],[1,"text-xs","font-black","text-muted","uppercase","tracking-[0.2em]"],[1,"card","p-6"],[1,"space-y-4"],["class","flex items-center gap-4",4,"ngFor","ngForOf"],[1,"space-y-6"],[1,"grid","grid-cols-1","gap-4"],["routerLink","/activos/etiquetas-qr",1,"card","p-6","flex","items-center","gap-4","hover:border-blue-500/40","transition-all","group"],[1,"w-12","h-12","rounded-xl","bg-blue-500/10","flex","items-center","justify-center","text-blue-500","group-hover:scale-110","transition-transform"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 17h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"],[1,"text-sm","font-bold","text-primary"],[1,"text-xs","text-muted"],["routerLink","/activos/reportes",1,"card","p-6","flex","items-center","gap-4","hover:border-blue-500/40","transition-all","group"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"flex","items-center","gap-4"],[1,"flex-1"],[1,"flex","justify-between","text-xs","mb-1.5"],[1,"text-primary","font-bold"],[1,"text-muted"],[1,"w-full","h-1.5","bg-gray-500/10","rounded-full","overflow-hidden"],[1,"h-full","bg-blue-500","rounded-full"]],template:function(e,r){e&1&&(t(0,"div",0)(1,"div",1)(2,"h1",2),o(3,"Panel de Control"),i(),t(4,"p",3),o(5,"Resumen estrat\xE9gico de la Gesti\xF3n de Activo Fijo."),i()(),t(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7),v(),t(10,"svg",8),g(11,"path",9),i()()(),S(),t(12,"p",10),o(13,"Total Activos"),i(),t(14,"h3",11),o(15),i()(),t(16,"div",12)(17,"div",6)(18,"div",13),v(),t(19,"svg",8),g(20,"path",14),i()()(),S(),t(21,"p",10),o(22,"Estado Bueno"),i(),t(23,"h3",15),o(24),i()(),t(25,"div",16)(26,"div",6)(27,"div",17),v(),t(28,"svg",8),g(29,"path",18),i()()(),S(),t(30,"p",10),o(31,"Estado Malo"),i(),t(32,"h3",19),o(33),i()(),t(34,"div",20)(35,"div",6)(36,"div",7),v(),t(37,"svg",8),g(38,"path",21),i()()(),S(),t(39,"p",10),o(40,"Inversi\xF3n Total"),i(),t(41,"h3",22),o(42),i()()(),t(43,"div",23)(44,"div",24)(45,"div",25)(46,"h3",26),o(47,"Distribuci\xF3n por \xC1rea"),i()(),t(48,"div",27)(49,"div",28),h(50,ni,9,4,"div",29),i()()(),t(51,"div",30)(52,"h3",26),o(53,"Acciones R\xE1pidas"),i(),t(54,"div",31)(55,"a",32)(56,"div",33),v(),t(57,"svg",8),g(58,"path",34),i()(),S(),t(59,"div")(60,"p",35),o(61,"Generar Etiquetas"),i(),t(62,"p",36),o(63,"Impresi\xF3n masiva de QR"),i()()(),t(64,"a",37)(65,"div",33),v(),t(66,"svg",8),g(67,"path",38),i()(),S(),t(68,"div")(69,"p",35),o(70,"Reporte General"),i(),t(71,"p",36),o(72,"Exportar inventario a PDF"),i()()()()()()()),e&2&&(l(15),x((r.stats==null?null:r.stats.totalActivos)||0),l(9),x(r.getBuenosCount()),l(9),x(r.getMalosCount()),l(9),x(r.formatCurrency((r.stats==null?null:r.stats.valorTotal)||0)),l(8),m("ngForOf",r.stats==null?null:r.stats.activosPorArea))},dependencies:[T,V,je,Le],encapsulation:2})};var J=de(me());function ri(s,n){if(s&1){let e=y();t(0,"div",15)(1,"button",16),f("click",function(){p(e);let a=d();return u(a.searchText="")}),v(),t(2,"svg",17),g(3,"path",18),i()()()}}function oi(s,n){if(s&1&&(t(0,"option",43),o(1),i()),s&2){let e=n.$implicit,r=n.index;m("value",e.id),l(),M(" ",r+1<10?"0"+(r+1):r+1," ",e.nombre," ")}}function ai(s,n){if(s&1){let e=y();t(0,"form",28),f("ngSubmit",function(){p(e);let a=d(2);return u(a.saveArea())}),t(1,"div",29)(2,"div",30)(3,"label",31),o(4,"Nombre del \xC1rea "),t(5,"span",32),o(6,"*"),i()(),t(7,"input",33),C("ngModelChange",function(a){p(e);let c=d(2);return w(c.areaForm.nombre,a)||(c.areaForm.nombre=a),u(a)}),i()(),t(8,"div",30)(9,"label",31),o(10,"Ubicaci\xF3n F\xEDsica Asociada"),i(),t(11,"select",34),C("ngModelChange",function(a){p(e);let c=d(2);return w(c.areaForm.ubicacion_id,a)||(c.areaForm.ubicacion_id=a),u(a)}),t(12,"option",35),o(13,"Sin asignar (General)"),i(),h(14,oi,2,3,"option",36),i()()(),t(15,"div",37)(16,"div",30)(17,"label",31),o(18,"Estado Operativo"),i(),t(19,"select",38),C("ngModelChange",function(a){p(e);let c=d(2);return w(c.areaForm.estado,a)||(c.areaForm.estado=a),u(a)}),t(20,"option",39),o(21,"Activo"),i(),t(22,"option",40),o(23,"Inactivo"),i()()(),t(24,"div",41)(25,"button",42),o(26),i()()()()}if(s&2){let e=d(2);l(7),_("ngModel",e.areaForm.nombre),l(4),_("ngModel",e.areaForm.ubicacion_id),l(),m("ngValue",null),l(2),m("ngForOf",e.ubicaciones),l(5),_("ngModel",e.areaForm.estado),l(7),b(" ",e.editingAreaId?"Actualizar \xC1rea":"Guardar \xC1rea"," ")}}function li(s,n){if(s&1){let e=y();t(0,"form",28),f("ngSubmit",function(){p(e);let a=d(2);return u(a.saveUbicacion())}),t(1,"div",29)(2,"div",30)(3,"label",31),o(4,"Nombre del Edificio / Sitio "),t(5,"span",32),o(6,"*"),i()(),t(7,"input",44),C("ngModelChange",function(a){p(e);let c=d(2);return w(c.ubicacionForm.nombre,a)||(c.ubicacionForm.nombre=a),u(a)}),i()(),t(8,"div",30)(9,"label",31),o(10,"Direcci\xF3n / Referencia"),i(),t(11,"input",45),C("ngModelChange",function(a){p(e);let c=d(2);return w(c.ubicacionForm.direccion,a)||(c.ubicacionForm.direccion=a),u(a)}),i()()(),t(12,"div",37)(13,"div",30)(14,"label",31),o(15,"Estado"),i(),t(16,"select",46),C("ngModelChange",function(a){p(e);let c=d(2);return w(c.ubicacionForm.estado,a)||(c.ubicacionForm.estado=a),u(a)}),t(17,"option",39),o(18,"Activo"),i(),t(19,"option",40),o(20,"Inactivo"),i()()(),t(21,"div",41)(22,"button",42),o(23),i()()()()}if(s&2){let e=d(2);l(7),_("ngModel",e.ubicacionForm.nombre),l(4),_("ngModel",e.ubicacionForm.direccion),l(5),_("ngModel",e.ubicacionForm.estado),l(7),b(" ",e.editingUbicacionId?"Actualizar Ubicaci\xF3n":"Guardar Ubicaci\xF3n"," ")}}function si(s,n){if(s&1){let e=y();t(0,"div",19)(1,"div",20)(2,"div",21)(3,"h3",22),o(4),i(),t(5,"button",23),f("click",function(){p(e);let a=d();return u(a.closeForm())}),v(),t(6,"svg",24),g(7,"path",25),i()()(),S(),t(8,"div",26),h(9,ai,27,6,"form",27)(10,li,24,4,"form",27),i()()()}if(s&2){let e=d();l(4),b(" ",e.editingAreaId||e.editingUbicacionId?"Editar":"Nuevo"," Registro "),l(5),m("ngIf",e.activeFormTab==="area"),l(),m("ngIf",e.activeFormTab==="ubicacion")}}function ci(s,n){if(s&1){let e=y();t(0,"tr",60)(1,"td",61),o(2),i(),t(3,"td",62)(4,"span",63),o(5),i(),o(6),i(),t(7,"td",64),o(8),i(),t(9,"td",56)(10,"span"),o(11),i()(),t(12,"td",57)(13,"div",65)(14,"button",66),f("click",function(){let a=p(e).$implicit,c=d(2);return u(c.startEditArea(a))}),v(),t(15,"svg",67),g(16,"path",68),i()(),S(),t(17,"button",69),f("click",function(){let a=p(e).$implicit,c=d(2);return u(c.deleteArea(a.id))}),v(),t(18,"svg",67),g(19,"path",70),i()()()()()}if(s&2){let e=n.$implicit,r=n.index,a=d(2);l(2),x(r+1),l(3),b(" ",r+1<10?"0"+(r+1):r+1," "),l(),b(" ",e.nombre," "),l(2),b("",a.getUbicacionNombre(e.ubicacion_id)," "),l(2),B(e.estado==="ACTIVO"?"badge-emerald":"badge-red"),l(),b(" ",e.estado," ")}}function di(s,n){if(s&1){let e=y();t(0,"div",47)(1,"div",48)(2,"h3",49),o(3,"Departamentos / \xC1reas Registradas "),i(),t(4,"button",50),f("click",function(){p(e);let a=d();return u(a.openForm("area"))}),o(5," Nuevo \xC1rea "),i()(),t(6,"div",51)(7,"div",52)(8,"table",53)(9,"thead")(10,"tr",54)(11,"th",55),o(12,"#"),i(),t(13,"th",56),o(14,"Nombre del \xC1rea"),i(),t(15,"th",56),o(16,"Ubicaci\xF3n"),i(),t(17,"th",56),o(18,"Estado"),i(),t(19,"th",57),o(20,"Acciones"),i()()(),t(21,"tbody",58),h(22,ci,20,7,"tr",59),i()()()()()}if(s&2){let e=d();l(22),m("ngForOf",e.filteredAreas)}}function mi(s,n){if(s&1){let e=y();t(0,"tr",60)(1,"td",61),o(2),i(),t(3,"td",62)(4,"span",63),o(5),i(),o(6),i(),t(7,"td",71),o(8),i(),t(9,"td",56)(10,"span"),o(11),i()(),t(12,"td",57)(13,"div",65)(14,"button",66),f("click",function(){let a=p(e).$implicit,c=d(2);return u(c.startEditUbicacion(a))}),v(),t(15,"svg",67),g(16,"path",68),i()(),S(),t(17,"button",69),f("click",function(){let a=p(e).$implicit,c=d(2);return u(c.deleteUbicacion(a.id))}),v(),t(18,"svg",67),g(19,"path",70),i()()()()()}if(s&2){let e=n.$implicit,r=n.index;l(2),x(r+1),l(3),b(" ",r+1<10?"0"+(r+1):r+1," "),l(),b(" ",e.nombre," "),l(2),x(e.direccion||"N/A"),l(2),B(e.estado==="ACTIVO"?"badge-emerald":"badge-red"),l(),b(" ",e.estado," ")}}function pi(s,n){if(s&1){let e=y();t(0,"div",47)(1,"div",48)(2,"h3",49),o(3,"Ubicaciones F\xEDsicas Registradas "),i(),t(4,"button",50),f("click",function(){p(e);let a=d();return u(a.openForm("ubicacion"))}),o(5," Nueva Ubicaci\xF3n "),i()(),t(6,"div",51)(7,"div",52)(8,"table",53)(9,"thead")(10,"tr",54)(11,"th",55),o(12,"#"),i(),t(13,"th",56),o(14,"Ubicaci\xF3n / Sitio"),i(),t(15,"th",56),o(16,"Direcci\xF3n"),i(),t(17,"th",56),o(18,"Estado"),i(),t(19,"th",57),o(20,"Acciones"),i()()(),t(21,"tbody",58),h(22,mi,20,7,"tr",59),i()()()()()}if(s&2){let e=d();l(22),m("ngForOf",e.filteredUbicaciones)}}var We=class s{constructor(n,e){this.ubicacionService=n;this.cdr=e}activeTab="areas";showForm=!1;activeFormTab="area";areas=[];ubicaciones=[];loading=!0;searchText="";areaForm={nombre:"",ubicacion_id:null,estado:"ACTIVO"};editingAreaId=null;ubicacionForm={nombre:"",direccion:"",estado:"ACTIVO"};editingUbicacionId=null;ngOnInit(){this.loadData()}loadData(){this.loadAreas(),this.loadUbicaciones()}loadAreas(){this.loading=!0,this.ubicacionService.getAllAreas().subscribe({next:n=>{this.areas=n,this.checkLoading()},error:()=>this.checkLoading()})}loadUbicaciones(){this.loading=!0,this.ubicacionService.getAllUbicaciones().subscribe({next:n=>{this.ubicaciones=n,this.checkLoading()},error:()=>this.checkLoading()})}checkLoading(){this.loading=!1,this.cdr.detectChanges()}get filteredAreas(){if(!this.searchText)return this.areas;let n=this.searchText.toLowerCase();return this.areas.filter(e=>e.nombre.toLowerCase().includes(n)||e.ubicacion_nombre?.toLowerCase().includes(n)||!1)}get filteredUbicaciones(){if(!this.searchText)return this.ubicaciones;let n=this.searchText.toLowerCase();return this.ubicaciones.filter(e=>e.nombre.toLowerCase().includes(n)||e.direccion?.toLowerCase().includes(n)||!1)}openForm(n){this.activeFormTab=n,this.showForm=!0,this.resetForms()}closeForm(){this.showForm=!1,this.editingAreaId=null,this.editingUbicacionId=null,this.resetForms()}resetForms(){this.editingAreaId||(this.areaForm={nombre:"",ubicacion_id:null,estado:"ACTIVO"}),this.editingUbicacionId||(this.ubicacionForm={nombre:"",direccion:"",estado:"ACTIVO"})}saveArea(){if(!this.areaForm.nombre){J.default.fire("Atenci\xF3n","El nombre del \xE1rea es obligatorio","warning");return}(this.editingAreaId?this.ubicacionService.updateArea(this.editingAreaId,this.areaForm):this.ubicacionService.createArea(this.areaForm)).subscribe({next:()=>{J.default.fire({icon:"success",title:this.editingAreaId?"Actualizado":"Creado",text:`El \xE1rea se ha ${this.editingAreaId?"actualizado":"creado"} correctamente.`,timer:2e3,showConfirmButton:!1}),this.closeForm(),this.loadData()},error:e=>{console.error("Error saving area:",e);let r=e.error?.message||e.message||"Error desconocido del servidor";J.default.fire("Error",`No se pudo procesar el \xE1rea: ${r}`,"error")}})}startEditArea(n){this.editingAreaId=n.id,this.areaForm={nombre:n.nombre,ubicacion_id:n.ubicacion_id??null,estado:n.estado},this.openForm("area")}deleteArea(n){J.default.fire({title:"\xBFEst\xE1s seguro?",text:"Esta acci\xF3n no se puede revertir",icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",cancelButtonColor:"#64748b",confirmButtonText:"S\xED, eliminar",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&this.ubicacionService.deleteArea(n).subscribe({next:()=>{J.default.fire("Eliminado","El \xE1rea ha sido eliminada","success"),this.loadData()},error:r=>J.default.fire("Error","No se pudo eliminar el \xE1rea","error")})})}saveUbicacion(){if(!this.ubicacionForm.nombre){J.default.fire("Atenci\xF3n","El nombre de la ubicaci\xF3n es obligatorio","warning");return}(this.editingUbicacionId?this.ubicacionService.updateUbicacion(this.editingUbicacionId,this.ubicacionForm):this.ubicacionService.createUbicacion(this.ubicacionForm)).subscribe({next:()=>{J.default.fire({icon:"success",title:this.editingUbicacionId?"Actualizado":"Creado",text:`La ubicaci\xF3n se ha ${this.editingUbicacionId?"actualizada":"creada"} correctamente.`,timer:2e3,showConfirmButton:!1}),this.closeForm(),this.loadData()},error:e=>{console.error("Error saving ubicacion:",e);let r=e.error?.message||e.message||"Error desconocido del servidor";J.default.fire("Error",`No se pudo procesar la ubicaci\xF3n: ${r}`,"error")}})}startEditUbicacion(n){this.editingUbicacionId=n.id,this.ubicacionForm={nombre:n.nombre,direccion:n.direccion||"",estado:n.estado},this.openForm("ubicacion")}deleteUbicacion(n){J.default.fire({title:"\xBFEst\xE1s seguro?",text:"Esta acci\xF3n no se puede revertir",icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",cancelButtonColor:"#64748b",confirmButtonText:"S\xED, eliminar",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&this.ubicacionService.deleteUbicacion(n).subscribe({next:()=>{J.default.fire("Eliminado","La ubicaci\xF3n ha sido eliminada","success"),this.loadData()},error:()=>J.default.fire("Error","No se pudo eliminar la ubicaci\xF3n","error")})})}getUbicacionNombre(n){return n?this.ubicaciones.find(r=>r.id===n)?.nombre||"Desconocido":"General / Sin asginar"}handleKeyboardEvent(n){n.ctrlKey&&n.altKey&&n.key==="n"&&(n.preventDefault(),this.activeTab==="areas"?this.openForm("area"):this.activeTab==="ubicaciones"&&this.openForm("ubicacion"))}static \u0275fac=function(e){return new(e||s)(E(Me),E(W))};static \u0275cmp=I({type:s,selectors:[["app-ubicaciones"]],hostBindings:function(e,r){e&1&&f("keydown",function(c){return r.handleKeyboardEvent(c)},Re)},decls:22,vars:21,consts:[[1,"p-6","lg:p-8"],[1,"flex","flex-col","md:flex-row","md:items-center","justify-between","gap-4","mb-8"],[1,"text-3xl","font-black","text-primary","tracking-tight"],[1,"text-secondary","mt-1","tracking-tight"],[1,"mb-6"],[1,"relative","group"],["type","text",1,"input-field","w-full","!bg-white","dark:!bg-white/5","!border-gray-300","dark:!border-white/10","rounded-2xl","py-4","pl-14","pr-6","!text-gray-900","dark:!text-white","placeholder-gray-400","focus:outline-none","focus:ring-2","focus:ring-blue-500/50","transition-all","text-lg","shadow-xl","text-center",3,"ngModelChange","ngModel","placeholder"],[1,"absolute","inset-y-0","left-0","pl-6","flex","items-center","pointer-events-none"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-blue-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],["class","absolute inset-y-0 right-0 pr-6 flex items-center",4,"ngIf"],[1,"flex","gap-2","mb-6","overflow-x-auto","pb-2"],[1,"px-6","py-3","rounded-xl","font-bold","text-sm","transition-all","hover:bg-blue-500","hover:text-white","shrink-0",3,"click"],["class","mb-10 animate-fade-in",4,"ngIf"],["class","animate-fade-in",4,"ngIf"],[1,"absolute","inset-y-0","right-0","pr-6","flex","items-center"],[1,"text-gray-400","hover:text-gray-900","dark:hover:text-white","transition-colors",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"mb-10","animate-fade-in"],[1,"card","p-0","overflow-hidden","border-t-4","border-blue-500","shadow-2xl"],[1,"flex","border-b","border-white/5","bg-gray-500/5","justify-between","items-center"],[1,"px-8","py-4","text-sm","font-black","uppercase","tracking-widest","text-blue-500"],[1,"p-2","mr-4","text-muted","hover:text-white","bg-white/5","hover:bg-white/10","rounded-full","transition-all",3,"click"],["fill","none","viewBox","0 0 24 24","stroke-width","2.5","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","d","M6 18L18 6M6 6l12 12"],[1,"px-8","py-8"],["class","space-y-6",3,"ngSubmit",4,"ngIf"],[1,"space-y-6",3,"ngSubmit"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"space-y-2"],[1,"text-xs","font-bold","text-muted"],[1,"text-red-500"],["type","text","name","nombre","placeholder","Ej. Recursos Humanos",1,"input-field","h-11","text-sm","bg-gray-50/5",3,"ngModelChange","ngModel"],["name","ubi_id",1,"input-field","h-11","text-sm","bg-gray-50/5",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6","items-center"],["name","estado",1,"input-field","h-11","text-sm","bg-gray-50/5",3,"ngModelChange","ngModel"],["value","ACTIVO"],["value","INACTIVO"],[1,"flex","justify-end","mt-6"],["type","submit",1,"btn-primary","w-full","md:w-auto","px-8","h-11","shadow-xl","shadow-blue-500/20","hover:scale-[1.02]","active:scale-95","transition-all","font-bold","tracking-wide"],[3,"value"],["type","text","name","nombre_ubi","placeholder","Ej. Edificio Municipal A",1,"input-field","h-11","text-sm","bg-gray-50/5",3,"ngModelChange","ngModel"],["type","text","name","dir","placeholder","Ej. Frente al parque central",1,"input-field","h-11","text-sm","bg-gray-50/5",3,"ngModelChange","ngModel"],["name","estado_ubi",1,"input-field","h-11","text-sm","bg-gray-50/5",3,"ngModelChange","ngModel"],[1,"animate-fade-in"],[1,"flex","flex-col","md:flex-row","md:items-center","justify-between","gap-4","mb-4"],[1,"text-xs","font-black","text-muted","uppercase","tracking-[0.2em]"],[1,"btn-primary","h-11","px-6","shadow-lg","shadow-blue-500/20","active:scale-95","transition-all","font-bold",3,"click"],[1,"card","overflow-hidden"],[1,"overflow-x-auto"],[1,"w-full","text-left"],[1,"bg-gray-500/5","text-muted","text-[10px]","font-black","uppercase","tracking-widest","border-b","border-white/5"],[1,"px-6","py-4","w-12"],[1,"px-6","py-4"],[1,"px-6","py-4","text-right"],[1,"divide-y","divide-white/5","font-medium"],["class","hover:bg-gray-500/5 transition-colors group",4,"ngFor","ngForOf"],[1,"hover:bg-gray-500/5","transition-colors","group"],[1,"px-6","py-4","text-xs","font-black","text-muted"],[1,"px-6","py-4","text-sm","font-bold","text-primary"],[1,"text-blue-500","mr-2","font-mono"],[1,"px-6","py-4","text-xs","text-muted"],[1,"flex","items-center","justify-end","gap-1"],[1,"p-2","text-muted","hover:text-blue-500","hover:bg-blue-500/10","rounded-lg","transition-all",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"],[1,"p-2","text-muted","hover:text-red-500","hover:bg-red-500/10","rounded-lg","transition-all",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"px-6","py-4","text-xs","text-muted","truncate","max-w-[150px]"]],template:function(e,r){e&1&&(t(0,"div",0)(1,"div",1)(2,"div")(3,"h2",2),o(4,"Estructura Organizativa"),i(),t(5,"p",3),o(6,"Gesti\xF3n jer\xE1rquica de \xE1reas y ubicaciones f\xEDsicas."),i()()(),t(7,"div",4)(8,"div",5)(9,"input",6),C("ngModelChange",function(c){return w(r.searchText,c)||(r.searchText=c),c}),i(),t(10,"div",7),v(),t(11,"svg",8),g(12,"path",9),i()(),h(13,ri,4,0,"div",10),i()(),S(),t(14,"div",11)(15,"button",12),f("click",function(){return r.activeTab="areas"}),o(16),i(),t(17,"button",12),f("click",function(){return r.activeTab="ubicaciones"}),o(18),i()(),h(19,si,11,3,"div",13)(20,di,23,1,"div",14)(21,pi,23,1,"div",14),i()),e&2&&(l(9),m("placeholder",Ie("Buscar en ",r.activeTab==="areas"?"Departamentos":"Ubicaciones","...")),_("ngModel",r.searchText),l(4),m("ngIf",r.searchText),l(2),F("bg-blue-600",r.activeTab==="areas")("text-white",r.activeTab==="areas")("shadow-lg",r.activeTab==="areas"),l(),b(" Departamentos / \xC1reas (",r.areas.length,") "),l(),F("bg-blue-600",r.activeTab==="ubicaciones")("text-white",r.activeTab==="ubicaciones")("shadow-lg",r.activeTab==="ubicaciones"),l(),b(" Ubicaciones F\xEDsicas (",r.ubicaciones.length,") "),l(),m("ngIf",r.showForm),l(),m("ngIf",r.activeTab==="areas"),l(),m("ngIf",r.activeTab==="ubicaciones"))},dependencies:[T,V,A,L,ie,re,oe,N,ne,D,ee,R,te],encapsulation:2})};var le=de(me());function gi(s,n){if(s&1){let e=y();t(0,"div",15)(1,"button",16),f("click",function(){p(e);let a=d();return u(a.searchText="")}),v(),t(2,"svg",17),g(3,"path",18),i()()()}}function fi(s,n){if(s&1&&g(0,"img",57),s&2){let e=d(3);m("src",e.imagePreview,K)}}function xi(s,n){s&1&&(v(),t(0,"svg",58),g(1,"path",59)(2,"path",60),i())}function hi(s,n){if(s&1&&(t(0,"option",61),o(1),i()),s&2){let e=n.$implicit;m("value",e.id),l(),x(e.nombre)}}function bi(s,n){if(s&1&&(t(0,"option",61),o(1),i()),s&2){let e=n.$implicit,r=n.index;m("value",e.id),l(),M(" ",r+1<10?"0"+(r+1):r+1," ",e.nombre," ")}}function vi(s,n){if(s&1){let e=y();t(0,"form",28),f("ngSubmit",function(){p(e);let a=d(2);return u(a.savePersonal())}),t(1,"div",29)(2,"label",30)(3,"div",31),h(4,fi,1,1,"img",32)(5,xi,3,0,"svg",33),i(),t(6,"input",34),f("change",function(a){p(e);let c=d(2);return u(c.onFileSelected(a))}),i(),t(7,"div",35),v(),t(8,"svg",36),g(9,"path",37),i()()(),S(),t(10,"span",38),o(11,"Foto de perfil"),i()(),t(12,"div",39)(13,"div",40)(14,"label",41),o(15,"No. Empleado"),i(),t(16,"input",42),C("ngModelChange",function(a){p(e);let c=d(2);return w(c.personalForm.numero_empleado,a)||(c.personalForm.numero_empleado=a),u(a)}),i()(),t(17,"div",40)(18,"label",41),o(19,"Nombre "),t(20,"span",43),o(21,"*"),i()(),t(22,"input",44),C("ngModelChange",function(a){p(e);let c=d(2);return w(c.personalForm.nombre,a)||(c.personalForm.nombre=a),u(a)}),i()(),t(23,"div",40)(24,"label",41),o(25,"Apellido "),t(26,"span",43),o(27,"*"),i()(),t(28,"input",45),C("ngModelChange",function(a){p(e);let c=d(2);return w(c.personalForm.apellido,a)||(c.personalForm.apellido=a),u(a)}),i()()(),t(29,"div",46)(30,"div",40)(31,"label",41),o(32,"Cargo Responsable"),i(),t(33,"select",47),C("ngModelChange",function(a){p(e);let c=d(2);return w(c.personalForm.cargo_id,a)||(c.personalForm.cargo_id=a),u(a)}),t(34,"option",48),o(35,"Selecciona un cargo"),i(),h(36,hi,2,2,"option",49),i()(),t(37,"div",40)(38,"label",41),o(39,"\xC1rea Asignada"),i(),t(40,"select",50),C("ngModelChange",function(a){p(e);let c=d(2);return w(c.personalForm.area_id,a)||(c.personalForm.area_id=a),u(a)}),t(41,"option",48),o(42,"Selecciona un \xE1rea"),i(),h(43,bi,2,3,"option",49),i()()(),t(44,"div",51)(45,"div",40)(46,"label",41),o(47,"Estado"),i(),t(48,"select",52),C("ngModelChange",function(a){p(e);let c=d(2);return w(c.personalForm.estado,a)||(c.personalForm.estado=a),u(a)}),t(49,"option",53),o(50,"Activo"),i(),t(51,"option",54),o(52,"Inactivo"),i()()(),t(53,"div",55)(54,"button",56),o(55),i()()()()}if(s&2){let e=d(2);l(4),m("ngIf",e.imagePreview),l(),m("ngIf",!e.imagePreview),l(11),_("ngModel",e.personalForm.numero_empleado),l(6),_("ngModel",e.personalForm.nombre),l(6),_("ngModel",e.personalForm.apellido),l(5),_("ngModel",e.personalForm.cargo_id),l(),m("ngValue",void 0),l(2),m("ngForOf",e.allCargos),l(4),_("ngModel",e.personalForm.area_id),l(),m("ngValue",void 0),l(2),m("ngForOf",e.areas),l(5),_("ngModel",e.personalForm.estado),l(7),b(" ",e.editingPersonalId?"Actualizar Personal":"Guardar Personal"," ")}}function _i(s,n){if(s&1){let e=y();t(0,"form",28),f("ngSubmit",function(){p(e);let a=d(2);return u(a.saveCargo())}),t(1,"div",46)(2,"div",40)(3,"label",41),o(4,"Nombre del Cargo "),t(5,"span",43),o(6,"*"),i()(),t(7,"input",62),C("ngModelChange",function(a){p(e);let c=d(2);return w(c.cargoForm.nombre,a)||(c.cargoForm.nombre=a),u(a)}),i()(),t(8,"div",40)(9,"label",41),o(10,"Estado"),i(),t(11,"select",63),C("ngModelChange",function(a){p(e);let c=d(2);return w(c.cargoForm.estado,a)||(c.cargoForm.estado=a),u(a)}),t(12,"option",53),o(13,"Activo"),i(),t(14,"option",54),o(15,"Inactivo"),i()()()(),t(16,"div",64)(17,"button",56),o(18),i()()()}if(s&2){let e=d(2);l(7),_("ngModel",e.cargoForm.nombre),l(4),_("ngModel",e.cargoForm.estado),l(7),b(" ",e.editingCargoId?"Actualizar Cargo":"Guardar Cargo"," ")}}function wi(s,n){if(s&1){let e=y();t(0,"div",19)(1,"div",20)(2,"div",21)(3,"h3",22),o(4),i(),t(5,"button",23),f("click",function(){p(e);let a=d();return u(a.closeForm())}),v(),t(6,"svg",24),g(7,"path",25),i()()(),S(),t(8,"div",26),h(9,vi,56,13,"form",27)(10,_i,19,3,"form",27),i()()()}if(s&2){let e=d();l(4),b(" ",e.editingPersonalId||e.editingCargoId?"Editar":"Nuevo"," Registro "),l(5),m("ngIf",e.activeFormTab==="personal"),l(),m("ngIf",e.activeFormTab==="cargo")}}function Ci(s,n){s&1&&(t(0,"tr",80)(1,"td",81),o(2,"Cargando personal..."),i()())}function yi(s,n){if(s&1&&g(0,"img",57),s&2){let e=d().$implicit;m("src",e.foto,K)}}function Si(s,n){if(s&1&&(t(0,"span",97),o(1),i()),s&2){let e=d().$implicit;l(),M("",e.nombre.charAt(0),"",e.apellido.charAt(0))}}function Ei(s,n){if(s&1&&(t(0,"span",98),o(1),i()),s&2){let e=d().$implicit;l(),b("#",e.numero_empleado)}}function ki(s,n){if(s&1){let e=y();t(0,"tr",82)(1,"td",83),o(2),i(),t(3,"td",75)(4,"div",84)(5,"div",85),h(6,yi,1,1,"img",32)(7,Si,2,2,"span",86),i(),t(8,"div",87)(9,"span",88),o(10),i(),h(11,Ei,2,1,"span",89),i()()(),t(12,"td",75)(13,"div",87)(14,"span",90),o(15),i(),t(16,"span",91),o(17),i()()(),t(18,"td",75)(19,"span"),o(20),i()(),t(21,"td",76)(22,"div",92)(23,"button",93),f("click",function(){let a=p(e).$implicit,c=d(2);return u(c.startEditPersonal(a))}),v(),t(24,"svg",36),g(25,"path",94),i()(),S(),t(26,"button",95),f("click",function(){let a=p(e).$implicit,c=d(2);return u(c.deletePersonal(a.id))}),v(),t(27,"svg",36),g(28,"path",96),i()()()()()}if(s&2){let e=n.$implicit,r=n.index;l(2),x(r+1),l(4),m("ngIf",e.foto),l(),m("ngIf",!e.foto),l(3),M("",e.nombre," ",e.apellido),l(),m("ngIf",e.numero_empleado),l(4),x(e.cargo||"Sin Cargo"),l(2),x(e.area||"General"),l(2),B(e.estado==="ACTIVO"?"badge-emerald":"badge-red"),l(),b(" ",e.estado," ")}}function Ii(s,n){if(s&1){let e=y();t(0,"div",65)(1,"div",66)(2,"div",67)(3,"h3",68),o(4,"Listado de Personal"),i()(),t(5,"button",69),f("click",function(){p(e);let a=d();return u(a.openForm("personal"))}),o(6," Nuevo Personal "),i()(),t(7,"div",70)(8,"div",71)(9,"table",72)(10,"thead")(11,"tr",73)(12,"th",74),o(13,"#"),i(),t(14,"th",75),o(15,"Nombre Completo"),i(),t(16,"th",75),o(17,"Cargo / \xC1rea"),i(),t(18,"th",75),o(19,"Estado"),i(),t(20,"th",76),o(21,"Acciones"),i()()(),t(22,"tbody",77),h(23,Ci,3,0,"tr",78)(24,ki,29,11,"tr",79),i()()()()()}if(s&2){let e=d();l(23),m("ngIf",e.loading),l(),m("ngForOf",e.filteredPersonal)}}function Mi(s,n){if(s&1){let e=y();t(0,"tr",82)(1,"td",99),o(2),i(),t(3,"td",100)(4,"div",87)(5,"span",88),o(6),i(),t(7,"span",101),o(8),i()()(),t(9,"td",102)(10,"div",103)(11,"button",104),f("click",function(){let a=p(e).$implicit,c=d(2);return u(c.startEditCargo(a))}),v(),t(12,"svg",105),g(13,"path",94),i()(),S(),t(14,"button",106),f("click",function(){let a=p(e).$implicit,c=d(2);return u(c.deleteCargo(a.id))}),v(),t(15,"svg",105),g(16,"path",96),i()()()()()}if(s&2){let e=n.$implicit,r=n.index;l(2),x(r+1),l(4),x(e.nombre),l(),B(e.estado==="ACTIVO"?"text-emerald-500":"text-red-500"),l(),b(" ",e.estado," ")}}function Ti(s,n){if(s&1){let e=y();t(0,"div",65)(1,"div",66)(2,"h3",68),o(3,"Cargos Institucionales"),i(),t(4,"button",69),f("click",function(){p(e);let a=d();return u(a.openForm("cargo"))}),o(5," Nuevo Cargo "),i()(),t(6,"div",70)(7,"div",71)(8,"table",72)(9,"thead")(10,"tr",73)(11,"th",74),o(12,"#"),i(),t(13,"th",75),o(14,"Cargo"),i(),t(15,"th",76),o(16,"Acciones"),i()()(),t(17,"tbody",77),h(18,Mi,17,5,"tr",79),i()()()()()}if(s&2){let e=d();l(18),m("ngForOf",e.filteredCargos)}}var qe=class s{constructor(n,e,r){this.personalService=n;this.ubicacionService=e;this.cdr=r}activeTab="personal";showForm=!1;activeFormTab="personal";personal=[];cargos=[];allCargos=[];areas=[];ubicaciones=[];loading=!0;searchText="";imagePreview=null;selectedFile=null;personalForm={nombre:"",apellido:"",cargo_id:void 0,area_id:void 0,estado:"ACTIVO",numero_empleado:""};editingPersonalId=null;cargoForm={nombre:"",estado:"ACTIVO"};editingCargoId=null;ngOnInit(){this.loadData()}loadData(){this.loadPersonal(),this.loadCargos(),this.loadStaticData()}loadStaticData(){this.ubicacionService.getAllAreas().subscribe(n=>{this.areas=n}),this.ubicacionService.getAllUbicaciones().subscribe(n=>{this.ubicaciones=n})}loadPersonal(){this.loading=!0,this.personalService.getAllPersonal().subscribe({next:n=>{this.personal=n,this.loading=!1,this.cdr.detectChanges()},error:()=>{this.loading=!1,this.cdr.detectChanges()}})}loadCargos(){this.personalService.getAllCargos().subscribe({next:n=>{this.cargos=n,this.allCargos=n,this.cdr.detectChanges()}})}get filteredPersonal(){if(!this.searchText)return this.personal;let n=this.searchText.toLowerCase();return this.personal.filter(e=>e.nombre.toLowerCase().includes(n)||e.apellido.toLowerCase().includes(n)||e.cargo?.toLowerCase().includes(n)||e.area?.toLowerCase().includes(n)||e.numero_empleado?.toLowerCase().includes(n))}get filteredCargos(){if(!this.searchText)return this.cargos;let n=this.searchText.toLowerCase();return this.cargos.filter(e=>e.nombre.toLowerCase().includes(n))}onFileSelected(n){let e=n.target.files[0];if(e){this.selectedFile=e;let r=new FileReader;r.onload=()=>{this.imagePreview=r.result,this.cdr.detectChanges()},r.readAsDataURL(e)}}openForm(n){this.showForm=!0,this.activeFormTab=n,this.resetForms()}closeForm(){this.showForm=!1,this.editingPersonalId=null,this.editingCargoId=null,this.imagePreview=null,this.selectedFile=null,this.resetForms()}resetForms(){this.editingPersonalId||(this.personalForm={nombre:"",apellido:"",cargo_id:void 0,area_id:void 0,estado:"ACTIVO",numero_empleado:""}),this.editingCargoId||(this.cargoForm={nombre:"",estado:"ACTIVO"})}savePersonal(){if(!this.personalForm.nombre||!this.personalForm.apellido){le.default.fire("Atenci\xF3n","Nombre y apellido son obligatorios","warning");return}(this.editingPersonalId?this.personalService.updatePersonal(this.editingPersonalId,this.personalForm):this.personalService.createPersonal(this.personalForm)).subscribe({next:()=>{le.default.fire({icon:"success",title:this.editingPersonalId?"Actualizado":"Registrado",text:`El personal ha sido ${this.editingPersonalId?"actualizado":"registrado"} con \xE9xito.`,timer:2e3,showConfirmButton:!1}),this.closeForm(),this.loadPersonal()},error:e=>{let r=e.error?.message||"Error al procesar la solicitud";le.default.fire("Error",r,"error")}})}startEditPersonal(n){this.editingPersonalId=n.id,this.personalForm=Y({},n),this.openForm("personal")}deletePersonal(n){le.default.fire({title:"\xBFEliminar registro?",text:"Esta acci\xF3n no se puede deshacer",icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",confirmButtonText:"S\xED, eliminar",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&this.personalService.deletePersonal(n).subscribe({next:()=>{le.default.fire("Eliminado","El registro ha sido eliminado.","success"),this.loadPersonal()}})})}saveCargo(){if(!this.cargoForm.nombre){le.default.fire("Atenci\xF3n","El nombre del cargo es obligatorio","warning");return}(this.editingCargoId?this.personalService.updateCargo(this.editingCargoId,this.cargoForm):this.personalService.createCargo(this.cargoForm)).subscribe({next:()=>{le.default.fire({icon:"success",title:this.editingCargoId?"Actualizado":"Registrado",text:`El cargo ha sido ${this.editingCargoId?"actualizado":"registrado"} con \xE9xito.`,timer:2e3,showConfirmButton:!1}),this.closeForm(),this.loadCargos()}})}startEditCargo(n){this.editingCargoId=n.id,this.cargoForm={nombre:n.nombre,estado:n.estado},this.openForm("cargo")}deleteCargo(n){le.default.fire({title:"\xBFEliminar cargo?",text:"Aseg\xFArese de que no haya personal asignado a este cargo",icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",confirmButtonText:"S\xED, eliminar",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&this.personalService.deleteCargo(n).subscribe({next:()=>{le.default.fire("Eliminado","El cargo ha sido eliminado.","success"),this.loadCargos()},error:r=>{let a=r.error?.message||"No se pudo eliminar el cargo";le.default.fire("Error",a,"error")}})})}static \u0275fac=function(e){return new(e||s)(E(Oe),E(Me),E(W))};static \u0275cmp=I({type:s,selectors:[["app-recursos-humanos"]],decls:22,vars:21,consts:[[1,"p-6","lg:p-8"],[1,"flex","flex-col","md:flex-row","md:items-center","justify-between","gap-4","mb-8"],[1,"text-3xl","font-black","text-primary","tracking-tight"],[1,"text-secondary","mt-1","tracking-tight"],[1,"mb-6"],[1,"relative","group"],["type","text",1,"input-field","w-full","!bg-white","dark:!bg-white/5","!border-gray-300","dark:!border-white/10","rounded-2xl","py-4","pl-14","pr-6","!text-gray-900","dark:!text-white","placeholder-gray-400","focus:outline-none","focus:ring-2","focus:ring-blue-500/50","transition-all","text-lg","shadow-xl","text-center",3,"ngModelChange","ngModel","placeholder"],[1,"absolute","inset-y-0","left-0","pl-6","flex","items-center","pointer-events-none"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-blue-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],["class","absolute inset-y-0 right-0 pr-6 flex items-center",4,"ngIf"],[1,"flex","gap-2","mb-6","overflow-x-auto","pb-2"],[1,"px-6","py-3","rounded-xl","font-bold","text-sm","transition-all","hover:bg-blue-500","hover:text-white","shrink-0",3,"click"],["class","mb-10 animate-fade-in",4,"ngIf"],["class","animate-fade-in space-y-6",4,"ngIf"],[1,"absolute","inset-y-0","right-0","pr-6","flex","items-center"],[1,"text-gray-400","hover:text-gray-900","dark:hover:text-white","transition-colors",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"mb-10","animate-fade-in"],[1,"card","p-0","overflow-hidden","border-t-4","border-blue-500","shadow-2xl"],[1,"flex","border-b","border-white/5","bg-gray-500/5","justify-between","items-center"],[1,"px-8","py-4","text-sm","font-black","uppercase","tracking-widest","text-blue-500"],[1,"p-2","mr-4","text-muted","hover:text-white","bg-white/5","hover:bg-white/10","rounded-full","transition-all",3,"click"],["fill","none","viewBox","0 0 24 24","stroke-width","2.5","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","d","M6 18L18 6M6 6l12 12"],[1,"px-8","py-8"],["class","space-y-6",3,"ngSubmit",4,"ngIf"],[1,"space-y-6",3,"ngSubmit"],[1,"flex","flex-col","items-center","justify-center","mb-6"],[1,"relative","cursor-pointer","group"],[1,"h-24","w-24","rounded-full","bg-gray-100","border-2","border-dashed","border-gray-300","flex","items-center","justify-center","overflow-hidden","hover:border-blue-500","transition-colors"],["class","h-full w-full object-cover",3,"src",4,"ngIf"],["class","h-8 w-8 text-gray-400 group-hover:text-blue-500","fill","none","viewBox","0 0 24 24","stroke","currentColor",4,"ngIf"],["type","file","accept","image/*",1,"hidden",3,"change"],[1,"absolute","bottom-0","right-0","bg-blue-500","text-white","rounded-full","p-1","shadow-lg","group-hover:scale-110","transition-transform"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"text-xs","text-muted","mt-2"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],[1,"space-y-2"],[1,"text-xs","font-bold","text-muted"],["type","text","name","numero_empleado","placeholder","Ej: 001",1,"input-field","h-11","text-sm","bg-gray-50/5",3,"ngModelChange","ngModel"],[1,"text-red-500"],["type","text","name","nombre","placeholder","Ej: Juan",1,"input-field","h-11","text-sm","bg-gray-50/5",3,"ngModelChange","ngModel"],["type","text","name","apellido","placeholder","Ej: P\xE9rez",1,"input-field","h-11","text-sm","bg-gray-50/5",3,"ngModelChange","ngModel"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],["name","cargo",1,"input-field","h-11","text-sm","bg-gray-50/5",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],["name","area",1,"input-field","h-11","text-sm","bg-gray-50/5",3,"ngModelChange","ngModel"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6","items-center"],["name","estado",1,"input-field","h-11","text-sm","bg-gray-50/5",3,"ngModelChange","ngModel"],["value","ACTIVO"],["value","INACTIVO"],[1,"flex","justify-end","mt-6"],["type","submit",1,"btn-primary","w-full","md:w-auto","px-8","h-11","shadow-xl","shadow-blue-500/20","hover:scale-[1.02]","active:scale-95","transition-all","font-bold","tracking-wide"],[1,"h-full","w-full","object-cover",3,"src"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-8","w-8","text-gray-400","group-hover:text-blue-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0010.07 4h3.86a2 2 0 001.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 13a3 3 0 11-6 0 3 3 0 016 0z"],[3,"value"],["type","text","name","nombre_cargo","placeholder","Ej: Administrador",1,"input-field","h-11","text-sm","bg-gray-50/5",3,"ngModelChange","ngModel"],["name","estado_cargo",1,"input-field","h-11","text-sm","bg-gray-50/5",3,"ngModelChange","ngModel"],[1,"flex","justify-end","pt-4"],[1,"animate-fade-in","space-y-6"],[1,"flex","flex-col","md:flex-row","md:items-center","justify-between","gap-4","mb-4"],[1,"flex","items-center","gap-4"],[1,"text-xs","font-black","text-muted","uppercase","tracking-[0.2em]"],[1,"btn-primary","h-11","px-6","shadow-lg","shadow-blue-500/20","active:scale-95","transition-all","font-bold",3,"click"],[1,"card","overflow-hidden"],[1,"overflow-x-auto"],[1,"w-full","text-left"],[1,"bg-gray-500/5","text-muted","text-[10px]","font-black","uppercase","tracking-widest","border-b","border-white/5"],[1,"px-6","py-4","w-12"],[1,"px-6","py-4"],[1,"px-6","py-4","text-right"],[1,"divide-y","divide-white/5","font-medium"],["class","animate-pulse",4,"ngIf"],["class","hover:bg-gray-500/5 transition-colors group",4,"ngFor","ngForOf"],[1,"animate-pulse"],["colspan","4",1,"px-6","py-10","text-center","text-muted"],[1,"hover:bg-gray-500/5","transition-colors","group"],[1,"px-6","py-4","text-xs","font-black","text-muted"],[1,"flex","items-center","gap-3"],[1,"h-8","w-8","rounded-full","bg-blue-500/10","flex","items-center","justify-center","border","border-blue-500/20","overflow-hidden"],["class","text-blue-500 font-bold text-xs",4,"ngIf"],[1,"flex","flex-col"],[1,"text-sm","font-bold","text-primary"],["class","text-[10px] text-muted font-mono",4,"ngIf"],[1,"text-xs","font-bold","text-primary"],[1,"text-[10px]","text-muted"],[1,"flex","items-center","justify-end","gap-1"],[1,"p-2","text-muted","hover:text-blue-500","hover:bg-blue-500/10","rounded-lg","transition-all",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"],[1,"p-2","text-muted","hover:text-red-500","hover:bg-red-500/10","rounded-lg","transition-all",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"text-blue-500","font-bold","text-xs"],[1,"text-[10px]","text-muted","font-mono"],[1,"px-6","py-3","text-xs","font-black","text-muted"],[1,"px-6","py-3"],[1,"text-[10px]","uppercase","tracking-wider","font-bold"],[1,"px-6","py-3","text-right"],[1,"flex","items-center","justify-end","gap-1","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"p-1.5","text-muted","hover:text-blue-500","rounded-md","transition-all",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-3.5","w-3.5"],[1,"p-1.5","text-muted","hover:text-red-500","rounded-md","transition-all",3,"click"]],template:function(e,r){e&1&&(t(0,"div",0)(1,"div",1)(2,"div")(3,"h2",2),o(4,"Recursos Humanos"),i(),t(5,"p",3),o(6,"Gesti\xF3n del personal y estructura de cargos."),i()()(),t(7,"div",4)(8,"div",5)(9,"input",6),C("ngModelChange",function(c){return w(r.searchText,c)||(r.searchText=c),c}),i(),t(10,"div",7),v(),t(11,"svg",8),g(12,"path",9),i()(),h(13,gi,4,0,"div",10),i()(),S(),t(14,"div",11)(15,"button",12),f("click",function(){return r.activeTab="personal"}),o(16),i(),t(17,"button",12),f("click",function(){return r.activeTab="cargos"}),o(18),i()(),h(19,wi,11,3,"div",13)(20,Ii,25,2,"div",14)(21,Ti,19,1,"div",14),i()),e&2&&(l(9),m("placeholder",Ie("Buscar en ",r.activeTab==="personal"?"Personal":"Cargos","...")),_("ngModel",r.searchText),l(4),m("ngIf",r.searchText),l(2),F("bg-blue-600",r.activeTab==="personal")("text-white",r.activeTab==="personal")("shadow-lg",r.activeTab==="personal"),l(),b(" Listado de Personal (",r.personal.length,") "),l(),F("bg-blue-600",r.activeTab==="cargos")("text-white",r.activeTab==="cargos")("shadow-lg",r.activeTab==="cargos"),l(),b(" Cargos Institucionales (",r.cargos.length,") "),l(),m("ngIf",r.showForm),l(),m("ngIf",r.activeTab==="personal"),l(),m("ngIf",r.activeTab==="cargos"))},dependencies:[T,V,A,L,ie,re,oe,N,ne,D,ee,R,te],encapsulation:2})};var He=de(me());function Fi(s,n){s&1&&(t(0,"span"),o(1,"INICIAR SESI\xD3N"),i())}function Ai(s,n){s&1&&(t(0,"span",21),v(),t(1,"svg",22),g(2,"circle",23)(3,"path",24),i(),o(4," PROCESANDO... "),i())}var ze=class s{constructor(n,e){this.authService=n;this.router=e;console.log("LoginComponent Initialized")}credentials={email:"",password:""};isLoading=!1;onSubmit(){this.isLoading=!0,this.authService.login(this.credentials).subscribe({next:n=>{this.isLoading=!1,He.default.fire({icon:"success",title:"\xA1Bienvenido!",text:"Inicio de sesi\xF3n exitoso",timer:2e3,showConfirmButton:!1}),this.router.navigate(["/dashboard"])},error:n=>{this.isLoading=!1,He.default.fire({icon:"error",title:"Error",text:n.error?.message||n.message||"Error desconocido",confirmButtonColor:"#4682B4"})}})}onForgotPassword(){He.default.fire({title:"Recuperar Contrase\xF1a",html:`
                <div class="text-left space-y-4 font-inter">
                    <p class="text-slate-700">Por motivos de seguridad, para restablecer su contrase\xF1a debe contactar con el <b>Administrador del Sistema</b>.</p>
                    <div class="bg-slate-100 p-4 rounded-xl space-y-2 border border-slate-200">
                        <p class="text-sm font-bold text-slate-800">Canales de soporte:</p>
                        <p class="text-sm text-slate-600">\u{1F4CD} Departamento de Inform\xE1tica</p>
                        <p class="text-sm text-slate-600">\u2709\uFE0F soporte@tipitapa.gob.ni</p>
                    </div>
                </div>
            `,icon:"info",confirmButtonText:"Entendido",confirmButtonColor:"#4682B4",background:"#ffffff",customClass:{title:"font-orbitron text-xl text-slate-800",popup:"rounded-2xl shadow-2xl border border-slate-200"}})}static \u0275fac=function(e){return new(e||s)(E(Z),E(ge))};static \u0275cmp=I({type:s,selectors:[["app-login"]],decls:29,vars:5,consts:[["loginForm","ngForm"],[1,"min-h-screen","bg-slate-900","flex","items-center","justify-center","p-4"],[1,"w-full","max-w-md","bg-slate-800/50","backdrop-blur-xl","border","border-slate-700/50","rounded-2xl","overflow-hidden","shadow-2xl","animate-fade-in"],[1,"p-8"],[1,"flex","justify-center","mb-6"],[1,"p-2","bg-white/10","rounded-2xl","backdrop-blur-md","border","border-white/20","shadow-xl"],["src","assets/logo-alcaldia.png","alt","Logo Alcald\xEDa",1,"w-24","h-24","object-contain"],[1,"text-3xl","font-orbitron","font-bold","text-center","text-white","mb-1"],[1,"text-steel-400","text-center","mb-8","font-inter","font-medium","tracking-wide"],[1,"space-y-6",3,"ngSubmit"],[1,"block","text-sm","font-medium","text-slate-300","mb-2","font-inter"],["type","email","name","email","required","","placeholder","admin@example.com",1,"w-full","bg-slate-900/50","border","border-slate-700","rounded-xl","px-4","py-3","text-white","focus:ring-2","focus:ring-steel-500","focus:border-transparent","transition-all","outline-none","font-inter",3,"ngModelChange","ngModel"],[1,"flex","items-center","justify-between","mb-2"],[1,"text-sm","font-medium","text-slate-300","font-inter"],["type","button",1,"text-xs","text-steel-400","hover:text-steel-300","transition-colors",3,"click"],["type","password","name","password","required","","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"w-full","bg-slate-900/50","border","border-slate-700","rounded-xl","px-4","py-3","text-white","focus:ring-2","focus:ring-steel-500","focus:border-transparent","transition-all","outline-none","font-inter",3,"ngModelChange","ngModel"],["type","submit",1,"w-full","bg-steel-500","hover:bg-steel-600","disabled:opacity-50","disabled:cursor-not-allowed","text-white","font-orbitron","font-bold","py-4","rounded-xl","shadow-lg","shadow-steel-500/20","transform","hover:-translate-y-0.5","transition-all","flex","items-center","justify-center","space-x-2",3,"disabled"],[4,"ngIf"],["class","flex items-center",4,"ngIf"],[1,"p-4","bg-slate-800/80","text-center","border-t","border-slate-700/50"],[1,"text-xs","text-slate-500","font-inter"],[1,"flex","items-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,r){if(e&1){let a=y();t(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5),g(5,"img",6),i()(),t(6,"h2",7),o(7,"ALCALD\xCDA DE TIPITAPA"),i(),t(8,"p",8),o(9,"Sistema de Gesti\xF3n de Activos Fijos"),i(),t(10,"form",9,0),f("ngSubmit",function(){return p(a),u(r.onSubmit())}),t(12,"div")(13,"label",10),o(14,"Correo Electr\xF3nico"),i(),t(15,"input",11),C("ngModelChange",function(Q){return p(a),w(r.credentials.email,Q)||(r.credentials.email=Q),u(Q)}),i()(),t(16,"div")(17,"div",12)(18,"label",13),o(19,"Contrase\xF1a"),i(),t(20,"button",14),f("click",function(){return p(a),u(r.onForgotPassword())}),o(21,"\xBFOlvidaste tu contrase\xF1a?"),i()(),t(22,"input",15),C("ngModelChange",function(Q){return p(a),w(r.credentials.password,Q)||(r.credentials.password=Q),u(Q)}),i()(),t(23,"button",16),h(24,Fi,2,0,"span",17)(25,Ai,5,0,"span",18),i()()(),t(26,"div",19)(27,"p",20),o(28,"\xA9 2026 SGAF2 - Alcald\xEDa Municipal. Todos los derechos reservados."),i()()()()}if(e&2){let a=Fe(11);l(15),_("ngModel",r.credentials.email),l(7),_("ngModel",r.credentials.password),l(),m("disabled",!a.form.valid||r.isLoading),l(),m("ngIf",!r.isLoading),l(),m("ngIf",r.isLoading)}},dependencies:[T,A,L,ie,N,D,ee,Wt,R,te],encapsulation:2})};var Ve=de(me());var Ge=class s{constructor(n){this.http=n}apiUrl=U.apiUrl;getReasignaciones(n=1,e=""){let r=new ue().set("page",n.toString());return e&&(r=r.set("search",e)),this.http.get(`${this.apiUrl}/reasignaciones`,{params:r})}createReasignacion(n){return this.http.post(`${this.apiUrl}/reasignaciones`,n)}getPrintUrl(n){return`${this.apiUrl}/reasignaciones/${n}/acta`}downloadActa(n){return this.http.get(`${this.apiUrl}/reasignaciones/${n}/acta`,{responseType:"blob"})}static \u0275fac=function(e){return new(e||s)($(q))};static \u0275prov=H({token:s,factory:s.\u0275fac,providedIn:"root"})};function Pi(s,n){if(s&1&&(t(0,"option",50),o(1),i()),s&2){let e=n.$implicit;m("ngValue",e.id),l(),b(" ",e.nombre," ")}}function Di(s,n){if(s&1&&(t(0,"option",50),o(1),i()),s&2){let e=n.$implicit;m("ngValue",e.id),l(),M(" ",e.nombre," ",e.apellido," ")}}function Ri(s,n){s&1&&(t(0,"div",71),g(1,"i",72),t(2,"span",73),o(3,"Activo detectado autom\xE1ticamente por c\xF3digo. Completa los detalles para reasignar."),i()())}function Li(s,n){if(s&1&&(t(0,"option",50),o(1),i()),s&2){let e=n.$implicit;m("ngValue",e.id),l(),M(" ",e.codigo_inventario," - ",e.nombre_activo," ")}}function ji(s,n){s&1&&(t(0,"p",74),o(1," Usa el buscador del Paso 1 para encontrar el activo "),i())}function Ui(s,n){if(s&1&&(t(0,"option",50),o(1),i()),s&2){let e=n.$implicit;m("ngValue",e.id),l(),b(" ",e.nombre," ")}}function Oi(s,n){if(s&1&&(t(0,"option",50),o(1),i()),s&2){let e=n.$implicit;m("ngValue",e.id),l(),M(" ",e.nombre," ",e.apellido," ")}}function Ni(s,n){if(s&1){let e=y();t(0,"div",75),f("click",function(){p(e),d();let a=Fe(88);return u(a.click())}),t(1,"div",76),g(2,"i",77),i(),t(3,"div",78)(4,"p",79),o(5,"Subir Foto Actual"),i(),t(6,"p",80),o(7,"JPG, PNG o WEBP (M\xE1x. 5MB)"),i()()()}}function Bi(s,n){if(s&1){let e=y();t(0,"div",81),g(1,"img",82),t(2,"div",83)(3,"button",84),f("click",function(){p(e),d();let a=Fe(88);return u(a.click())}),g(4,"i",85),i(),t(5,"button",86),f("click",function(){p(e);let a=d(2);return u(a.removeFoto())}),g(6,"i",87),i()()()}if(s&2){let e=d(2);l(),m("src",e.fotoPreview,K)}}function Wi(s,n){if(s&1){let e=y();t(0,"div",28)(1,"div",29)(2,"div",30)(3,"div")(4,"div",31),o(5,"Movimiento de Activos"),i(),t(6,"h3",32),o(7,"Procesar Reasignaci\xF3n"),i(),t(8,"p",33),o(9,"Transfiere la custodia de un activo a otro personal."),i()(),t(10,"button",34),f("click",function(){p(e);let a=d();return u(a.showForm=!1)}),v(),t(11,"svg",35),g(12,"path",36),i()()(),S(),t(13,"div",37)(14,"form",38),f("submit",function(){p(e);let a=d();return u(a.submitForm())}),t(15,"div",39)(16,"div",40),o(17,"Paso 1: Filtrar Activos"),i(),t(18,"div",41)(19,"div",42)(20,"label",43),o(21,"B\xFAsqueda (C\xF3digo o Nombre)"),i(),t(22,"div",44)(23,"input",45),C("ngModelChange",function(a){p(e);let c=d();return w(c.filterSearch,a)||(c.filterSearch=a),u(a)}),f("input",function(){p(e);let a=d();return u(a.onFilterChange())}),i(),t(24,"div",46),v(),t(25,"svg",47),g(26,"path",48),i()()()(),S(),t(27,"div",42)(28,"label",43),o(29,"\xC1rea"),i(),t(30,"select",49),C("ngModelChange",function(a){p(e);let c=d();return w(c.filterAreaId,a)||(c.filterAreaId=a),u(a)}),f("change",function(){p(e);let a=d();return u(a.onFilterChange())}),t(31,"option",50),o(32,"Todas las \xE1reas"),i(),h(33,Pi,2,2,"option",51),i()(),t(34,"div",42)(35,"label",43),o(36,"Responsable Actual"),i(),t(37,"select",52),C("ngModelChange",function(a){p(e);let c=d();return w(c.filterPersonalId,a)||(c.filterPersonalId=a),u(a)}),f("change",function(){p(e);let a=d();return u(a.onFilterChange())}),t(38,"option",50),o(39,"Sin custodio espec\xEDfico / Todos"),i(),h(40,Di,2,3,"option",51),i()()()(),t(41,"div",53)(42,"div",40),o(43,"Paso 2: Reasignar"),i(),h(44,Ri,4,0,"div",54),t(45,"div",55)(46,"div",56)(47,"div",42)(48,"label",43),o(49,"Activo a Reasignar "),t(50,"span",57),o(51,"*"),i()(),t(52,"select",58),C("ngModelChange",function(a){p(e);let c=d();return w(c.form.activo_id,a)||(c.form.activo_id=a),u(a)}),f("change",function(){p(e);let a=d();return u(a.onAssetSelect())}),t(53,"option",59),o(54,"Seleccionar Activo..."),i(),h(55,Li,2,3,"option",51),i(),h(56,ji,2,0,"p",60),i(),t(57,"div",42)(58,"label",43),o(59,"Nueva \xC1rea "),t(60,"span",57),o(61,"*"),i()(),t(62,"select",61),C("ngModelChange",function(a){p(e);let c=d();return w(c.form.area_nueva_id,a)||(c.form.area_nueva_id=a),u(a)}),f("change",function(){p(e);let a=d();return u(a.onAreaNuevaChange())}),t(63,"option",59),o(64,"Seleccionar \xC1rea..."),i(),h(65,Ui,2,2,"option",51),i()(),t(66,"div",42)(67,"label",43),o(68,"Nuevo Custodio "),t(69,"span",57),o(70,"*"),i()(),t(71,"select",62),C("ngModelChange",function(a){p(e);let c=d();return w(c.form.personal_nuevo_id,a)||(c.form.personal_nuevo_id=a),u(a)}),t(72,"option",59),o(73),i(),h(74,Oi,2,3,"option",51),i()(),t(75,"div",42)(76,"label",43),o(77,"Motivo del Cambio "),t(78,"span",57),o(79,"*"),i()(),t(80,"textarea",63),C("ngModelChange",function(a){p(e);let c=d();return w(c.form.motivo,a)||(c.form.motivo=a),u(a)}),i()()(),t(81,"div",42)(82,"label",43),o(83,"Foto Actual del Activo (Opcional)"),i(),t(84,"div",64),h(85,Ni,8,0,"div",65)(86,Bi,7,1,"div",66),t(87,"input",67,0),f("change",function(a){p(e);let c=d();return u(c.onFileSelected(a))}),i()()()()(),t(89,"div",68)(90,"button",69),f("click",function(){p(e);let a=d();return u(a.showForm=!1)}),o(91,"Cancelar"),i(),t(92,"button",70),o(93," Confirmar Reasignaci\xF3n "),i()()()()()()}if(s&2){let e=d();l(23),_("ngModel",e.filterSearch),l(7),_("ngModel",e.filterAreaId),l(),m("ngValue",null),l(2),m("ngForOf",e.areas),l(4),_("ngModel",e.filterPersonalId),l(),m("ngValue",null),l(2),m("ngForOf",e.filteredCurrentPersonal),l(4),m("ngIf",e.form.activo_id),l(8),F("border-blue-500",e.form.activo_id),_("ngModel",e.form.activo_id),l(),m("ngValue",null),l(2),m("ngForOf",e.filteredAssets),l(),m("ngIf",e.filteredAssets.length===0&&!e.filterSearch),l(6),_("ngModel",e.form.area_nueva_id),l(),m("ngValue",null),l(2),m("ngForOf",e.areas),l(6),_("ngModel",e.form.personal_nuevo_id),m("disabled",!e.form.area_nueva_id),l(),m("ngValue",null),l(),x(e.form.area_nueva_id?"Seleccionar Personal...":"Primero selecciona un \xE1rea"),l(),m("ngForOf",e.filteredNewPersonal),l(6),_("ngModel",e.form.motivo),l(5),m("ngIf",!e.fotoPreview),l(),m("ngIf",e.fotoPreview)}}function qi(s,n){s&1&&(t(0,"tr",88)(1,"td",89),o(2,"Cargando historial..."),i()())}function Hi(s,n){s&1&&(t(0,"tr")(1,"td",89),o(2,"No hay reasignaciones registradas. "),i()())}function zi(s,n){if(s&1){let e=y();t(0,"tr",90)(1,"td",91),o(2),i(),t(3,"td",92)(4,"div",93)(5,"span",79),o(6),P(7,"date"),i(),t(8,"span",80),o(9),P(10,"date"),i()()(),t(11,"td",16)(12,"div",94)(13,"span",95),o(14),i(),t(15,"span",96),o(16),i()()(),t(17,"td",16)(18,"div",97)(19,"div",98),o(20),i(),t(21,"span",99),o(22),i()()(),t(23,"td",16)(24,"div",97)(25,"div",100),o(26),i(),t(27,"span",101),o(28),i()()(),t(29,"td",16)(30,"span",102),o(31),i()(),t(32,"td",17)(33,"div",103)(34,"button",104),f("click",function(){let a=p(e).$implicit,c=d();return u(c.verDetalles(a))}),v(),t(35,"svg",105),g(36,"path",106)(37,"path",107),i()(),S(),t(38,"button",108),f("click",function(){let a=p(e).$implicit,c=d();return u(c.imprimirActa(a.id))}),v(),t(39,"svg",105),g(40,"path",109),i()()()()()}if(s&2){let e=n.$implicit,r=n.index,a=d();l(2),x((a.currentPage-1)*a.pageSize+r+1),l(4),x(O(7,11,e.fecha_asignacion,"dd/MM/yyyy")),l(3),x(O(10,14,e.fecha_asignacion,"shortTime")),l(5),x(e.nombre_activo),l(2),x(e.codigo_inventario),l(4),b(" ",(e.personal_anterior==null?null:e.personal_anterior.charAt(0))||"?"," "),l(2),x(e.personal_anterior||"Sin asignar"),l(4),b(" ",e.personal_nuevo==null?null:e.personal_nuevo.charAt(0)," "),l(2),x(e.personal_nuevo),l(2),m("title",e.motivo),l(),b(" ",e.motivo," ")}}function Gi(s,n){if(s&1){let e=y();t(0,"div",110)(1,"button",111),f("click",function(){p(e);let a=d();return u(a.changePage(a.currentPage-1))}),v(),t(2,"svg",112),g(3,"path",113),i()(),S(),t(4,"span",114),o(5),i(),t(6,"button",111),f("click",function(){p(e);let a=d();return u(a.changePage(a.currentPage+1))}),v(),t(7,"svg",112),g(8,"path",115),i()()()}if(s&2){let e=d();l(),m("disabled",e.currentPage===1),l(4),M("P\xE1g ",e.currentPage," / ",e.lastPage),l(),m("disabled",e.currentPage===e.lastPage)}}function $i(s,n){if(s&1&&g(0,"img",144),s&2){let e=d(2);m("src",e.getFotoUrl(e.selectedReasignacion==null?null:e.selectedReasignacion.foto_reasignacion),K)}}function Qi(s,n){s&1&&(t(0,"div",145),g(1,"i",146),t(2,"span",147),o(3,"SIN FOTO"),i()())}function Ki(s,n){if(s&1){let e=y();t(0,"div",116)(1,"div",117),f("click",function(){p(e);let a=d();return u(a.showDetails=!1)}),i(),t(2,"div",118)(3,"div",119)(4,"div")(5,"h3",120),o(6,"Detalles de Reasignaci\xF3n"),i(),t(7,"p",99),o(8),i()(),t(9,"button",121),f("click",function(){p(e);let a=d();return u(a.showDetails=!1)}),v(),t(10,"svg",122),g(11,"path",123),i()()(),S(),t(12,"div",124)(13,"div",125)(14,"div",126)(15,"div",127)(16,"label",128),o(17,"Activo"),i(),t(18,"div",95),o(19),i(),t(20,"div",129),o(21),i()(),t(22,"div",130)(23,"div",127)(24,"label",131),o(25,"Anterior"),i(),t(26,"div",99),o(27),i()(),t(28,"div",127)(29,"label",132),o(30,"Nuevo"),i(),t(31,"div",133),o(32),i()()(),t(33,"div",127)(34,"label",131),o(35,"Motivo"),i(),t(36,"p",134),o(37),i()(),t(38,"div",127)(39,"label",131),o(40,"Fecha y Hora"),i(),t(41,"div",99),o(42),P(43,"date"),P(44,"date"),i()()(),t(45,"div",135)(46,"label",136),o(47,"Evidencia Fotogr\xE1fica"),i(),t(48,"div",137),h(49,$i,1,1,"img",138)(50,Qi,4,0,"div",139),i()()(),t(51,"div",140)(52,"button",141),f("click",function(){p(e);let a=d();return u(a.imprimirActa(a.selectedReasignacion==null?null:a.selectedReasignacion.id))}),v(),t(53,"svg",142),g(54,"path",109),i(),S(),t(55,"span"),o(56,"Imprimir Acta"),i()(),t(57,"button",143),f("click",function(){p(e);let a=d();return u(a.showDetails=!1)}),o(58,"Cerrar"),i()()()()()}if(s&2){let e=d();l(8),b("ID Movimiento: #",e.selectedReasignacion==null?null:e.selectedReasignacion.id),l(11),x(e.selectedReasignacion==null?null:e.selectedReasignacion.nombre_activo),l(2),b("",e.selectedReasignacion==null?null:e.selectedReasignacion.codigo_inventario," "),l(6),b("",(e.selectedReasignacion==null?null:e.selectedReasignacion.personal_anterior)||"N/A"," "),l(5),x(e.selectedReasignacion==null?null:e.selectedReasignacion.personal_nuevo),l(5),x(e.selectedReasignacion==null?null:e.selectedReasignacion.motivo),l(5),M("",O(43,10,e.selectedReasignacion==null?null:e.selectedReasignacion.fecha_asignacion,"fullDate")," ",O(44,13,e.selectedReasignacion==null?null:e.selectedReasignacion.fecha_asignacion,"shortTime")),l(7),m("ngIf",e.selectedReasignacion==null?null:e.selectedReasignacion.foto_reasignacion),l(),m("ngIf",!(e.selectedReasignacion!=null&&e.selectedReasignacion.foto_reasignacion))}}var $e=class s{constructor(n,e,r,a,c){this.reasignacionService=n;this.personalService=e;this.assetService=r;this.ubicacionService=a;this.cdr=c}reasignaciones=[];personal=[];assets=[];clasificaciones=[];areas=[];loading=!0;showForm=!1;showDetails=!1;selectedReasignacion=null;storageUrl=U.apiUrl.replace("/api","")+"/storage/";filterSearch="";filterAreaId=null;filterPersonalId=null;selectedFile=null;fotoPreview=null;currentPage=1;lastPage=1;pageSize=10;totalReasignaciones=0;form={activo_id:null,personal_nuevo_id:null,area_nueva_id:null,motivo:""};ngOnInit(){this.loadData()}loadData(){this.loading=!0,this.reasignacionService.getReasignaciones(this.currentPage).subscribe({next:n=>{this.reasignaciones=n.data,this.currentPage=n.current_page,this.lastPage=n.last_page,this.totalReasignaciones=n.total,this.pageSize=n.per_page,this.loading=!1,this.cdr.detectChanges()},error:()=>{this.loading=!1,this.cdr.detectChanges()}}),this.personalService.getAllPersonal().subscribe(n=>{this.personal=n.map(e=>Ce(Y({},e),{id:Number(e.id)})),this.cdr.detectChanges()}),this.ubicacionService.getAllAreas().subscribe(n=>{this.areas=n.map(e=>Ce(Y({},e),{id:Number(e.id)})),this.cdr.detectChanges()}),this.assetService.getAssets(1,"","",2e3).subscribe(n=>{this.assets=n.data.map(e=>Ce(Y({},e),{id:Number(e.id),area_id:e.area_id?Number(e.area_id):null,personal_id:e.personal_id?Number(e.personal_id):null})),this.cdr.detectChanges()}),this.assetService.getClasificaciones().subscribe(n=>{this.clasificaciones=n,this.cdr.detectChanges()})}get filteredAssets(){return!this.filterSearch&&!this.filterAreaId&&!this.filterPersonalId?[]:this.assets.filter(n=>{let e=this.filterSearch.toLowerCase(),r=!this.filterSearch||n.nombre_activo.toLowerCase().includes(e)||n.codigo_inventario.toLowerCase().includes(e),a=!this.filterAreaId||n.area_id==this.filterAreaId,c=!this.filterPersonalId||n.personal_id==this.filterPersonalId;return r&&a&&c})}get filteredCurrentPersonal(){return this.filterAreaId?this.personal.filter(n=>Number(n.area_id)===Number(this.filterAreaId)):this.personal}get filteredNewPersonal(){return this.form.area_nueva_id?this.personal.filter(n=>Number(n.area_id)===Number(this.form.area_nueva_id)):this.personal}onFilterChange(){let n=this.filterSearch.toLowerCase().trim();if(!n)return;let e=this.assets.find(r=>r.codigo_inventario.toLowerCase()===n||r.nombre_activo.toLowerCase()===n);if(e)this.filterAreaId=e.area_id?Number(e.area_id):null,this.filterPersonalId=e.personal_id?Number(e.personal_id):null,this.form.activo_id=Number(e.id),this.form.area_nueva_id=e.area_id?Number(e.area_id):null;else{let r=this.filteredAssets;if(n.length>5&&r.length===1){let a=r[0];this.filterAreaId=a.area_id?Number(a.area_id):null,this.filterPersonalId=a.personal_id?Number(a.personal_id):null,this.form.activo_id=Number(a.id),this.form.area_nueva_id=a.area_id?Number(a.area_id):null}}this.cdr.detectChanges()}onAssetSelect(){if(this.form.activo_id){let n=this.assets.find(e=>e.id==this.form.activo_id);n&&(this.filterAreaId=n.area_id?Number(n.area_id):null,this.filterPersonalId=n.personal_id?Number(n.personal_id):null,this.form.area_nueva_id=n.area_id?Number(n.area_id):null)}this.cdr.detectChanges()}onAreaNuevaChange(){this.form.personal_nuevo_id=null,this.cdr.detectChanges()}onFileSelected(n){let e=n.target.files[0];if(e){this.selectedFile=e;let r=new FileReader;r.onload=()=>{this.fotoPreview=r.result,this.cdr.detectChanges()},r.readAsDataURL(e)}}removeFoto(){this.selectedFile=null,this.fotoPreview=null}changePage(n){n>=1&&n<=this.lastPage&&(this.currentPage=n,this.loadData())}submitForm(){if(!this.form.activo_id||!this.form.personal_nuevo_id||!this.form.area_nueva_id||!this.form.motivo){Ve.default.fire("Atenci\xF3n","Todos los campos son obligatorios","warning");return}let n=new FormData;n.append("activo_id",this.form.activo_id.toString()),n.append("personal_nuevo_id",this.form.personal_nuevo_id.toString()),n.append("area_nueva_id",this.form.area_nueva_id.toString()),n.append("motivo",this.form.motivo),this.selectedFile&&n.append("foto",this.selectedFile),this.reasignacionService.createReasignacion(n).subscribe({next:()=>{Ve.default.fire("\xC9xito","Reasignaci\xF3n completada exitosamente","success"),this.showForm=!1,this.form={activo_id:null,personal_nuevo_id:null,area_nueva_id:null,motivo:""},this.filterSearch="",this.filterAreaId=null,this.filterPersonalId=null,this.removeFoto(),this.loadData(),this.cdr.detectChanges()},error:e=>{let r="No se pudo procesar la reasignaci\xF3n";if(e.status===422&&e.error&&e.error.errors){let a=e.error.errors;r=Object.values(a).flat().join(`
`)}Ve.default.fire("Error",r,"error")}})}imprimirActa(n){this.reasignacionService.downloadActa(n).subscribe({next:e=>{let r=window.URL.createObjectURL(e);window.open(r,"_blank"),setTimeout(()=>window.URL.revokeObjectURL(r),1e3)},error:e=>{console.error("Error al descargar el acta",e),Ve.default.fire("Error","No se pudo descargar el acta","error")}})}verDetalles(n){this.selectedReasignacion=n,this.showDetails=!0,this.cdr.detectChanges()}getFotoUrl(n){return n?n.startsWith("http")?n:`../storage/${n.replace("public/","")}`:""}getAssetBadge(n){return n?"badge-blue":"badge-gray"}formatDate(n){return new Date(n).toLocaleString("es-NI",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(",","")}static \u0275fac=function(e){return new(e||s)(E(Ge),E(Oe),E(Te),E(Me),E(W))};static \u0275cmp=I({type:s,selectors:[["app-reasignaciones"]],decls:49,vars:9,consts:[["fileInput",""],[1,"p-6","lg:p-8"],[1,"flex","flex-col","md:flex-row","md:items-center","justify-between","gap-4","mb-8"],[1,"text-3xl","font-black","text-primary","tracking-tight"],[1,"text-secondary","mt-1","tracking-tight"],[1,"flex","items-center","gap-3"],[1,"btn-primary","h-12","px-6","shadow-lg","shadow-blue-500/20","hover:shadow-blue-500/30","active:scale-95","transition-all",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"],["class","mb-10 animate-fade-in",4,"ngIf"],[1,"card","overflow-hidden"],[1,"overflow-x-auto"],[1,"w-full","text-left"],[1,"bg-gray-500/5","text-muted","text-[10px]","font-black","uppercase","tracking-widest","border-b","border-white/5"],[1,"px-6","py-5","w-12"],[1,"px-6","py-5","w-32","whitespace-nowrap"],[1,"px-6","py-5"],[1,"px-6","py-5","text-center"],[1,"divide-y","divide-white/5","font-medium"],["class","animate-pulse",4,"ngIf"],[4,"ngIf"],["class","hover:bg-gray-500/5 transition-colors group",4,"ngFor","ngForOf"],[1,"pagination-container"],[1,"pagination-info"],[1,"pagination-label"],[1,"pagination-value"],["class","pagination-nav",4,"ngIf"],["class","fixed inset-0 z-[100] flex items-center justify-center p-4",4,"ngIf"],[1,"mb-10","animate-fade-in"],[1,"card","p-0","overflow-hidden","border-t-4","border-blue-500","shadow-2xl"],[1,"px-8","py-6","border-b","border-white/5","bg-gray-500/5","flex","items-center","justify-between"],[1,"text-[10px]","font-black","text-blue-500","uppercase","tracking-widest","mb-1"],[1,"text-2xl","font-black","text-primary","tracking-tight"],[1,"text-xs","text-muted","mt-1"],[1,"p-2","text-muted","hover:text-white","bg-white/5","hover:bg-white/10","rounded-full","transition-all",3,"click"],["fill","none","viewBox","0 0 24 24","stroke-width","2.5","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","d","M6 18L18 6M6 6l12 12"],[1,"px-8","py-8"],[1,"space-y-6",3,"submit"],[1,"pb-4","border-b","border-white/5"],[1,"text-[10px]","font-black","text-blue-500","uppercase","tracking-widest","mb-3"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],[1,"space-y-2"],[1,"text-xs","font-bold","text-muted"],[1,"relative"],["type","text","name","filterSearch","placeholder","Buscar activo...",1,"input-field","h-11","text-sm","!bg-white","dark:!bg-white/5","!border-gray-300","dark:!border-white/10","pl-10","!text-gray-900","dark:!text-white",3,"ngModelChange","input","ngModel"],[1,"absolute","left-3","top-1/2","-translate-y-1/2","text-blue-500"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],["name","filterArea",1,"input-field","h-11","text-sm","bg-gray-50/5",3,"ngModelChange","change","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["name","filterPersonal",1,"input-field","h-11","text-sm","bg-gray-50/5",3,"ngModelChange","change","ngModel"],[1,"pt-2"],["class","mb-4 p-3 bg-blue-500/10 border border-blue-500/20 rounded-xl flex items-center gap-3 animate-in fade-in slide-in-from-top-2",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6","mb-6"],[1,"space-y-4"],[1,"text-red-500"],["name","activo_id",1,"input-field","h-11","text-sm","bg-gray-50/5",3,"ngModelChange","change","ngModel"],["disabled","",3,"ngValue"],["class","text-[10px] text-muted italic",4,"ngIf"],["name","area_nueva_id",1,"input-field","h-11","text-sm","bg-gray-50/5",3,"ngModelChange","change","ngModel"],["name","personal_nuevo_id",1,"input-field","h-11","text-sm","bg-gray-50/5",3,"ngModelChange","ngModel","disabled"],["name","motivo","rows","2","placeholder","Ej: Traslado de \xE1rea, nuevo ingreso, etc.",1,"input-field","text-sm","bg-gray-50/5","py-3",3,"ngModelChange","ngModel"],[1,"relative","group"],["class","h-[188px] border-2 border-dashed border-white/10 rounded-2xl flex flex-col items-center justify-center gap-3 bg-gray-50/5 group-hover:bg-gray-50/10 transition-all cursor-pointer overflow-hidden",3,"click",4,"ngIf"],["class","relative animate-in zoom-in-95 h-[188px]",4,"ngIf"],["type","file","accept","image/*",1,"hidden",3,"change"],[1,"flex","items-center","justify-end","gap-3","pt-4","border-t","border-white/5","mt-6"],["type","button",1,"btn-secondary","px-6","h-11",3,"click"],["type","submit",1,"btn-primary","px-8","h-11","shadow-xl","shadow-blue-500/20","hover:scale-[1.02]","active:scale-95","transition-all","font-bold","tracking-wide"],[1,"mb-4","p-3","bg-blue-500/10","border","border-blue-500/20","rounded-xl","flex","items-center","gap-3","animate-in","fade-in","slide-in-from-top-2"],[1,"fas","fa-info-circle","text-blue-500"],[1,"text-xs","text-blue-200"],[1,"text-[10px]","text-muted","italic"],[1,"h-[188px]","border-2","border-dashed","border-white/10","rounded-2xl","flex","flex-col","items-center","justify-center","gap-3","bg-gray-50/5","group-hover:bg-gray-50/10","transition-all","cursor-pointer","overflow-hidden",3,"click"],[1,"w-12","h-12","rounded-full","bg-blue-500/10","flex","items-center","justify-center","text-blue-500"],[1,"fas","fa-camera","text-xl"],[1,"text-center"],[1,"text-[11px]","font-bold","text-primary"],[1,"text-[10px]","text-muted"],[1,"relative","animate-in","zoom-in-95","h-[188px]"],[1,"w-full","h-full","object-cover","rounded-2xl","border","border-white/10","shadow-2xl",3,"src"],[1,"absolute","inset-0","bg-black/40","opacity-0","group-hover:opacity-100","transition-opacity","rounded-2xl","flex","items-center","justify-center","gap-2"],["type","button",1,"w-10","h-10","rounded-full","bg-white","text-gray-900","flex","items-center","justify-center","hover:scale-110","transition-transform",3,"click"],[1,"fas","fa-edit"],["type","button",1,"w-10","h-10","rounded-full","bg-red-500","text-white","flex","items-center","justify-center","hover:scale-110","transition-transform",3,"click"],[1,"fas","fa-trash"],[1,"animate-pulse"],["colspan","7",1,"px-6","py-20","text-center","text-muted"],[1,"hover:bg-gray-500/5","transition-colors","group"],[1,"px-6","py-5","text-xs","font-black","text-muted"],[1,"px-6","py-5","whitespace-nowrap"],[1,"flex","flex-col"],[1,"flex","flex-col","min-w-[150px]"],[1,"text-sm","font-bold","text-primary"],[1,"text-[10px]","text-blue-500","font-mono","tracking-wider"],[1,"flex","items-center","gap-2"],[1,"w-6","h-6","rounded-full","bg-red-500/10","flex","items-center","justify-center","text-red-500","text-[10px]","font-bold","border","border-red-500/20"],[1,"text-xs","text-muted"],[1,"w-6","h-6","rounded-full","bg-emerald-500/10","flex","items-center","justify-center","text-emerald-500","text-[10px]","font-bold","border","border-emerald-500/20"],[1,"text-xs","font-bold","text-primary"],[1,"text-xs","text-muted","leading-relaxed","line-clamp-2","max-w-[200px]",3,"title"],[1,"flex","items-center","justify-center","gap-2"],["title","Ver Detalles",1,"w-9","h-9","flex","items-center","justify-center","rounded-lg","bg-white/5","text-slate-400","hover:bg-blue-500/10","hover:text-blue-400","transition-all","shadow-sm","border","border-white/10","group/btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4","group-hover/btn:scale-110","transition-transform"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],["title","Imprimir Acta",1,"w-9","h-9","flex","items-center","justify-center","rounded-lg","bg-blue-600/20","text-blue-400","hover:bg-blue-600","hover:text-white","transition-all","shadow-md","shadow-blue-500/10","border","border-blue-500/30","group/btn",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"],[1,"pagination-nav"],[1,"pagination-btn",3,"click","disabled"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2.5","d","M15 19l-7-7 7-7"],[1,"pagination-page"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2.5","d","M9 5l7 7-7 7"],[1,"fixed","inset-0","z-[100]","flex","items-center","justify-center","p-4"],[1,"absolute","inset-0","bg-black/80","backdrop-blur-sm","animate-fade-in",3,"click"],[1,"card","w-full","max-w-2xl","relative","z-10","animate-in","zoom-in-95","duration-200","overflow-hidden","border","border-white/10"],[1,"px-6","py-4","border-b","border-white/5","flex","items-center","justify-between","bg-gray-500/5"],[1,"text-lg","font-black","text-primary"],[1,"p-2","hover:bg-white/5","rounded-full","transition-all",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"p-6"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-8"],[1,"space-y-6"],[1,"space-y-1"],[1,"text-[10px]","font-black","text-blue-500","uppercase","tracking-widest"],[1,"text-xs","text-blue-500","font-mono"],[1,"grid","grid-cols-2","gap-4"],[1,"text-[10px]","font-black","text-muted","uppercase","tracking-widest"],[1,"text-[10px]","font-black","text-emerald-500","uppercase","tracking-widest"],[1,"text-xs","font-bold","text-emerald-500"],[1,"text-xs","text-muted","bg-white/5","p-3","rounded-xl","border","border-white/5"],[1,"space-y-3"],[1,"text-[10px]","font-black","text-muted","uppercase","tracking-widest","block"],[1,"aspect-square","rounded-2xl","overflow-hidden","border","border-white/10","bg-gray-500/5","relative","group"],["class","w-full h-full object-cover",3,"src",4,"ngIf"],["class","w-full h-full flex flex-col items-center justify-center gap-2 text-muted/30",4,"ngIf"],[1,"mt-8","pt-6","border-t","border-white/5","flex","justify-end","gap-3"],[1,"btn-primary","h-11","px-6","shadow-lg","shadow-blue-500/20","active:scale-95","transition-all",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","mr-2"],[1,"btn-secondary","h-11","px-6",3,"click"],[1,"w-full","h-full","object-cover",3,"src"],[1,"w-full","h-full","flex","flex-col","items-center","justify-center","gap-2","text-muted/30"],[1,"fas","fa-camera","text-4xl"],[1,"text-[10px]","font-bold"]],template:function(e,r){e&1&&(t(0,"div",1)(1,"div",2)(2,"div")(3,"h1",3),o(4,"Reasignaciones"),i(),t(5,"p",4),o(6,"Gesti\xF3n y control de cambios de custodia de activos."),i()(),t(7,"div",5)(8,"button",6),f("click",function(){return r.showForm=!r.showForm}),v(),t(9,"svg",7),g(10,"path",8),i(),S(),t(11,"span"),o(12),i()()()(),h(13,Wi,94,25,"div",9),t(14,"div",10)(15,"div",11)(16,"table",12)(17,"thead",13)(18,"tr")(19,"th",14),o(20,"#"),i(),t(21,"th",15),o(22,"Fecha"),i(),t(23,"th",16),o(24,"Activo"),i(),t(25,"th",16),o(26,"Custodio Anterior"),i(),t(27,"th",16),o(28,"Nuevo Custodio"),i(),t(29,"th",16),o(30,"Motivo"),i(),t(31,"th",17),o(32,"Acciones"),i()()(),t(33,"tbody",18),h(34,qi,3,0,"tr",19)(35,Hi,3,0,"tr",20)(36,zi,41,17,"tr",21),i()()(),t(37,"div",22)(38,"div",23)(39,"span",24),o(40," Mostrando "),t(41,"span",25),o(42),i(),o(43," de "),t(44,"span",25),o(45),i(),o(46," registros "),i()(),h(47,Gi,9,4,"div",26),i()()(),h(48,Ki,59,16,"div",27)),e&2&&(l(12),x(r.showForm?"Cerrar Formulario":"Nueva Reasignaci\xF3n"),l(),m("ngIf",r.showForm),l(21),m("ngIf",r.loading),l(),m("ngIf",!r.loading&&r.reasignaciones.length===0),l(),m("ngForOf",r.reasignaciones),l(6),x(r.reasignaciones.length),l(3),x(r.totalReasignaciones),l(2),m("ngIf",r.lastPage>1),l(),m("ngIf",r.showDetails))},dependencies:[T,V,A,L,ie,re,oe,N,ne,D,ee,R,te,X],encapsulation:2})};var _e=de(me());var Qe=class s{constructor(n){this.http=n}apiUrl=U.apiUrl;descargarReporte(n,e){let r=`${this.apiUrl}/reportes/${n}/download`;if(e){let a=new URLSearchParams;e.area_id&&a.append("area_id",e.area_id.toString()),e.clasificacion_id&&a.append("clasificacion_id",e.clasificacion_id.toString()),e.ubicacion_id&&a.append("ubicacion_id",e.ubicacion_id.toString()),e.personal_id&&a.append("personal_id",e.personal_id.toString()),e.estado&&a.append("estado",e.estado);let c=a.toString();c&&(r+="?"+c)}return this.http.get(r,{responseType:"blob"})}getResumen(){return this.http.get(`${this.apiUrl}/reportes/resumen`)}static \u0275fac=function(e){return new(e||s)($(q))};static \u0275prov=H({token:s,factory:s.\u0275fac,providedIn:"root"})};function Yi(s,n){if(s&1){let e=y();t(0,"button",40),f("click",function(){p(e);let a=d();return u(a.clearFilters())}),v(),t(1,"svg",41),g(2,"path",42),i(),o(3," Limpiar filtros "),i()}}function Xi(s,n){if(s&1&&(t(0,"option",14),o(1),i()),s&2){let e=n.$implicit,r=n.index;m("ngValue",e.id),l(),M("",(r+1).toString().padStart(2,"0")," ",e.nombre)}}function Zi(s,n){if(s&1&&(t(0,"option",14),o(1),i()),s&2){let e=n.$implicit,r=n.index;m("ngValue",e.id),l(),M("",(r+1).toString().padStart(2,"0")," ",e.nombre)}}function en(s,n){if(s&1&&(t(0,"option",14),o(1),i()),s&2){let e=n.$implicit,r=n.index;m("ngValue",e.id),l(),Mt("",(r+1).toString().padStart(2,"0")," ",e.nombre," ",e.apellido)}}function tn(s,n){if(s&1&&(t(0,"option",14),o(1),i()),s&2){let e=n.$implicit;m("ngValue",e.id),l(),M("",e.prefijo," ",e.nombre," ")}}function nn(s,n){if(s&1&&(t(0,"option",14),o(1),i()),s&2){let e=n.$implicit;m("ngValue",e),l(),x(e)}}function rn(s,n){s&1&&(t(0,"div",43)(1,"p",44),v(),t(2,"svg",45),g(3,"path",46),i(),o(4," Los reportes se generar\xE1n con los filtros seleccionados aplicados. "),i()())}function on(s,n){if(s&1&&(t(0,"div",47)(1,"div",48),o(2),i(),t(3,"div",49)(4,"div",50)(5,"span",51),o(6),i()()()()),s&2){let e=n.$implicit,r=d();l(),m("title",e.clasificacion),l(),x(e.clasificacion||"Sin clasificar"),l(2),ke("width",e.cantidad/r.maxClasificacion*100,"%"),l(2),x(e.cantidad)}}function an(s,n){s&1&&(t(0,"div",52),o(1," No hay datos de clasificaci\xF3n disponibles "),i())}var Ke=class s{constructor(n,e,r){this.reporteService=n;this.http=e;this.cdr=r}loading=!1;areas=[];clasificaciones=[];ubicaciones=[];personal=[];allPersonal=[];resumen={total_activos:0,valor_total:0};activosPorClasificacion=[];maxClasificacion=0;selectedAreaId=null;selectedClasificacionId=null;selectedUbicacionId=null;selectedPersonalId=null;selectedEstado=null;estados=["BUENO","REGULAR","MALO"];ngOnInit(){this.loadFilterData()}loadFilterData(){let n=U.apiUrl;this.http.get(`${n}/areas/all`).subscribe({next:e=>this.areas=e,error:e=>console.error("Error loading areas:",e)}),this.loadStats(),this.http.get(`${n}/clasificaciones`).subscribe({next:e=>this.clasificaciones=e,error:e=>console.error("Error loading clasificaciones:",e)}),this.http.get(`${n}/ubicaciones/all`).subscribe({next:e=>this.ubicaciones=e,error:e=>console.error("Error loading ubicaciones:",e)}),this.http.get(`${n}/personal/all`).subscribe({next:e=>{this.allPersonal=e,this.filterPersonalByArea()},error:e=>console.error("Error loading personal:",e)})}loadStats(){let n=U.apiUrl,e=new URLSearchParams;this.selectedAreaId&&e.append("area_id",this.selectedAreaId.toString()),this.selectedUbicacionId&&e.append("ubicacion_id",this.selectedUbicacionId.toString()),this.selectedPersonalId&&e.append("personal_id",this.selectedPersonalId.toString()),this.selectedClasificacionId&&e.append("clasificacion_id",this.selectedClasificacionId.toString()),this.selectedEstado&&e.append("estado",this.selectedEstado);let r=e.toString(),a=r?"?"+r:"";this.http.get(`${n}/reportes/resumen${a}`).subscribe({next:c=>{console.log("ReportesComponent: Resumen received:",c),this.resumen=c,this.cdr.detectChanges()},error:c=>console.error("Error loading resumen:",c)}),this.http.get(`${n}/reportes/activos-por-clasificacion${a}`).subscribe({next:c=>{console.log("ReportesComponent: Clasificacion data received:",c),this.activosPorClasificacion=c,this.maxClasificacion=Math.max(...c.map(Q=>Q.cantidad),1),this.cdr.detectChanges()},error:c=>console.error("Error loading stats:",c)})}onAreaChange(){this.selectedPersonalId=null,this.filterPersonalByArea(),this.loadStats()}onFilterChange(){this.loadStats()}filterPersonalByArea(){this.selectedAreaId?this.personal=this.allPersonal.filter(n=>n.area_id===this.selectedAreaId):this.personal=[...this.allPersonal]}clearFilters(){this.selectedAreaId=null,this.selectedClasificacionId=null,this.selectedUbicacionId=null,this.selectedPersonalId=null,this.selectedEstado=null,this.filterPersonalByArea(),this.loadStats()}hasActiveFilters(){return!!(this.selectedAreaId||this.selectedClasificacionId||this.selectedUbicacionId||this.selectedPersonalId||this.selectedEstado)}downloadReport(n){this.loading=!0,_e.default.fire({title:"Generando Reporte",text:"Por favor espere mientras procesamos el documento...",allowOutsideClick:!1,didOpen:()=>{_e.default.showLoading()}});let e={};this.selectedAreaId&&(e.area_id=this.selectedAreaId),this.selectedEstado&&(e.estado=this.selectedEstado),this.selectedClasificacionId&&(e.clasificacion_id=this.selectedClasificacionId),this.selectedUbicacionId&&(e.ubicacion_id=this.selectedUbicacionId),this.selectedPersonalId&&(e.personal_id=this.selectedPersonalId),this.reporteService.descargarReporte(n,Object.keys(e).length>0?e:void 0).subscribe({next:r=>{let a=window.URL.createObjectURL(r),c=document.createElement("a");c.href=a,c.download=`${n}_${new Date().toISOString().slice(0,10)}.pdf`,document.body.appendChild(c),c.click(),window.URL.revokeObjectURL(a),this.loading=!1,_e.default.close(),_e.default.fire("\xC9xito","Reporte descargado correctamente","success"),this.cdr.detectChanges()},error:()=>{this.loading=!1,_e.default.close(),_e.default.fire("Error","No se pudo generar el reporte en este momento","error"),this.cdr.detectChanges()}})}static \u0275fac=function(e){return new(e||s)(E(Qe),E(q),E(W))};static \u0275cmp=I({type:s,selectors:[["app-reportes"]],decls:92,vars:32,consts:[[1,"p-6","lg:p-8"],[1,"mb-8","text-center","lg:text-left"],[1,"text-4xl","font-black","text-gray-900","dark:text-white","tracking-tight"],[1,"text-lg","text-gray-600","dark:text-gray-400","mt-2","max-w-2xl"],[1,"card","mb-8","p-6"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-bold","text-gray-900","dark:text-white","flex","items-center","gap-2"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","text-blue-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"],["class","text-xs text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white flex items-center gap-1 transition-colors",3,"click",4,"ngIf"],[1,"text-sm","text-gray-500","dark:text-gray-400","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-5","gap-4"],[1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],[1,"input-field","w-full",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["class","mt-4 p-3 bg-blue-500/10 border border-blue-500/30 rounded-lg",4,"ngIf"],[1,"flex","flex-col","md:flex-row","items-center","justify-between","gap-4","mb-6"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","text-green-600","dark:text-green-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"],[1,"btn-primary","flex","items-center","gap-2","px-6","py-2",3,"click","disabled"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-4","mb-8"],[1,"bg-blue-50","dark:bg-gradient-to-br","dark:from-blue-600/20","dark:to-blue-800/10","border","border-blue-200","dark:border-blue-500/20","rounded-xl","p-4","text-center"],[1,"text-3xl","font-black","text-blue-600","dark:text-blue-400"],[1,"text-xs","text-blue-800/60","dark:text-gray-400","mt-1"],[1,"bg-green-50","dark:bg-gradient-to-br","dark:from-green-600/20","dark:to-green-800/10","border","border-green-200","dark:border-green-500/20","rounded-xl","p-4","text-center"],[1,"text-3xl","font-black","text-green-600","dark:text-green-400"],[1,"text-xs","text-green-800/60","dark:text-gray-400","mt-1"],[1,"bg-yellow-50","dark:bg-gradient-to-br","dark:from-yellow-600/20","dark:to-yellow-800/10","border","border-yellow-200","dark:border-yellow-500/20","rounded-xl","p-4","text-center"],[1,"text-3xl","font-black","text-yellow-600","dark:text-yellow-400"],[1,"text-xs","text-yellow-800/60","dark:text-gray-400","mt-1"],[1,"bg-red-50","dark:bg-gradient-to-br","dark:from-red-600/20","dark:to-red-800/10","border","border-red-200","dark:border-red-500/20","rounded-xl","p-4","text-center"],[1,"text-3xl","font-black","text-red-600","dark:text-red-400"],[1,"text-xs","text-red-800/60","dark:text-gray-400","mt-1"],[1,"text-sm","font-semibold","text-gray-800","dark:text-gray-300","mb-3"],[1,"space-y-2","max-h-64","overflow-y-auto","pr-2"],["class","flex items-center gap-3",4,"ngFor","ngForOf"],["class","text-center text-gray-500 py-4",4,"ngIf"],[1,"text-xs","text-gray-500","dark:text-gray-400","hover:text-gray-900","dark:hover:text-white","flex","items-center","gap-1","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-3","w-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"mt-4","p-3","bg-blue-500/10","border","border-blue-500/30","rounded-lg"],[1,"text-sm","text-blue-600","dark:text-blue-300"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4","inline","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"flex","items-center","gap-3"],[1,"w-32","text-xs","text-gray-600","dark:text-gray-400","truncate",3,"title"],[1,"flex-1","bg-gray-200","dark:bg-gray-700/50","rounded-full","h-5","overflow-hidden"],[1,"h-full","bg-gradient-to-r","from-blue-600","to-blue-500","dark:from-blue-500","dark:to-blue-400","rounded-full","flex","items-center","justify-end","pr-2","transition-all","duration-500"],[1,"text-[10px]","font-bold","text-white"],[1,"text-center","text-gray-500","py-4"]],template:function(e,r){e&1&&(t(0,"div",0)(1,"div",1)(2,"h1",2),o(3,"Centro de Reportes"),i(),t(4,"p",3),o(5,"Gestione la informaci\xF3n estrat\xE9gica de activos fijos. Exportaci\xF3n directa en formato PDF listo para impresi\xF3n y auditor\xEDa."),i()(),t(6,"div",4)(7,"div",5)(8,"h3",6),v(),t(9,"svg",7),g(10,"path",8),i(),o(11," Filtros de Reporte "),i(),h(12,Yi,4,0,"button",9),i(),S(),t(13,"p",10),o(14,"Seleccione los filtros deseados antes de descargar un reporte. Los filtros se aplicar\xE1n a todos los reportes."),i(),t(15,"div",11)(16,"div")(17,"label",12),o(18,"\xC1rea"),i(),t(19,"select",13),C("ngModelChange",function(c){return w(r.selectedAreaId,c)||(r.selectedAreaId=c),c}),f("ngModelChange",function(){return r.onAreaChange()}),t(20,"option",14),o(21,"Todas las \xE1reas"),i(),h(22,Xi,2,3,"option",15),i()(),t(23,"div")(24,"label",12),o(25,"Ubicaci\xF3n"),i(),t(26,"select",13),C("ngModelChange",function(c){return w(r.selectedUbicacionId,c)||(r.selectedUbicacionId=c),c}),f("ngModelChange",function(){return r.onFilterChange()}),t(27,"option",14),o(28,"Todas las ubicaciones"),i(),h(29,Zi,2,3,"option",15),i()(),t(30,"div")(31,"label",12),o(32,"Responsable"),i(),t(33,"select",13),C("ngModelChange",function(c){return w(r.selectedPersonalId,c)||(r.selectedPersonalId=c),c}),f("ngModelChange",function(){return r.onFilterChange()}),t(34,"option",14),o(35,"Todos los responsables"),i(),h(36,en,2,4,"option",15),i()(),t(37,"div")(38,"label",12),o(39,"Clasificaci\xF3n"),i(),t(40,"select",13),C("ngModelChange",function(c){return w(r.selectedClasificacionId,c)||(r.selectedClasificacionId=c),c}),f("ngModelChange",function(){return r.onFilterChange()}),t(41,"option",14),o(42,"Todas las clasificaciones"),i(),h(43,tn,2,3,"option",15),i()(),t(44,"div")(45,"label",12),o(46,"Estado"),i(),t(47,"select",13),C("ngModelChange",function(c){return w(r.selectedEstado,c)||(r.selectedEstado=c),c}),f("ngModelChange",function(){return r.onFilterChange()}),t(48,"option",14),o(49,"Todos los estados"),i(),h(50,nn,2,2,"option",15),i()()(),h(51,rn,5,0,"div",16),i(),t(52,"div",4)(53,"div",17)(54,"h3",6),v(),t(55,"svg",18),g(56,"path",19),i(),o(57," Estad\xEDsticas de Activos Fijos "),i(),S(),t(58,"button",20),f("click",function(){return r.downloadReport("inventario-general")}),v(),t(59,"svg",21),g(60,"path",22),i(),o(61," Generar Reporte General "),i()(),S(),t(62,"div",23)(63,"div",24)(64,"p",25),o(65),P(66,"number"),i(),t(67,"p",26),o(68,"Total Activos"),i()(),t(69,"div",27)(70,"p",28),o(71),P(72,"number"),i(),t(73,"p",29),o(74,"Estado Bueno"),i()(),t(75,"div",30)(76,"p",31),o(77),P(78,"number"),i(),t(79,"p",32),o(80,"Estado Regular"),i()(),t(81,"div",33)(82,"p",34),o(83),P(84,"number"),i(),t(85,"p",35),o(86,"Estado Malo"),i()()(),t(87,"h4",36),o(88,"Activos por Clasificaci\xF3n"),i(),t(89,"div",37),h(90,on,7,5,"div",38)(91,an,2,0,"div",39),i()()()),e&2&&(l(12),m("ngIf",r.hasActiveFilters()),l(7),_("ngModel",r.selectedAreaId),l(),m("ngValue",null),l(2),m("ngForOf",r.areas),l(4),_("ngModel",r.selectedUbicacionId),l(),m("ngValue",null),l(2),m("ngForOf",r.ubicaciones),l(4),_("ngModel",r.selectedPersonalId),l(),m("ngValue",null),l(2),m("ngForOf",r.personal),l(4),_("ngModel",r.selectedClasificacionId),l(),m("ngValue",null),l(2),m("ngForOf",r.clasificaciones),l(4),_("ngModel",r.selectedEstado),l(),m("ngValue",null),l(2),m("ngForOf",r.estados),l(),m("ngIf",r.hasActiveFilters()),l(7),m("disabled",r.loading),l(7),b("",Ae(66,24,r.resumen.total_activos)," "),l(6),x(Ae(72,26,r.resumen.activos_buenos)),l(6),x(Ae(78,28,r.resumen.activos_regulares)),l(6),b("",Ae(84,30,r.resumen.activos_malos)," "),l(7),m("ngForOf",r.activosPorClasificacion),l(),m("ngIf",r.activosPorClasificacion.length===0))},dependencies:[T,V,A,L,re,oe,ne,D,R,ce],encapsulation:2})};var se=de(me());function ln(s,n){s&1&&g(0,"span",65)}function sn(s,n){s&1&&(t(0,"th",45),o(1,"Ciclo de Vida"),i())}function cn(s,n){s&1&&(t(0,"th",45),o(1,"Estado de Vida \xDAtil"),i())}function dn(s,n){s&1&&(t(0,"th",66),o(1," Valor en Libros"),i())}function mn(s,n){s&1&&(t(0,"th",66),o(1," Acciones"),i())}function pn(s,n){s&1&&(t(0,"tr",67)(1,"td",68)(2,"div",69),g(3,"div",70),t(4,"p",71),o(5,"Calculando balances contables..."),i()()()())}function un(s,n){s&1&&(t(0,"tr")(1,"td",68),g(2,"i",72),t(3,"p",71),o(4,"No se encontraron activos para esta categor\xEDa."),i()()())}function gn(s,n){if(s&1&&(be(0),t(1,"td",74)(2,"div",56),g(3,"div",82),t(4,"span",83),o(5),i()()(),t(6,"td",84)(7,"div",85)(8,"div",86)(9,"span",87),o(10,"Depreciado"),i(),t(11,"span",88),o(12),i()(),t(13,"div",89),g(14,"div",90),i()()(),t(15,"td",91)(16,"div",92)(17,"span",93),o(18),i(),g(19,"div",94),i()(),ve()),s&2){let e=d().$implicit,r=d();l(5),b("",e.vida_util_anos," a\xF1os totales"),l(7),x(r.getDepreciationWidth(e)),l(2),B(r.getProgressColor(e)),ke("width",r.getDepreciationWidth(e)),l(4),b(" ",r.formatCurrency(e.valor_libros)," ")}}function fn(s,n){if(s&1){let e=y();t(0,"td",91)(1,"button",95),f("click",function(){p(e);let a=d().$implicit,c=d();return u(c.openConfigModal(a))}),o(2," Configurar "),i()()}}function xn(s,n){if(s&1&&(t(0,"tr",73)(1,"td",74)(2,"div",75)(3,"span",76),o(4),i(),t(5,"span",77),o(6),i()()(),t(7,"td",74)(8,"div",78)(9,"span",79),o(10),i(),t(11,"span",80),o(12),P(13,"date"),i()()(),h(14,gn,20,7,"ng-container",50)(15,fn,3,0,"td",81),i()),s&2){let e=n.$implicit,r=d();l(4),x(e.nombre_activo),l(2),x(e.codigo_inventario),l(4),x(r.formatCurrency(e.precio_adquisicion)),l(2),b("Adquirido el ",O(13,6,e.fecha_adquisicion,"dd/MM/yyyy")),l(2),m("ngIf",r.activeTab==="configurados"),l(),m("ngIf",r.activeTab==="sin-configurar")}}function hn(s,n){if(s&1&&(t(0,"span",128),o(1),i()),s&2){let e=d().$implicit;l(),x(e.mas_especifica)}}function bn(s,n){s&1&&g(0,"i",129)}function vn(s,n){if(s&1){let e=y();t(0,"tr",119),f("click",function(){let a=p(e).$implicit,c=d(2);return u(c.selectCategory(a))}),t(1,"td",120)(2,"span",121),o(3),i()(),t(4,"td",120)(5,"div",78)(6,"span",122),o(7),i(),h(8,hn,2,1,"span",123),i()(),t(9,"td",124)(10,"span",125),o(11),i()(),t(12,"td",124)(13,"div",126),h(14,bn,1,0,"i",127),i()()()}if(s&2){let e=n.$implicit,r=d(2);F("bg-blue-600/10",(r.selectedCategory==null?null:r.selectedCategory.id)===e.id),l(3),x(e.categoria_general),l(4),x(e.especifica),l(),m("ngIf",e.mas_especifica),l(3),b(" ",e.vida_util_anos," a\xF1os "),l(2),F("border-blue-500",(r.selectedCategory==null?null:r.selectedCategory.id)===e.id)("bg-blue-500",(r.selectedCategory==null?null:r.selectedCategory.id)===e.id)("border-white/10",(r.selectedCategory==null?null:r.selectedCategory.id)!==e.id),l(),m("ngIf",(r.selectedCategory==null?null:r.selectedCategory.id)===e.id)}}function _n(s,n){if(s&1&&(t(0,"div",78)(1,"p",130),o(2,"Resumen Normativo"),i(),t(3,"p",131),o(4),i()()),s&2){let e=d(2);l(4),M("",e.selectedCategory.vida_util_anos," A\xF1os | ",e.selectedCategory.tasa_anual,"% Anual")}}function wn(s,n){s&1&&g(0,"div",132)}function Cn(s,n){if(s&1){let e=y();t(0,"div",75)(1,"label",133),o(2,"Vida \xDAtil (A\xF1os)"),i(),t(3,"input",134),C("ngModelChange",function(a){p(e);let c=d(2);return w(c.vidaUtilManual,a)||(c.vidaUtilManual=a),u(a)}),i()()}if(s&2){let e=d(2);l(3),_("ngModel",e.vidaUtilManual)}}function yn(s,n){s&1&&g(0,"div",132)}function Sn(s,n){if(s&1){let e=y();t(0,"div",75)(1,"label",135),o(2,"Valor Residual (C$)"),i(),t(3,"input",136),C("ngModelChange",function(a){p(e);let c=d(2);return w(c.selectedAsset.valor_residual_manual,a)||(c.selectedAsset.valor_residual_manual=a),u(a)}),i()()}if(s&2){let e=d(2);l(3),_("ngModel",e.selectedAsset.valor_residual_manual)}}function En(s,n){s&1&&g(0,"div",132)}function kn(s,n){if(s&1){let e=y();t(0,"div",75)(1,"label",137),o(2,"Fecha Adquirido"),i(),t(3,"input",138),C("ngModelChange",function(a){p(e);let c=d(2);return w(c.selectedAsset.fecha_adquisicion,a)||(c.selectedAsset.fecha_adquisicion=a),u(a)}),i()()}if(s&2){let e=d(2);l(3),_("ngModel",e.selectedAsset.fecha_adquisicion)}}function In(s,n){s&1&&g(0,"div",132)}function Mn(s,n){if(s&1){let e=y();t(0,"div",75)(1,"label",139),o(2,"C\xE1lculo al"),i(),t(3,"input",140),C("ngModelChange",function(a){p(e);let c=d(2);return w(c.fechaCorteManual,a)||(c.fechaCorteManual=a),u(a)}),i()()}if(s&2){let e=d(2);l(3),_("ngModel",e.fechaCorteManual)}}function Tn(s,n){s&1&&g(0,"i",141)}function Fn(s,n){if(s&1){let e=y();t(0,"div",96)(1,"div",97),f("click",function(){p(e);let a=d();return u(a.closeModal())}),i(),t(2,"div",98)(3,"div",99)(4,"div")(5,"h2",100),o(6,"Configuraci\xF3n Normativa"),i(),t(7,"p",101),o(8,"Aplique las directrices seg\xFAn la tabla oficial para "),t(9,"span",102),o(10),i()()(),t(11,"button",103),f("click",function(){p(e);let a=d();return u(a.closeModal())}),g(12,"i",104),i()(),t(13,"div",105)(14,"table",43)(15,"thead",106)(16,"tr")(17,"th",107),o(18,"Categor\xEDa General"),i(),t(19,"th",107),o(20," Especificaci\xF3n"),i(),t(21,"th",108),o(22," Vida \xDAtil"),i(),t(23,"th",108),o(24," Acci\xF3n"),i()()(),t(25,"tbody",48),h(26,vn,15,13,"tr",109),i()()(),t(27,"div",110)(28,"div",111),h(29,_n,5,2,"div",112)(30,wn,1,0,"div",113)(31,Cn,4,1,"div",114)(32,yn,1,0,"div",113)(33,Sn,4,1,"div",114)(34,En,1,0,"div",113)(35,kn,4,1,"div",114)(36,In,1,0,"div",113)(37,Mn,4,1,"div",114),i(),t(38,"div",115)(39,"button",116),f("click",function(){p(e);let a=d();return u(a.closeModal())}),o(40," Cancelar "),i(),t(41,"button",117),f("click",function(){p(e);let a=d();return u(a.saveConfig())}),h(42,Tn,1,0,"i",118),o(43),i()()()()()}if(s&2){let e=d();l(10),x(e.selectedAsset==null?null:e.selectedAsset.nombre_activo),l(16),m("ngForOf",e.catalogo),l(3),m("ngIf",e.selectedCategory),l(),m("ngIf",e.selectedCategory),l(),m("ngIf",e.selectedCategory),l(),m("ngIf",e.selectedCategory),l(),m("ngIf",e.selectedCategory),l(),m("ngIf",e.selectedCategory),l(),m("ngIf",e.selectedCategory),l(),m("ngIf",e.selectedCategory),l(),m("ngIf",e.selectedCategory),l(4),m("disabled",!e.selectedCategory||e.saving),l(),m("ngIf",e.saving),l(),b(" ",e.saving?"Aplicando...":"Confirmar Aplicaci\xF3n"," ")}}var Je=class s{constructor(n,e){this.depreciacionService=n;this.cdr=e}activos=[];loading=!0;totalValorOriginal=0;totalDepreciacion=0;totalValorActual=0;activeTab="configurados";currentPage=1;totalPages=1;totalItems=0;perPage=15;searchTerm="";searchSubject=new he;destroy$=new he;catalogo=[];showModal=!1;selectedAsset=null;selectedCategory=null;saving=!1;fechaCorteManual=new Date().toISOString().split("T")[0];vidaUtilManual=0;ngOnInit(){this.setupSearch(),this.loadData(),this.loadCatalogo()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}setupSearch(){this.searchSubject.pipe(ye(500),Se(),wt(this.destroy$)).subscribe(n=>{this.searchTerm=n,this.currentPage=1,this.loadData()})}onSearchChange(n){this.searchSubject.next(n.target.value)}setTab(n){this.activeTab=n,this.currentPage=1,this.loadData()}loadCatalogo(){this.depreciacionService.getCatalogo().subscribe(n=>this.catalogo=n)}loadData(n=1){this.loading=!0,this.currentPage=n,(this.activeTab==="configurados"?this.depreciacionService.getDepreciacion(n,this.searchTerm):this.depreciacionService.getSinConfigurar(n,this.searchTerm)).subscribe({next:r=>{this.activos=r.data||[],this.totalItems=r.total||0,this.totalPages=r.last_page||1,this.currentPage=r.current_page||1,this.calculateTotals(),this.loading=!1,this.cdr.detectChanges()},error:()=>{this.loading=!1,this.cdr.detectChanges()}})}openConfigModal(n){this.selectedAsset=n,this.selectedAsset.valor_residual_manual=0,this.vidaUtilManual=0,this.fechaCorteManual=new Date().toISOString().split("T")[0],this.selectedCategory=null,this.showModal=!0}selectCategory(n){this.selectedCategory=n,this.vidaUtilManual=n.vida_util_anos}closeModal(){this.showModal=!1,this.selectedAsset=null,this.selectedCategory=null}saveConfig(){if(!this.selectedAsset||!this.selectedCategory)return;this.saving=!0;let n={vida_util_anos:this.vidaUtilManual,valor_residual:this.selectedAsset.valor_residual_manual||0,metodo_depreciacion:"linea_recta",fecha_corte:this.fechaCorteManual,fecha_adquisicion:this.selectedAsset.fecha_adquisicion};this.depreciacionService.configurar(this.selectedAsset.id,n).subscribe({next:e=>{this.saving=!1,this.closeModal(),se.default.fire("Configurado",e.message,"success"),this.loadData()},error:()=>{this.saving=!1}})}resetDepreciacion(){se.default.fire({title:"\xBFReiniciar Depreciaci\xF3n?",text:"Se pondr\xE1n en cero todos los valores de depreciaci\xF3n acumulada y se restaurar\xE1 el valor en libros al precio original. Esta acci\xF3n no se puede deshacer.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#10b981",cancelButtonColor:"#6b7280",confirmButtonText:"S\xED, reiniciar todo",cancelButtonText:"Cancelar"}).then(n=>{n.isConfirmed&&(this.loading=!0,this.depreciacionService.resetear().subscribe({next:e=>{se.default.fire("\xA1Reiniciado!",e.message,"success"),this.loadData()},error:()=>{this.loading=!1,se.default.fire("Error","No se pudo reiniciar la depreciaci\xF3n.","error")}}))})}desconfigurarTodo(){se.default.fire({title:"\xBFDESCONFIGURAR TODO?",text:"Esta acci\xF3n ELIMINAR\xC1 la vida \xFAtil y los par\xE1metros de depreciaci\xF3n de TODOS los activos. Todo el inventario pasar\xE1 a la pesta\xF1a 'Sin Configurar'.",icon:"error",showCancelButton:!0,confirmButtonColor:"#ef4444",cancelButtonColor:"#6b7280",confirmButtonText:"S\xED, borrar configuraciones",cancelButtonText:"Cancelar"}).then(n=>{n.isConfirmed&&(this.loading=!0,this.depreciacionService.limpiarTodo().subscribe({next:e=>{se.default.fire("\xA1Limpieza Completa!",e.message,"success"),this.loadData()},error:()=>{this.loading=!1,se.default.fire("Error","No se pudo realizar la limpieza global.","error")}}))})}procesarDepreciacion(){se.default.fire({title:"Procesar Cierre de Depreciaci\xF3n",html:`
                <div class="text-left space-y-4">
                    <p class="text-sm text-gray-600">Se calcular\xE1 la depreciaci\xF3n acumulada para TODOS los activos configurados.</p>
                    <div class="space-y-1">
                        <label class="text-xs font-bold text-gray-500 uppercase">A\xF1o de Corte / Cierre</label>
                        <input id="fechaCorte" type="date" class="swal2-input !mt-0 !w-full" value="${new Date().toISOString().split("T")[0]}">
                    </div>
                </div>
            `,icon:"info",showCancelButton:!0,confirmButtonColor:"#3b82f6",cancelButtonColor:"#6b7280",confirmButtonText:"Procesar Ahora",cancelButtonText:"Cancelar",preConfirm:()=>document.getElementById("fechaCorte").value}).then(n=>{n.isConfirmed&&(this.loading=!0,this.depreciacionService.procesarMasivo(n.value).subscribe({next:e=>{se.default.fire("\xA1Completado!",e.message,"success"),this.loadData()},error:()=>{this.loading=!1,se.default.fire("Error","Ocurri\xF3 un error durante el proceso masivo.","error")}}))})}calculateTotals(){if(this.activeTab==="sin-configurar"){this.totalValorOriginal=this.activos.reduce((n,e)=>n+(parseFloat(e.precio_adquisicion)||0),0),this.totalDepreciacion=0,this.totalValorActual=this.totalValorOriginal;return}this.totalValorOriginal=this.activos.reduce((n,e)=>n+(parseFloat(e.precio_adquisicion)||0),0),this.totalDepreciacion=this.activos.reduce((n,e)=>n+(parseFloat(e.depreciacion_acumulada)||0),0),this.totalValorActual=this.activos.reduce((n,e)=>n+(parseFloat(e.valor_libros)||0),0)}formatCurrency(n){return new Intl.NumberFormat("es-NI",{style:"currency",currency:"NIO",minimumFractionDigits:2}).format(n)}getDepreciationWidth(n){let e=parseFloat(n.precio_adquisicion)||1,a=(parseFloat(n.depreciacion_acumulada)||0)/e*100;return`${Math.min(a,100)}%`}getProgressColor(n){let e=parseFloat(n.precio_adquisicion)||1,a=(parseFloat(n.depreciacion_acumulada)||0)/e*100;return a>80?"bg-gradient-to-r from-red-500 to-rose-600 shadow-[0_0_10px_rgba(239,68,68,0.5)]":a>50?"bg-gradient-to-r from-orange-400 to-amber-500 shadow-[0_0_10px_rgba(245,158,11,0.5)]":"bg-gradient-to-r from-blue-500 to-indigo-600 shadow-[0_0_10px_rgba(59,130,246,0.5)]"}static \u0275fac=function(e){return new(e||s)(E(Ht),E(W))};static \u0275cmp=I({type:s,selectors:[["app-depreciacion"]],decls:113,vars:36,consts:[[1,"p-6","lg:p-10","min-h-screen","bg-[#0a0f1d]","text-white","animate-in","fade-in","duration-700"],[1,"flex","flex-col","md:flex-row","md:items-center","justify-between","gap-6","mb-10"],[1,"text-4xl","font-black","tracking-tighter","text-transparent","bg-clip-text","bg-gradient-to-r","from-white","via-white","to-blue-400","uppercase"],[1,"flex","items-center","gap-2","mt-2"],[1,"w-10","h-1","bg-blue-500","rounded-full"],[1,"text-gray-400","font-medium","tracking-wide"],[1,"flex","items-center","gap-3","w-full","md:w-auto"],[1,"flex-1","md:flex-none","h-12","px-6","bg-red-500/10","border","border-red-500/30","text-red-500","rounded-2xl","font-black","uppercase","tracking-widest","text-[10px]","hover:bg-red-500/20","transition-all","flex","items-center","justify-center","gap-2",3,"click"],[1,"fas","fa-trash-alt"],[1,"flex-1","md:flex-none","h-12","px-6","bg-white/5","border","border-rose-500/30","text-rose-400","rounded-2xl","font-black","uppercase","tracking-widest","text-[10px]","hover:bg-rose-500/10","transition-all","flex","items-center","justify-center","gap-2",3,"click"],[1,"fas","fa-undo"],[1,"flex-1","md:flex-none","h-12","px-8","bg-gradient-to-r","from-emerald-600","to-teal-600","text-white","rounded-2xl","font-black","uppercase","tracking-widest","text-[10px]","shadow-lg","shadow-emerald-500/20","hover:scale-[1.02]","active:scale-95","transition-all","flex","items-center","justify-center","gap-2",3,"click"],[1,"fas","fa-play"],[1,"relative","group","max-w-sm","w-full"],[1,"absolute","inset-y-0","left-0","pl-4","flex","items-center","pointer-events-none"],[1,"fas","fa-search","text-gray-500","group-focus-within:text-blue-400","transition-colors"],["type","text","placeholder","Buscar por nombre o c\xF3digo...",1,"w-full","bg-white/5","border","border-white/10","backdrop-blur-xl","rounded-2xl","py-4","pl-12","pr-4","focus:outline-none","focus:ring-2","focus:ring-blue-500/50","focus:border-blue-500/50","transition-all","placeholder-gray-600","text-sm","font-medium",3,"input","ngModel"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-8","mb-12"],[1,"relative","group"],[1,"absolute","-inset-0.5","bg-gradient-to-r","from-blue-600","to-indigo-600","rounded-3xl","blur","opacity-20","group-hover:opacity-40","transition","duration-500"],[1,"relative","flex","flex-col","justify-between","p-8","bg-[#111827]/80","backdrop-blur-2xl","border","border-white/5","rounded-3xl","h-full"],[1,"flex","items-center","justify-between","mb-6"],[1,"p-3","bg-blue-500/10","rounded-2xl","border","border-blue-500/20"],[1,"fas","fa-wallet","text-2xl","text-blue-400"],[1,"text-[10px]","font-black","uppercase","tracking-widest","text-blue-400/60","bg-blue-500/5","px-3","py-1","rounded-full","border","border-blue-500/10"],[1,"text-[11px]","uppercase","font-black","text-gray-500","tracking-[0.2em]","mb-2"],[1,"text-3xl","font-black","text-white","leading-none","whitespace-nowrap"],[1,"absolute","-inset-0.5","bg-gradient-to-r","from-rose-600","to-orange-600","rounded-3xl","blur","opacity-20","group-hover:opacity-40","transition","duration-500"],[1,"p-3","bg-rose-500/10","rounded-2xl","border","border-rose-500/20"],[1,"fas","fa-chart-line","text-2xl","text-rose-400","rotate-180"],[1,"text-[10px]","font-black","uppercase","tracking-widest","text-rose-400/60","bg-rose-500/5","px-3","py-1","rounded-full","border","border-rose-500/10"],[1,"text-3xl","font-black","text-rose-400","leading-none"],[1,"absolute","-inset-0.5","bg-gradient-to-r","from-emerald-600","to-teal-600","rounded-3xl","blur","opacity-20","group-hover:opacity-40","transition","duration-500"],[1,"p-3","bg-emerald-500/10","rounded-2xl","border","border-emerald-500/20"],[1,"fas","fa-vault","text-2xl","text-emerald-400"],[1,"text-[10px]","font-black","uppercase","tracking-widest","text-emerald-400/60","bg-emerald-500/5","px-3","py-1","rounded-full","border","border-emerald-500/10"],[1,"text-3xl","font-black","text-emerald-400","leading-none"],[1,"flex","gap-4","mb-8"],[1,"px-6","py-3","rounded-2xl","font-black","uppercase","tracking-widest","text-[10px]","transition-all","border","border-white/5","hover:border-blue-500/50",3,"click"],["class","ml-2 w-2 h-2 bg-blue-400 rounded-full inline-block animate-pulse",4,"ngIf"],[1,"relative","min-h-[500px]","flex","flex-col"],[1,"bg-white/5","backdrop-blur-3xl","border","border-white/10","rounded-[2rem]","overflow-hidden","shadow-2xl","flex-1","flex","flex-col"],[1,"overflow-x-auto"],[1,"w-full","text-left","border-collapse"],[1,"bg-white/[0.02]","border-b","border-white/10"],[1,"px-8","py-6","text-[11px]","font-black","uppercase","tracking-[0.2em]","text-gray-500"],["class","px-8 py-6 text-[11px] font-black uppercase tracking-[0.2em] text-gray-500",4,"ngIf"],["class","px-8 py-6 text-[11px] font-black uppercase tracking-[0.2em] text-gray-500 text-right",4,"ngIf"],[1,"divide-y","divide-white/5"],["class","animate-pulse",4,"ngIf"],[4,"ngIf"],["class","hover:bg-white/[0.03] transition-all duration-300 group",4,"ngFor","ngForOf"],[1,"px-8","py-6","bg-white/[0.02]","border-t","border-white/10","flex","items-center","justify-between","mt-auto"],[1,"hidden","md:flex","items-center","gap-4"],[1,"text-[10px]","text-gray-600","font-black","uppercase","tracking-widest"],[1,"text-blue-500"],[1,"flex","items-center","gap-2"],[1,"p-2","w-10","h-10","flex","items-center","justify-center","rounded-xl","bg-white/5","border","border-white/10","hover:bg-blue-600","hover:border-blue-500","disabled:opacity-30","disabled:hover:bg-transparent","transition-all","group",3,"click","disabled"],[1,"fas","fa-chevron-left","text-xs","group-hover:-translate-x-0.5","transition-transform"],[1,"flex","items-center","gap-2","px-2"],[1,"text-xs","font-black","text-white"],[1,"text-xs","font-black","text-gray-600","uppercase"],[1,"text-xs","font-black","text-gray-400"],[1,"fas","fa-chevron-right","text-xs","group-hover:translate-x-0.5","transition-transform"],["class","fixed inset-0 z-50 flex items-center justify-center p-4 animate-in fade-in duration-300",4,"ngIf"],[1,"ml-2","w-2","h-2","bg-blue-400","rounded-full","inline-block","animate-pulse"],[1,"px-8","py-6","text-[11px]","font-black","uppercase","tracking-[0.2em]","text-gray-500","text-right"],[1,"animate-pulse"],["colspan","5",1,"px-8","py-20","text-center"],[1,"flex","flex-col","items-center","gap-4"],[1,"w-12","h-12","border-4","border-blue-500/30","border-t-blue-500","rounded-full","animate-spin"],[1,"text-gray-500","font-bold","uppercase","tracking-widest","text-xs"],[1,"fas","fa-folder-open","text-4xl","text-gray-700","mb-4","block"],[1,"hover:bg-white/[0.03]","transition-all","duration-300","group"],[1,"px-8","py-6"],[1,"flex","flex-col","gap-1"],[1,"text-white","font-bold","group-hover:text-blue-400","transition-colors"],[1,"text-[10px]","font-mono","text-blue-500/60","font-black","uppercase","tracking-wider"],[1,"flex","flex-col"],[1,"text-sm","font-semibold","text-gray-300"],[1,"text-[10px]","text-gray-600","font-bold","uppercase","tracking-tighter"],["class","px-8 py-6 text-right",4,"ngIf"],[1,"w-2","h-2","rounded-full","bg-blue-500","animate-pulse"],[1,"text-sm","font-medium","text-gray-400"],[1,"px-8","py-6","min-w-[250px]"],[1,"flex","flex-col","gap-2"],[1,"flex","justify-between","items-end"],[1,"text-[10px]","font-black","uppercase","text-gray-500","tracking-wider"],[1,"text-xs","font-black","text-white","px-2","py-0.5","bg-white/5","rounded","border","border-white/5"],[1,"w-full","h-2","bg-black/40","rounded-full","overflow-hidden","border","border-white/5","p-[1px]"],[1,"h-full","rounded-full","transition-all","duration-1000","ease-out"],[1,"px-8","py-6","text-right"],[1,"relative","inline-block"],[1,"text-lg","font-black","text-emerald-400","tracking-tight","group-hover:scale-110","transition-transform","duration-300","block"],[1,"absolute","-bottom-1","right-0","w-full","h-0.5","bg-emerald-500/20","scale-x-0","group-hover:scale-x-100","transition-transform","duration-500","origin-right"],[1,"px-4","py-2","bg-emerald-600","hover:bg-emerald-500","text-white","rounded-xl","text-[10px]","font-black","uppercase","tracking-widest","transition-all",3,"click"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","p-4","animate-in","fade-in","duration-300"],[1,"absolute","inset-0","bg-[#0a0f1d]/80","backdrop-blur-sm",3,"click"],[1,"relative","w-full","max-w-4xl","bg-[#111827]","border","border-white/10","rounded-[2.5rem]","shadow-2xl","overflow-hidden","animate-in","zoom-in-95","duration-300"],[1,"p-8","border-b","border-white/5","flex","items-center","justify-between"],[1,"text-2xl","font-black","text-white","tracking-tight","uppercase"],[1,"text-gray-400","text-sm","font-medium","mt-1"],[1,"text-blue-400","font-bold","capitalize"],[1,"w-10","h-10","flex","items-center","justify-center","rounded-full","bg-white/5","hover:bg-white/10","transition-colors",3,"click"],[1,"fas","fa-times","text-gray-400"],[1,"p-0","max-h-[60vh]","overflow-y-auto"],[1,"sticky","top-0","bg-[#111827]","z-10","border-b","border-white/10"],[1,"px-8","py-4","text-[10px]","font-black","uppercase","tracking-widest","text-gray-600"],[1,"px-8","py-4","text-[10px]","font-black","uppercase","tracking-widest","text-gray-600","text-center"],["class","hover:bg-white/[0.02] transition-colors cursor-pointer group",3,"bg-blue-600/10","click",4,"ngFor","ngForOf"],[1,"p-8","border-t","border-white/5","bg-white/[0.02]","flex","items-center","justify-between","flex-wrap","gap-6"],[1,"flex","gap-6","items-center","flex-wrap"],["class","flex flex-col",4,"ngIf"],["class","h-10 w-px bg-white/10 hidden md:block",4,"ngIf"],["class","flex flex-col gap-1",4,"ngIf"],[1,"flex","gap-4"],[1,"px-6","py-3","rounded-2xl","text-[10px]","font-black","uppercase","tracking-widest","text-gray-400","hover:text-white","transition-colors",3,"click"],[1,"px-8","py-3","bg-gradient-to-r","from-blue-600","to-indigo-600","hover:from-blue-500","hover:to-indigo-500","disabled:opacity-40","disabled:grayscale","text-white","rounded-2xl","text-[10px]","font-black","uppercase","tracking-widest","shadow-xl","shadow-blue-500/20","transition-all","flex","items-center","gap-2",3,"click","disabled"],["class","fas fa-circle-notch animate-spin",4,"ngIf"],[1,"hover:bg-white/[0.02]","transition-colors","cursor-pointer","group",3,"click"],[1,"px-8","py-4"],[1,"text-sm","font-bold","text-white","uppercase"],[1,"text-xs","font-bold","text-gray-400"],["class","text-[10px] text-gray-600 italic",4,"ngIf"],[1,"px-8","py-4","text-center"],[1,"px-3","py-1","bg-blue-500/10","border","border-blue-500/20","rounded-lg","text-blue-400","font-black","text-xs"],[1,"w-6","h-6","rounded-full","border-2","transition-all","flex","items-center","justify-center"],["class","fas fa-check text-[10px] text-white",4,"ngIf"],[1,"text-[10px]","text-gray-600","italic"],[1,"fas","fa-check","text-[10px]","text-white"],[1,"text-[10px]","font-black","uppercase","text-gray-500","tracking-widest"],[1,"text-sm","font-bold","text-white"],[1,"h-10","w-px","bg-white/10","hidden","md:block"],[1,"text-[10px]","font-black","uppercase","text-gray-400","tracking-widest","underline","decoration-blue-500/50","underline-offset-4"],["type","number",1,"bg-white/5","border","border-white/10","rounded-xl","px-3","py-1.5","text-sm","font-bold","text-blue-400","w-24","focus:outline-none","focus:ring-1","focus:ring-blue-500/50",3,"ngModelChange","ngModel"],[1,"text-[10px]","font-black","uppercase","text-gray-400","tracking-widest","text-emerald-400/70"],["type","number","placeholder","0.00",1,"bg-white/5","border","border-white/10","rounded-xl","px-3","py-1.5","text-sm","font-bold","text-emerald-400","w-32","focus:outline-none","focus:ring-1","focus:ring-emerald-500/50",3,"ngModelChange","ngModel"],[1,"text-[10px]","font-black","uppercase","text-gray-400","tracking-widest","text-orange-400/70"],["type","date",1,"bg-white/5","border","border-white/10","rounded-xl","px-3","py-1.5","text-xs","font-bold","text-orange-400","focus:outline-none","focus:ring-1","focus:ring-orange-500/50",3,"ngModelChange","ngModel"],[1,"text-[10px]","font-black","uppercase","text-gray-400","tracking-widest","text-blue-400/70"],["type","date",1,"bg-white/5","border","border-white/10","rounded-xl","px-3","py-1.5","text-xs","font-bold","text-blue-400","focus:outline-none","focus:ring-1","focus:ring-blue-500/50",3,"ngModelChange","ngModel"],[1,"fas","fa-circle-notch","animate-spin"]],template:function(e,r){e&1&&(t(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),o(4," Depreciaci\xF3n de Activos "),i(),t(5,"div",3),g(6,"span",4),t(7,"p",5),o(8,"C\xE1lculo contable y seguimiento del valor residual en tiempo real."),i()()(),t(9,"div",6)(10,"button",7),f("click",function(){return r.desconfigurarTodo()}),g(11,"i",8),o(12," Desconfigurar Todo "),i(),t(13,"button",9),f("click",function(){return r.resetDepreciacion()}),g(14,"i",10),o(15," Reiniciar "),i(),t(16,"button",11),f("click",function(){return r.procesarDepreciacion()}),g(17,"i",12),o(18," Procesar Cierre "),i()(),t(19,"div",13)(20,"div",14),g(21,"i",15),i(),t(22,"input",16),f("input",function(c){return r.onSearchChange(c)}),i()()(),t(23,"div",17)(24,"div",18),g(25,"div",19),t(26,"div",20)(27,"div",21)(28,"div",22),g(29,"i",23),i(),t(30,"span",24),o(31,"Hist\xF3rico"),i()(),t(32,"div")(33,"p",25),o(34,"Valor Adquisici\xF3n Total"),i(),t(35,"p",26),o(36),i()()()(),t(37,"div",18),g(38,"div",27),t(39,"div",20)(40,"div",21)(41,"div",28),g(42,"i",29),i(),t(43,"span",30),o(44,"Desgaste"),i()(),t(45,"div")(46,"p",25),o(47,"Depreciaci\xF3n Acumulada"),i(),t(48,"p",31),o(49),i()()()(),t(50,"div",18),g(51,"div",32),t(52,"div",20)(53,"div",21)(54,"div",33),g(55,"i",34),i(),t(56,"span",35),o(57,"Valor Actual"),i()(),t(58,"div")(59,"p",25),o(60,"Valor en Libros Neto "),i(),t(61,"p",36),o(62),i()()()()(),t(63,"div",37)(64,"button",38),f("click",function(){return r.setTab("configurados")}),o(65," Activos Configurados "),i(),t(66,"button",38),f("click",function(){return r.setTab("sin-configurar")}),o(67," Sin Configurar "),h(68,ln,1,0,"span",39),i()(),t(69,"div",40)(70,"div",41)(71,"div",42)(72,"table",43)(73,"thead")(74,"tr",44)(75,"th",45),o(76,"Activo / Clasificaci\xF3n"),i(),t(77,"th",45),o(78,"Valor Original"),i(),h(79,sn,2,0,"th",46)(80,cn,2,0,"th",46)(81,dn,2,0,"th",47)(82,mn,2,0,"th",47),i()(),t(83,"tbody",48),h(84,pn,6,0,"tr",49)(85,un,5,0,"tr",50)(86,xn,16,9,"tr",51),i()()(),t(87,"div",52)(88,"div",53)(89,"p",54),o(90," Mostrando "),t(91,"span",55),o(92),i(),o(93," al "),t(94,"span",55),o(95),i(),o(96," de "),t(97,"span",55),o(98),i(),o(99," registros "),i()(),t(100,"div",56)(101,"button",57),f("click",function(){return r.loadData(r.currentPage-1)}),g(102,"i",58),i(),t(103,"div",59)(104,"span",60),o(105),i(),t(106,"span",61),o(107,"de"),i(),t(108,"span",62),o(109),i()(),t(110,"button",57),f("click",function(){return r.loadData(r.currentPage+1)}),g(111,"i",63),i()()()()()(),h(112,Fn,44,14,"div",64)),e&2&&(l(22),m("ngModel",r.searchTerm),l(14),x(r.formatCurrency(r.totalValorOriginal)),l(13),b("",r.formatCurrency(r.totalDepreciacion)," "),l(13),b("",r.formatCurrency(r.totalValorActual)," "),l(2),F("bg-blue-600",r.activeTab==="configurados")("text-white",r.activeTab==="configurados")("bg-white/5",r.activeTab!=="configurados")("text-gray-400",r.activeTab!=="configurados"),l(2),F("bg-blue-600",r.activeTab==="sin-configurar")("text-white",r.activeTab==="sin-configurar")("bg-white/5",r.activeTab!=="sin-configurar")("text-gray-400",r.activeTab!=="sin-configurar"),l(2),m("ngIf",r.activeTab!=="sin-configurar"&&r.totalItems>0),l(11),m("ngIf",r.activeTab==="configurados"),l(),m("ngIf",r.activeTab==="configurados"),l(),m("ngIf",r.activeTab==="configurados"),l(),m("ngIf",r.activeTab==="sin-configurar"),l(2),m("ngIf",r.loading),l(),m("ngIf",!r.loading&&r.activos.length===0),l(),m("ngForOf",r.activos),l(6),x((r.currentPage-1)*r.perPage+1),l(3),x(r.currentPage*r.perPage>r.totalItems?r.totalItems:r.currentPage*r.perPage),l(3),x(r.totalItems),l(3),m("disabled",r.currentPage===1||r.loading),l(4),x(r.currentPage),l(4),x(r.totalPages),l(),m("disabled",r.currentPage===r.totalPages||r.loading),l(2),m("ngIf",r.showModal))},dependencies:[T,V,A,L,N,Ue,D,R,X],encapsulation:2})};var Ye=class s{constructor(n){this.http=n}apiUrl=U.apiUrl;getHistorial(n="",e=1){let r=new ue().set("page",e.toString());return n&&(r=r.set("search",n.toString())),this.http.get(`${this.apiUrl}/trazabilidad`,{params:r})}buscarActivo(n){return this.http.get(`${this.apiUrl}/trazabilidad/buscar-activo`,{params:{search:n}})}static \u0275fac=function(e){return new(e||s)($(q))};static \u0275prov=H({token:s,factory:s.\u0275fac,providedIn:"root"})};var Vn=()=>[1,2,3];function Pn(s,n){s&1&&(t(0,"div",19),g(1,"div",20)(2,"div",21),i())}function Dn(s,n){s&1&&(t(0,"div",17),h(1,Pn,3,0,"div",18),i()),s&2&&(l(),m("ngForOf",Tt(1,Vn)))}function Rn(s,n){s&1&&(t(0,"div",22)(1,"p",23),o(2,"No se encontraron registros de trazabilidad."),i()())}function Ln(s,n){if(s&1&&(t(0,"div",45)(1,"p",46),o(2,"Evidencia Fotogr\xE1fica"),i(),t(3,"div",47),g(4,"img",48)(5,"div",49),i()()),s&2){let e=d().$implicit,r=d(2);l(4),m("src",r.getImageUrl(e.foto_reasignacion),K)}}function jn(s,n){if(s&1&&(t(0,"div",26)(1,"div",27)(2,"div",28),o(3),i(),t(4,"div",29)(5,"div",30)(6,"span",31),o(7),i(),t(8,"span",32),o(9),i()(),t(10,"h3",33),o(11),i(),t(12,"div",34)(13,"div",35)(14,"p",36),o(15,"De (Anterior)"),i(),t(16,"p",37),o(17),i(),t(18,"p",38),o(19),i()(),t(20,"div",35)(21,"p",39),o(22,"A (Nuevo) "),i(),t(23,"p",40),o(24),i(),t(25,"p",41),o(26),i()()(),h(27,Ln,6,1,"div",42),t(28,"div",43)(29,"p",36),o(30,"Motivo:"),i(),t(31,"span",44),o(32),i()()()()()),s&2){let e=n.$implicit,r=n.index,a=d(2);l(3),b(" ",(a.currentPage-1)*a.pageSize+r+1," "),l(4),x(a.formatDate(e.fecha_asignacion)),l(2),x(e.codigo_inventario),l(2),x(e.nombre_activo),l(6),x(e.personal_anterior||"Sin custodio previo"),l(2),x(e.area_anterior||"-"),l(5),x(e.personal_nuevo),l(2),x(e.area_nueva||"-"),l(),m("ngIf",e.foto_reasignacion),l(5),b('"',e.motivo,'"')}}function Un(s,n){if(s&1&&(t(0,"div",24),h(1,jn,33,10,"div",25),i()),s&2){let e=d();l(),m("ngForOf",e.historial)}}function On(s,n){if(s&1){let e=y();t(0,"div",50)(1,"button",51),f("click",function(){p(e);let a=d();return u(a.changePage(a.currentPage-1))}),v(),t(2,"svg",52),g(3,"path",53),i()(),S(),t(4,"span",54),o(5),i(),t(6,"button",51),f("click",function(){p(e);let a=d();return u(a.changePage(a.currentPage+1))}),v(),t(7,"svg",52),g(8,"path",55),i()()()}if(s&2){let e=d();l(),m("disabled",e.currentPage===1),l(4),M("P\xE1g ",e.currentPage," / ",e.lastPage),l(),m("disabled",e.currentPage===e.lastPage)}}var Xe=class s{constructor(n,e){this.trazabilidadService=n;this.cdr=e}historial=[];loading=!1;search="";currentPage=1;lastPage=1;pageSize=10;totalItems=0;ngOnInit(){this.loadData()}loadData(){this.loading=!0,this.trazabilidadService.getHistorial(this.search,this.currentPage).subscribe({next:n=>{this.historial=n.data,this.currentPage=n.current_page,this.lastPage=n.last_page,this.totalItems=n.total,this.pageSize=n.per_page,this.loading=!1,this.cdr.detectChanges()},error:()=>{this.loading=!1,this.cdr.detectChanges()}})}changePage(n){n>=1&&n<=this.lastPage&&(this.currentPage=n,this.loadData())}onSearch(){this.currentPage=1,this.loadData()}formatDate(n){return new Date(n).toLocaleDateString("es-NI",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})}getImageUrl(n){if(!n)return"";if(n.startsWith("http"))return n;let e=n.replace(/^\/?storage\//,"").replace(/^\//,"");return`${U.apiUrl.replace("/api","")}/storage/${e}`}static \u0275fac=function(e){return new(e||s)(E(Ye),E(W))};static \u0275cmp=I({type:s,selectors:[["app-trazabilidad"]],decls:26,vars:7,consts:[[1,"p-6","lg:p-8"],[1,"flex","flex-col","lg:flex-row","lg:items-center","justify-between","gap-6","mb-10"],[1,"text-3xl","font-black","text-primary","tracking-tight"],[1,"text-secondary","mt-1"],[1,"relative","w-full","lg:w-96"],["type","text","placeholder","Buscar por c\xF3digo o activo...",1,"input-field","w-full","!bg-white","dark:!bg-white/5","!border-gray-300","dark:!border-white/10","pl-12","h-14","!text-gray-900","dark:!text-white",3,"ngModelChange","keyup.enter","ngModel"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","absolute","left-4","top-4","text-blue-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],[1,"max-w-5xl","mx-auto"],["class","space-y-6",4,"ngIf"],["class","text-center py-20 card bg-white/5 border-dashed border-white/10",4,"ngIf"],["class","space-y-8 relative before:absolute before:inset-0 before:ml-5 lg:before:ml-[25px] before:-translate-x-px before:h-full before:w-0.5 before:bg-gradient-to-b before:from-blue-500 before:via-white/5 before:to-transparent",4,"ngIf"],[1,"pagination-container","mt-12","bg-gray-500/5","p-6","rounded-3xl","border","border-white/5"],[1,"pagination-info"],[1,"pagination-label"],[1,"pagination-value"],["class","pagination-nav",4,"ngIf"],[1,"space-y-6"],["class","card p-6 animate-pulse border-white/5",4,"ngFor","ngForOf"],[1,"card","p-6","animate-pulse","border-white/5"],[1,"h-4","bg-white/5","rounded","w-1/4","mb-4"],[1,"h-8","bg-white/5","rounded","w-3/4"],[1,"text-center","py-20","card","bg-white/5","border-dashed","border-white/10"],[1,"text-gray-500"],[1,"space-y-8","relative","before:absolute","before:inset-0","before:ml-5","lg:before:ml-[25px]","before:-translate-x-px","before:h-full","before:w-0.5","before:bg-gradient-to-b","before:from-blue-500","before:via-white/5","before:to-transparent"],["class","relative flex items-center justify-between group",4,"ngFor","ngForOf"],[1,"relative","flex","items-center","justify-between","group"],[1,"flex","items-center","w-full"],[1,"flex","items-center","justify-center","w-8","h-8","rounded-full","border","border-blue-500/30","bg-blue-500/10","text-blue-500","text-[10px]","font-black","z-10","shrink-0","group-hover:scale-110","transition-transform"],[1,"card","ml-6","flex-1","hover:border-blue-500/30","transition-all","p-6"],[1,"flex","flex-col","lg:flex-row","lg:items-center","justify-between","mb-4","gap-2"],[1,"text-xs","font-bold","text-blue-400","tracking-widest","uppercase"],[1,"badge-gray"],[1,"text-lg","font-bold","text-white","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6","p-4","rounded-2xl","bg-white/5","border","border-white/5"],[1,"space-y-1"],[1,"text-[10px]","uppercase","font-bold","text-gray-500","tracking-wider"],[1,"text-sm","text-gray-300"],[1,"text-xs","text-gray-500"],[1,"text-[10px]","uppercase","font-bold","text-emerald-400","tracking-wider"],[1,"text-sm","text-white","font-bold"],[1,"text-xs","text-gray-400"],["class","mt-4",4,"ngIf"],[1,"mt-4","flex","flex-col","gap-1"],[1,"text-xs","text-gray-400","italic"],[1,"mt-4"],[1,"text-[10px]","uppercase","font-bold","text-gray-500","tracking-wider","mb-2"],[1,"relative","w-full","max-w-sm","rounded-2xl","overflow-hidden","border","border-white/10","group/img","shadow-xl"],[1,"w-full","h-48","object-cover","group-hover/img:scale-105","transition-transform","duration-500",3,"src"],[1,"absolute","inset-0","bg-gradient-to-t","from-black/20","to-transparent"],[1,"pagination-nav"],[1,"pagination-btn",3,"click","disabled"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2.5","d","M15 19l-7-7 7-7"],[1,"pagination-page","text-white","font-bold"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2.5","d","M9 5l7 7-7 7"]],template:function(e,r){e&1&&(t(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),o(4,"Trazabilidad de Activos"),i(),t(5,"p",3),o(6,"Historial auditivo de movimientos y cambios de estado."),i()(),t(7,"div",4)(8,"input",5),C("ngModelChange",function(c){return w(r.search,c)||(r.search=c),c}),f("keyup.enter",function(){return r.onSearch()}),i(),v(),t(9,"svg",6),g(10,"path",7),i()()(),S(),t(11,"div",8),h(12,Dn,2,2,"div",9)(13,Rn,3,0,"div",10)(14,Un,2,1,"div",11),t(15,"div",12)(16,"div",13)(17,"span",14),o(18," Mostrando "),t(19,"span",15),o(20),i(),o(21," de "),t(22,"span",15),o(23),i(),o(24," registros "),i()(),h(25,On,9,4,"div",16),i()()()),e&2&&(l(8),_("ngModel",r.search),l(4),m("ngIf",r.loading),l(),m("ngIf",!r.loading&&r.historial.length===0),l(),m("ngIf",!r.loading&&r.historial.length>0),l(6),x(r.historial.length),l(3),x(r.totalItems),l(2),m("ngIf",r.lastPage>1))},dependencies:[T,V,A,L,N,D,R],encapsulation:2})};var pe=de(me());var Ze=class s{constructor(n){this.http=n}apiUrl=U.apiUrl;getUsuarios(n=1,e=""){let r=new ue().set("page",n);return e&&(r=r.set("search",e)),this.http.get(`${this.apiUrl}/usuarios`,{params:r})}create(n){return this.http.post(`${this.apiUrl}/usuarios`,n)}update(n,e){return this.http.put(`${this.apiUrl}/usuarios/${n}`,e)}delete(n){return this.http.delete(`${this.apiUrl}/usuarios/${n}`)}resetPassword(n){return this.http.post(`${this.apiUrl}/usuarios/${n}/reset-password`,{})}static \u0275fac=function(e){return new(e||s)($(q))};static \u0275prov=H({token:s,factory:s.\u0275fac,providedIn:"root"})};function Bn(s,n){if(s&1){let e=y();t(0,"div",20)(1,"button",21),f("click",function(){p(e);let a=d();return u(a.showForm=!a.showForm)}),v(),t(2,"svg",22),g(3,"path",23),i(),S(),t(4,"span"),o(5),i()()()}if(s&2){let e=d();l(5),x(e.showForm?"Cerrar Formulario":"Nuevo Usuario")}}function Wn(s,n){s&1&&(t(0,"span",38),o(1,"*"),i())}function qn(s,n){if(s&1){let e=y();t(0,"div",24)(1,"div",25)(2,"div",26)(3,"div")(4,"div",27),o(5,"Control de Acceso"),i(),t(6,"h3",28),o(7,"Registrar Usuario"),i(),t(8,"p",29),o(9,"Crea nuevas credenciales de acceso al sistema."),i()(),t(10,"button",30),f("click",function(){p(e);let a=d();return u(a.closeForm())}),v(),t(11,"svg",31),g(12,"path",32),i()()(),S(),t(13,"div",33)(14,"form",34),f("submit",function(){p(e);let a=d();return u(a.saveUser())}),t(15,"div",35)(16,"div",36)(17,"label",37),o(18,"Nombre "),t(19,"span",38),o(20,"*"),i()(),t(21,"input",39),C("ngModelChange",function(a){p(e);let c=d();return w(c.userForm.nombre,a)||(c.userForm.nombre=a),u(a)}),i()(),t(22,"div",36)(23,"label",37),o(24,"Apellido "),t(25,"span",38),o(26,"*"),i()(),t(27,"input",40),C("ngModelChange",function(a){p(e);let c=d();return w(c.userForm.apellido,a)||(c.userForm.apellido=a),u(a)}),i()()(),t(28,"div",35)(29,"div",36)(30,"label",37),o(31,"Correo Electr\xF3nico "),t(32,"span",38),o(33,"*"),i()(),t(34,"input",41),C("ngModelChange",function(a){p(e);let c=d();return w(c.userForm.email,a)||(c.userForm.email=a),u(a)}),i()(),t(35,"div",36)(36,"label",37),o(37,"Contrase\xF1a "),h(38,Wn,2,0,"span",42),i(),t(39,"input",43),C("ngModelChange",function(a){p(e);let c=d();return w(c.userForm.password,a)||(c.userForm.password=a),u(a)}),i()()(),t(40,"div",44)(41,"div",36)(42,"label",37),o(43,"Rol del Usuario "),t(44,"span",38),o(45,"*"),i()(),t(46,"select",45),C("ngModelChange",function(a){p(e);let c=d();return w(c.userForm.rol,a)||(c.userForm.rol=a),u(a)}),t(47,"option",46),o(48,"Administrador"),i(),t(49,"option",47),o(50,"Operador"),i(),t(51,"option",48),o(52,"Consulta"),i()()(),t(53,"div",36)(54,"label",37),o(55,"Estado"),i(),t(56,"select",49),C("ngModelChange",function(a){p(e);let c=d();return w(c.userForm.estado,a)||(c.userForm.estado=a),u(a)}),t(57,"option",50),o(58,"Activo"),i(),t(59,"option",51),o(60,"Inactivo"),i()()()(),t(61,"div",52)(62,"button",53),o(63),i()()()()()()}if(s&2){let e=d();l(21),_("ngModel",e.userForm.nombre),l(6),_("ngModel",e.userForm.apellido),l(7),_("ngModel",e.userForm.email),l(4),m("ngIf",!e.editingId),l(),_("ngModel",e.userForm.password),m("placeholder",e.editingId?"Dejar en blanco para mantener":"Contrase\xF1a segura"),l(7),_("ngModel",e.userForm.rol),l(10),_("ngModel",e.userForm.estado),l(7),b(" ",e.editingId?"Actualizar Usuario":"Crear Usuario"," ")}}function Hn(s,n){s&1&&(t(0,"div",54),o(1,"Cargando usuarios..."),i())}function zn(s,n){if(s&1){let e=y();be(0),t(1,"button",72),f("click",function(){p(e);let a=d().$implicit,c=d();return u(c.editUser(a))}),g(2,"i",73),v(),t(3,"svg",74),g(4,"path",75),i(),S(),t(5,"span",76),o(6,"Editar"),i()(),t(7,"button",77),f("click",function(){p(e);let a=d().$implicit,c=d();return u(c.resetPassword(a))}),g(8,"i",78),v(),t(9,"svg",74),g(10,"path",79),i(),S(),t(11,"span",76),o(12,"Reset"),i()(),t(13,"button",80),f("click",function(){p(e);let a=d().$implicit,c=d();return u(c.deleteUsuario(a.id))}),g(14,"i",81),v(),t(15,"svg",74),g(16,"path",82),i(),S(),t(17,"span",76),o(18,"Borrar"),i()(),ve()}}function Gn(s,n){if(s&1&&(t(0,"div",55)(1,"div",56)(2,"span",57),o(3,"ID #"),i(),t(4,"span",58),o(5),i()(),t(6,"div",59)(7,"div",60),o(8),i(),t(9,"div",61)(10,"span",62),o(11),i(),t(12,"span",63),o(13),i()()(),t(14,"div",64)(15,"span",65),o(16,"Rol Assigned"),i(),t(17,"span",66),o(18),i()(),t(19,"div",67)(20,"span",65),o(21,"Estado"),i(),t(22,"span"),o(23),i()(),t(24,"div",68),g(25,"i",69),o(26),P(27,"date"),i(),t(28,"div",70),h(29,zn,19,0,"ng-container",71),i()()),s&2){let e=n.$implicit,r=n.index,a=d();l(5),x((a.currentPage-1)*a.pageSize+r+1),l(3),M(" ",e.nombre.charAt(0),"",e.apellido.charAt(0)," "),l(3),M("",e.nombre," ",e.apellido),l(2),x(e.email),l(5),b(" ",e.rol," "),l(4),B(e.estado==="ACTIVO"?"badge-emerald px-3 py-1.5 md:py-1 rounded-lg md:rounded-full text-xs md:text-[10px]":"badge-red px-3 py-1.5 md:py-1 rounded-lg md:rounded-full text-xs md:text-[10px]"),l(),b(" ",e.estado," "),l(3),b(" ",O(27,12,e.created_at,"mediumDate")," "),l(3),m("ngIf",a.isAdmin)}}function $n(s,n){if(s&1){let e=y();t(0,"div",83)(1,"button",84),f("click",function(){p(e);let a=d();return u(a.changePage(a.currentPage-1))}),v(),t(2,"svg",85),g(3,"path",86),i()(),S(),t(4,"span",87),o(5),i(),t(6,"button",84),f("click",function(){p(e);let a=d();return u(a.changePage(a.currentPage+1))}),v(),t(7,"svg",85),g(8,"path",88),i()()()}if(s&2){let e=d();l(),m("disabled",e.currentPage===1),l(4),M("P\xE1g ",e.currentPage," / ",e.lastPage),l(),m("disabled",e.currentPage===e.lastPage)}}var et=class s{constructor(n,e){this.usuarioService=n;this.authService=e}usuarios=[];loading=!0;search="";showForm=!1;currentPage=1;lastPage=1;pageSize=10;totalUsuarios=0;userForm={nombre:"",apellido:"",email:"",password:"",rol:"OPERADOR",estado:"ACTIVO"};editingId=null;get isAdmin(){let n=JSON.parse(localStorage.getItem("user")||"{}");return n.role==="ADMIN"||n.rol==="ADMIN"}ngOnInit(){this.loadData()}loadData(){this.loading=!0,this.usuarioService.getUsuarios(this.currentPage,this.search).subscribe({next:n=>{this.usuarios=n.data,this.currentPage=n.current_page,this.lastPage=n.last_page,this.totalUsuarios=n.total,this.pageSize=n.per_page,this.loading=!1},error:()=>this.loading=!1})}changePage(n){n>=1&&n<=this.lastPage&&(this.currentPage=n,this.loadData())}onSearch(){this.loadData()}saveUser(){if(!this.userForm.nombre||!this.userForm.email){pe.default.fire("Error","Nombre y Email son requeridos","error");return}(this.editingId?this.usuarioService.update(this.editingId,this.userForm):this.usuarioService.create(this.userForm)).subscribe({next:()=>{pe.default.fire("\xC9xito",this.editingId?"Usuario actualizado":"Usuario creado","success"),this.closeForm(),this.loadData()},error:e=>pe.default.fire("Error",e.error.message||"Error al procesar","error")})}editUser(n){this.editingId=n.id,this.userForm=Ce(Y({},n),{password:""}),this.showForm=!0}closeForm(){this.showForm=!1,this.editingId=null,this.userForm={nombre:"",apellido:"",email:"",password:"",rol:"OPERADOR",estado:"ACTIVO"}}deleteUsuario(n){pe.default.fire({title:"\xBFEst\xE1s seguro?",text:"Esta acci\xF3n no se puede revertir",icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",cancelButtonColor:"#64748b",confirmButtonText:"S\xED, eliminar",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&this.usuarioService.delete(n).subscribe(()=>{pe.default.fire("Eliminado","Usuario eliminado","success"),this.loadData()})})}resetPassword(n){pe.default.fire({title:"\xBFRestablecer contrase\xF1a?",text:`Se generar\xE1 una nueva contrase\xF1a para ${n.nombre} ${n.apellido}`,icon:"question",showCancelButton:!0,confirmButtonColor:"#3b82f6",cancelButtonColor:"#64748b",confirmButtonText:"S\xED, restablecer",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&this.usuarioService.resetPassword(n.id).subscribe({next:r=>{pe.default.fire({title:"Contrase\xF1a Restablecida",html:`La nueva contrase\xF1a es:<br><strong style="font-size: 1.5rem; color: #3b82f6;">${r.new_password}</strong><br><small style="color: #94a3b8;">An\xF3tela, no se mostrar\xE1 de nuevo.</small>`,icon:"success",confirmButtonText:"Entendido"})},error:r=>pe.default.fire("Error",r.error?.message||"Error al restablecer","error")})})}static \u0275fac=function(e){return new(e||s)(E(Ze),E(Z))};static \u0275cmp=I({type:s,selectors:[["app-usuarios"]],decls:38,vars:7,consts:[[1,"p-6","lg:p-8"],[1,"flex","flex-col","md:flex-row","md:items-center","justify-between","gap-4","mb-8"],[1,"text-3xl","font-black","text-primary","tracking-tight"],[1,"text-secondary","mt-1","tracking-tight"],["class","flex items-center gap-3",4,"ngIf"],["class","mb-10 animate-fade-in",4,"ngIf"],[1,"card","overflow-hidden"],[1,"bg-gray-500/5","text-muted","text-[10px]","font-black","uppercase","tracking-widest","border-b","border-white/5","hidden","md:grid","grid-cols-12","gap-4","px-6","py-5"],[1,"col-span-1"],[1,"col-span-4"],[1,"col-span-2"],[1,"col-span-1","text-right"],[1,"divide-y","divide-white/5","font-medium"],["class","animate-pulse px-6 py-20 text-center text-muted",4,"ngIf"],["class","group hover:bg-gray-500/5 transition-colors grid grid-cols-1 md:grid-cols-12 gap-4 p-6 md:px-6 md:py-5 items-center",4,"ngFor","ngForOf"],[1,"pagination-container"],[1,"pagination-info"],[1,"pagination-label"],[1,"pagination-value"],["class","pagination-nav",4,"ngIf"],[1,"flex","items-center","gap-3"],[1,"btn-primary","h-12","px-6","shadow-lg","shadow-blue-500/20","hover:shadow-blue-500/30","active:scale-95","transition-all",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"mb-10","animate-fade-in"],[1,"card","p-0","overflow-hidden","border-t-4","border-blue-500","shadow-2xl"],[1,"px-8","py-6","border-b","border-white/5","bg-gray-500/5","flex","items-center","justify-between"],[1,"text-[10px]","font-black","text-blue-500","uppercase","tracking-widest","mb-1"],[1,"text-2xl","font-black","text-primary","tracking-tight"],[1,"text-xs","text-muted","mt-1"],[1,"p-2","text-muted","hover:text-white","bg-white/5","hover:bg-white/10","rounded-full","transition-all",3,"click"],["fill","none","viewBox","0 0 24 24","stroke-width","2.5","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","d","M6 18L18 6M6 6l12 12"],[1,"px-8","py-8"],[1,"space-y-6",3,"submit"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"space-y-2"],[1,"text-xs","font-bold","text-muted"],[1,"text-red-500"],["type","text","name","nombre","placeholder","Ej: Maria",1,"input-field","h-11","text-sm","bg-gray-50/5",3,"ngModelChange","ngModel"],["type","text","name","apellido","placeholder","Ej: Gonzalez",1,"input-field","h-11","text-sm","bg-gray-50/5",3,"ngModelChange","ngModel"],["type","email","name","email","placeholder","usuario@ejemplo.com",1,"input-field","h-11","text-sm","bg-gray-50/5",3,"ngModelChange","ngModel"],["class","text-red-500",4,"ngIf"],["type","password","name","password",1,"input-field","h-11","text-sm","bg-gray-50/5",3,"ngModelChange","ngModel","placeholder"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6","items-center"],["name","rol",1,"input-field","h-11","text-sm","bg-gray-50/5",3,"ngModelChange","ngModel"],["value","ADMIN"],["value","OPERADOR"],["value","CONSULTA"],["name","estado",1,"input-field","h-11","text-sm","bg-gray-50/5",3,"ngModelChange","ngModel"],["value","ACTIVO"],["value","INACTIVO"],[1,"flex","justify-end","pt-6","border-t","border-white/5","mt-6"],["type","submit",1,"btn-primary","w-full","md:w-auto","px-8","h-11","shadow-xl","shadow-blue-500/20","hover:scale-[1.02]","active:scale-95","transition-all","font-bold","tracking-wide"],[1,"animate-pulse","px-6","py-20","text-center","text-muted"],[1,"group","hover:bg-gray-500/5","transition-colors","grid","grid-cols-1","md:grid-cols-12","gap-4","p-6","md:px-6","md:py-5","items-center"],[1,"flex","justify-between","md:block","col-span-1","border-b","md:border-0","pb-4","md:pb-0","mb-4","md:mb-0"],[1,"md:hidden","text-xs","font-black","text-muted","uppercase","tracking-widest"],[1,"text-xs","font-black","text-muted"],[1,"col-span-12","md:col-span-4","flex","items-center","gap-3"],[1,"h-12","w-12","md:h-10","md:w-10","rounded-2xl","md:rounded-full","bg-indigo-500/10","flex","items-center","justify-center","text-indigo-500","font-bold","border","border-indigo-500/20","shrink-0"],[1,"flex","flex-col","min-w-0"],[1,"text-base","md:text-sm","font-bold","text-primary","truncate"],[1,"text-xs","text-muted","truncate"],[1,"col-span-6","md:col-span-2","mt-2","md:mt-0"],[1,"md:hidden","block","text-[10px]","font-black","text-muted","uppercase","tracking-widest","mb-1"],[1,"px-3","py-1.5","md:py-1","rounded-lg","md:rounded-full","text-xs","md:text-[10px]","font-black","tracking-wider","bg-blue-500/10","text-blue-500","border","border-blue-500/20","inline-block"],[1,"col-span-6","md:col-span-2","mt-2","md:mt-0","text-right","md:text-left"],[1,"col-span-12","md:col-span-2","mt-4","md:mt-0","text-sm","text-muted","flex","items-center","gap-2","md:block"],[1,"far","fa-calendar-alt","md:hidden"],[1,"col-span-12","md:col-span-1","mt-6","md:mt-0","flex","items-center","justify-end","gap-2","border-t","md:border-t-0","pt-4","md:pt-0"],[4,"ngIf"],["title","Editar",1,"w-full","md:w-auto","p-2.5","text-muted","hover:text-blue-500","bg-gray-100","hover:bg-blue-500/10","dark:bg-white/5","rounded-xl","transition-all","flex","items-center","justify-center","gap-2",3,"click"],[1,"fas","fa-edit","md:hidden"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4","hidden","md:block"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"],[1,"md:hidden","font-semibold","text-sm"],["title","Reset Password",1,"w-full","md:w-auto","p-2.5","text-muted","hover:text-amber-500","bg-gray-100","hover:bg-amber-500/10","dark:bg-white/5","rounded-xl","transition-all","flex","items-center","justify-center","gap-2",3,"click"],[1,"fas","fa-key","md:hidden"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"],["title","Eliminar",1,"w-full","md:w-auto","p-2.5","text-muted","hover:text-red-500","bg-gray-100","hover:bg-red-500/10","dark:bg-white/5","rounded-xl","transition-all","flex","items-center","justify-center","gap-2",3,"click"],[1,"fas","fa-trash-alt","md:hidden"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"pagination-nav"],[1,"pagination-btn",3,"click","disabled"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2.5","d","M15 19l-7-7 7-7"],[1,"pagination-page"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2.5","d","M9 5l7 7-7 7"]],template:function(e,r){e&1&&(t(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),o(4,"Usuarios del Sistema"),i(),t(5,"p",3),o(6,"Administraci\xF3n de cuentas y permisos de acceso."),i()(),h(7,Bn,6,1,"div",4),i(),h(8,qn,64,9,"div",5),t(9,"div",6)(10,"div",6)(11,"div",7)(12,"div",8),o(13,"#"),i(),t(14,"div",9),o(15,"Usuario"),i(),t(16,"div",10),o(17,"Rol / Permisos"),i(),t(18,"div",10),o(19,"Estado"),i(),t(20,"div",10),o(21,"Fecha Registro"),i(),t(22,"div",11),o(23,"Acciones"),i()(),t(24,"div",12),h(25,Hn,2,0,"div",13)(26,Gn,30,15,"div",14),i(),t(27,"div",15)(28,"div",16)(29,"span",17),o(30," Mostrando "),t(31,"span",18),o(32),i(),o(33," de "),t(34,"span",18),o(35),i(),o(36," usuarios "),i()(),h(37,$n,9,4,"div",19),i()()()()),e&2&&(l(7),m("ngIf",r.isAdmin),l(),m("ngIf",r.showForm),l(17),m("ngIf",r.loading),l(),m("ngForOf",r.usuarios),l(6),x(r.usuarios.length),l(3),x(r.totalUsuarios),l(2),m("ngIf",r.lastPage>1))},dependencies:[T,V,A,L,ie,re,oe,N,ne,D,ee,R,te,X],encapsulation:2})};var xe=class s{constructor(n){this.http=n}apiUrl=U.apiUrl;getAuditoria(n=1,e=""){let r=new ue().set("page",n);return e&&(r=r.set("search",e)),this.http.get(`${this.apiUrl}/sistema/auditoria`,{params:r})}getRespaldo(){return this.http.get(`${this.apiUrl}/sistema/respaldo`)}generarRespaldo(){return this.http.post(`${this.apiUrl}/sistema/respaldo`,{})}descargarRespaldo(n){return this.http.get(`${this.apiUrl}/sistema/respaldo/${n}`,{responseType:"blob"})}eliminarRespaldo(n){return this.http.delete(`${this.apiUrl}/sistema/respaldo/${n}`)}getSeguridad(){return this.http.get(`${this.apiUrl}/sistema/seguridad`)}static \u0275fac=function(e){return new(e||s)($(q))};static \u0275prov=H({token:s,factory:s.\u0275fac,providedIn:"root"})};function Qn(s,n){s&1&&(t(0,"tr")(1,"td",12),o(2,"Cargando..."),i()())}function Kn(s,n){s&1&&(t(0,"tr")(1,"td",12),o(2,"No hay registros de auditor\xEDa"),i()())}function Jn(s,n){if(s&1&&(t(0,"tr",13)(1,"td",14),o(2),P(3,"date"),i(),t(4,"td",15),o(5),i(),t(6,"td",16),o(7),i(),t(8,"td",17)(9,"span",18),o(10),i()()()),s&2){let e=n.$implicit;l(2),x(O(3,4,e.created_at,"dd/MM/yyyy HH:mm")),l(3),x(e.usuario||"Sistema"),l(2),x(e.description),l(3),x(e.subject_type)}}var tt=class s{constructor(n){this.sistemaService=n}logs=[];loading=!0;ngOnInit(){this.sistemaService.getAuditoria().subscribe(n=>{this.logs=n.data||[],this.loading=!1})}static \u0275fac=function(e){return new(e||s)(E(xe))};static \u0275cmp=I({type:s,selectors:[["app-auditoria"]],decls:23,vars:3,consts:[[1,"p-6","lg:p-8"],[1,"mb-6"],[1,"text-2xl","font-bold","text-gray-800","dark:text-gray-100"],[1,"text-sm","text-gray-500"],[1,"bg-white","dark:bg-gray-800","rounded-xl","border","border-gray-200","dark:border-gray-700","overflow-hidden"],[1,"overflow-x-auto"],[1,"w-full"],[1,"bg-gray-50","dark:bg-gray-900","text-xs","uppercase","text-gray-500"],[1,"px-6","py-3","text-left"],[1,"divide-y","divide-gray-100","dark:divide-gray-700"],[4,"ngIf"],["class","hover:bg-gray-50 dark:hover:bg-gray-700/50",4,"ngFor","ngForOf"],["colspan","4",1,"px-6","py-8","text-center","text-gray-500"],[1,"hover:bg-gray-50","dark:hover:bg-gray-700/50"],[1,"px-6","py-4","text-sm","text-gray-500"],[1,"px-6","py-4","text-sm","text-gray-900","dark:text-gray-100"],[1,"px-6","py-4","text-sm","text-gray-600"],[1,"px-6","py-4","text-sm"],[1,"px-2","py-1","bg-gray-100","dark:bg-gray-700","rounded","text-xs"]],template:function(e,r){e&1&&(t(0,"div",0)(1,"div",1)(2,"h2",2),o(3,"Auditor\xEDa"),i(),t(4,"p",3),o(5,"Registro de actividades del sistema"),i()(),t(6,"div",4)(7,"div",5)(8,"table",6)(9,"thead",7)(10,"tr")(11,"th",8),o(12,"Fecha"),i(),t(13,"th",8),o(14,"Usuario"),i(),t(15,"th",8),o(16,"Descripci\xF3n"),i(),t(17,"th",8),o(18,"Tipo"),i()()(),t(19,"tbody",9),h(20,Qn,3,0,"tr",10)(21,Kn,3,0,"tr",10)(22,Jn,11,7,"tr",11),i()()()()()),e&2&&(l(20),m("ngIf",r.loading),l(),m("ngIf",!r.loading&&r.logs.length===0),l(),m("ngForOf",r.logs))},dependencies:[T,V,A,X],encapsulation:2})};var we=de(me());function Yn(s,n){s&1&&(v(),t(0,"svg",25),g(1,"circle",26)(2,"path",27),i())}function Xn(s,n){s&1&&g(0,"i",28)}function Zn(s,n){s&1&&(t(0,"div",29)(1,"div",30),g(2,"i",31),i(),t(3,"p",32),o(4,"No se han encontrado respaldos en el servidor."),i(),t(5,"p",33),o(6,"Haga clic en el bot\xF3n superior para crear uno nuevo."),i()())}function er(s,n){if(s&1){let e=y();t(0,"tr",41)(1,"td",37)(2,"div",42)(3,"div",43),g(4,"i",44),i(),t(5,"span",45),o(6),i()()(),t(7,"td",37)(8,"span",46),o(9),i()(),t(10,"td",37)(11,"span",47),o(12),P(13,"number"),i()(),t(14,"td",37)(15,"div",48)(16,"button",49),f("click",function(){let a=p(e).$implicit,c=d(2);return u(c.descargar(a.nombre))}),g(17,"i",50),i(),t(18,"button",51),f("click",function(){let a=p(e).$implicit,c=d(2);return u(c.eliminar(a.nombre))}),g(19,"i",52),i()()()()}if(s&2){let e=n.$implicit;l(6),x(e.nombre),l(3),x(e.fecha),l(3),b(" ",O(13,3,e.size/1024/1024,"1.2-2")," MB ")}}function tr(s,n){if(s&1&&(t(0,"div",34)(1,"table",35)(2,"thead")(3,"tr",36)(4,"th",37),o(5,"Archivo"),i(),t(6,"th",37),o(7,"Fecha de Creaci\xF3n"),i(),t(8,"th",37),o(9,"Tama\xF1o"),i(),t(10,"th",38),o(11,"Acciones"),i()()(),t(12,"tbody",39),h(13,er,20,6,"tr",40),i()()()),s&2){let e=d();l(13),m("ngForOf",e.backups)}}var it=class s{constructor(n){this.sistemaService=n}info=null;backups=[];isGenerating=!1;ngOnInit(){this.loadData()}loadData(){this.sistemaService.getRespaldo().subscribe({next:n=>{this.info=n,this.backups=n.backups||[]},error:n=>{console.error("Error cargando respaldos",n)}})}generarRespaldo(){this.isGenerating=!0,this.sistemaService.generarRespaldo().subscribe({next:n=>{this.isGenerating=!1,we.default.fire({icon:"success",title:"\xA1Generado!",text:"El respaldo se ha creado exitosamente.",timer:2e3,showConfirmButton:!1,background:"#f8fafc",customClass:{title:"text-indigo-600 font-bold",popup:"rounded-2xl border-2 border-indigo-100"}}),this.loadData()},error:n=>{this.isGenerating=!1,console.error("Error generando respaldo",n);let e=n.error?.error||n.error?.message||"Error desconocido";we.default.fire({icon:"error",title:"Error Cr\xEDtico",text:e,background:"#fff1f2",customClass:{title:"text-rose-600 font-bold",popup:"rounded-2xl border-2 border-rose-100"}})}})}descargar(n){this.sistemaService.descargarRespaldo(n).subscribe({next:e=>{let r=window.URL.createObjectURL(e),a=document.createElement("a");a.href=r,a.download=n,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(r)},error:e=>{console.error("Error al descargar respaldo",e),we.default.fire("Error","No se pudo descargar el archivo.","error")}})}eliminar(n){we.default.fire({title:"\xBFEst\xE1s seguro?",text:`Vas a eliminar permanentemente el respaldo: ${n}`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#4f46e5",cancelButtonColor:"#f43f5e",confirmButtonText:"S\xED, eliminar",cancelButtonText:"Cancelar",reverseButtons:!0,background:"#f8fafc",customClass:{popup:"rounded-2xl border-2 border-gray-100"}}).then(e=>{e.isConfirmed&&this.sistemaService.eliminarRespaldo(n).subscribe({next:()=>{this.loadData(),we.default.fire({title:"Eliminado",text:"El archivo ha sido borrado.",icon:"success",timer:1500,showConfirmButton:!1})},error:r=>{we.default.fire("Error","No se pudo eliminar el archivo.","error"),console.error(r)}})})}static \u0275fac=function(e){return new(e||s)(E(xe))};static \u0275cmp=I({type:s,selectors:[["app-respaldo"]],decls:39,vars:9,consts:[[1,"p-6","lg:p-8"],[1,"mb-6","flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","gap-4"],[1,"text-2xl","font-bold","text-gray-800","dark:text-gray-100","italic"],[1,"text-sm","text-gray-500"],[1,"inline-flex","items-center","gap-2","px-6","py-2.5","bg-indigo-600","hover:bg-indigo-700","text-white","rounded-xl","font-bold","text-sm","shadow-lg","shadow-indigo-500/30","transition-all","active:scale-95","disabled:opacity-50",3,"click","disabled"],["class","animate-spin -ml-1 mr-2 h-4 w-4 text-white","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",4,"ngIf"],["class","fas fa-database",4,"ngIf"],[1,"grid","gap-6","sm:grid-cols-2","mb-8"],[1,"bg-white","dark:bg-gray-800","rounded-2xl","border","border-gray-100","dark:border-gray-700","p-6","shadow-sm"],[1,"flex","items-center","gap-4"],[1,"p-3","bg-indigo-100","dark:bg-indigo-900/30","text-indigo-600","dark:text-indigo-400","rounded-xl"],[1,"fas","fa-server","text-xl"],[1,"text-xs","font-bold","text-gray-400","uppercase","tracking-wider"],[1,"text-lg","font-bold","text-gray-800","dark:text-gray-100"],[1,"p-3","bg-emerald-100","dark:bg-emerald-900/30","text-emerald-600","dark:text-emerald-400","rounded-xl"],[1,"fas","fa-folder-open","text-xl"],[1,"overflow-hidden"],[1,"text-sm","font-bold","text-gray-600","dark:text-gray-300","truncate"],[1,"bg-white","dark:bg-gray-800","rounded-2xl","border","border-gray-100","dark:border-gray-700","shadow-xl","overflow-hidden"],[1,"px-6","py-4","border-b","border-gray-100","dark:border-gray-700","bg-gray-50/50","dark:bg-gray-900/50","flex","items-center","justify-between"],[1,"text-lg","font-bold","text-gray-800","dark:text-gray-100","flex","items-center","gap-2"],[1,"fas","fa-history","text-indigo-500"],[1,"px-3","py-1","bg-indigo-100","dark:bg-indigo-900/30","text-indigo-600","dark:text-indigo-400","text-xs","font-bold","rounded-full"],["class","p-12 text-center",4,"ngIf"],["class","overflow-x-auto",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-2","h-4","w-4","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"fas","fa-database"],[1,"p-12","text-center"],[1,"inline-flex","items-center","justify-center","w-20","h-20","bg-gray-100","dark:bg-gray-700","rounded-full","mb-4"],[1,"fas","fa-box-open","text-3xl","text-gray-400"],[1,"text-gray-500","font-medium"],[1,"text-xs","text-gray-400"],[1,"overflow-x-auto"],[1,"w-full","text-left","border-collapse"],[1,"text-xs","font-bold","text-gray-400","uppercase","tracking-wider","bg-gray-50","dark:bg-gray-900/50"],[1,"px-6","py-4"],[1,"px-6","py-4","text-center"],[1,"divide-y","divide-gray-100","dark:divide-gray-700"],["class","hover:bg-gray-50/50 dark:hover:bg-gray-900/30 transition-colors group",4,"ngFor","ngForOf"],[1,"hover:bg-gray-50/50","dark:hover:bg-gray-900/30","transition-colors","group"],[1,"flex","items-center","gap-3"],[1,"w-10","h-10","flex","items-center","justify-center","bg-indigo-50","dark:bg-indigo-900/20","text-indigo-600","dark:text-indigo-400","rounded-lg","group-hover:scale-110","transition-transform"],[1,"fas","fa-file-code"],[1,"font-bold","text-gray-700","dark:text-gray-200"],[1,"text-sm","text-gray-500","dark:text-gray-400"],[1,"px-2.5","py-1","bg-gray-100","dark:bg-gray-700","text-gray-600","dark:text-gray-300","text-xs","font-bold","rounded-lg"],[1,"flex","items-center","justify-center","gap-2"],["title","Descargar",1,"w-9","h-9","flex","items-center","justify-center","bg-emerald-50","dark:bg-emerald-900/20","text-emerald-600","dark:text-emerald-400","rounded-lg","hover:bg-emerald-600","hover:text-white","transition-all","shadow-sm",3,"click"],[1,"fas","fa-download","text-sm"],["title","Eliminar",1,"w-9","h-9","flex","items-center","justify-center","bg-rose-50","dark:bg-rose-900/20","text-rose-600","dark:text-rose-400","rounded-lg","hover:bg-rose-600","hover:text-white","transition-all","shadow-sm",3,"click"],[1,"fas","fa-trash-alt","text-sm"]],template:function(e,r){e&1&&(t(0,"div",0)(1,"div",1)(2,"div")(3,"h2",2),o(4,"Respaldo"),i(),t(5,"p",3),o(6,"Respaldo y restauraci\xF3n de datos"),i()(),t(7,"button",4),f("click",function(){return r.generarRespaldo()}),h(8,Yn,3,0,"svg",5)(9,Xn,1,0,"i",6),o(10),i()(),t(11,"div",7)(12,"div",8)(13,"div",9)(14,"div",10),g(15,"i",11),i(),t(16,"div")(17,"p",12),o(18,"Base de Datos"),i(),t(19,"p",13),o(20),i()()()(),t(21,"div",8)(22,"div",9)(23,"div",14),g(24,"i",15),i(),t(25,"div",16)(26,"p",12),o(27,"Directorio de Almacenamiento"),i(),t(28,"p",17),o(29),i()()()()(),t(30,"div",18)(31,"div",19)(32,"h3",20),g(33,"i",21),o(34," Historial de Respaldos "),i(),t(35,"span",22),o(36),i()(),h(37,Zn,7,0,"div",23)(38,tr,14,1,"div",24),i()()),e&2&&(l(7),m("disabled",r.isGenerating),l(),m("ngIf",r.isGenerating),l(),m("ngIf",!r.isGenerating),l(),b(" ",r.isGenerating?"Generando...":"GENERAR RESPALDO"," "),l(10),x((r.info==null?null:r.info.database)||"Calculando..."),l(9),x((r.info==null?null:r.info.storage_path)||"Buscando..."),l(7),b(" ",r.backups.length," Archivos "),l(),m("ngIf",r.backups.length===0),l(),m("ngIf",r.backups.length>0))},dependencies:[T,V,A,ce],encapsulation:2})};function ir(s,n){if(s&1&&(t(0,"div",13)(1,"span",14),o(2),i(),t(3,"span",3),o(4),i()()),s&2){let e=n.$implicit;l(2),x(e.name),l(2),x(e.guard_name)}}function nr(s,n){s&1&&(t(0,"div",15),o(1,"No hay roles definidos"),i())}function rr(s,n){if(s&1&&(t(0,"div",16)(1,"span",17),o(2),i()()),s&2){let e=n.$implicit;l(2),x(e.name)}}function or(s,n){s&1&&(t(0,"div",15),o(1,"No hay permisos definidos"),i())}var nt=class s{constructor(n){this.sistemaService=n}roles=[];permissions=[];ngOnInit(){this.sistemaService.getSeguridad().subscribe({next:n=>{console.log("Seguridad Data:",n),this.roles=n.roles||[],this.permissions=n.permissions||[]},error:n=>{console.error("Seguridad Error:",n)}})}static \u0275fac=function(e){return new(e||s)(E(xe))};static \u0275cmp=I({type:s,selectors:[["app-seguridad"]],decls:21,vars:4,consts:[[1,"p-6","lg:p-8"],[1,"mb-6"],[1,"text-2xl","font-bold","text-gray-800","dark:text-gray-100"],[1,"text-sm","text-gray-500"],[1,"grid","gap-6","lg:grid-cols-2"],[1,"bg-white","dark:bg-gray-800","rounded-xl","border","border-gray-200","dark:border-gray-700","overflow-hidden"],[1,"px-6","py-4","border-b","border-gray-200","dark:border-gray-700"],[1,"text-lg","font-semibold","text-gray-800","dark:text-gray-100"],[1,"divide-y","divide-gray-100","dark:divide-gray-700"],["class","px-6 py-4 flex justify-between items-center",4,"ngFor","ngForOf"],["class","px-6 py-8 text-center text-gray-500",4,"ngIf"],[1,"divide-y","divide-gray-100","dark:divide-gray-700","max-h-96","overflow-y-auto"],["class","px-6 py-3",4,"ngFor","ngForOf"],[1,"px-6","py-4","flex","justify-between","items-center"],[1,"font-medium","text-gray-900","dark:text-gray-100"],[1,"px-6","py-8","text-center","text-gray-500"],[1,"px-6","py-3"],[1,"text-sm","text-gray-700","dark:text-gray-300"]],template:function(e,r){e&1&&(t(0,"div",0)(1,"div",1)(2,"h2",2),o(3,"Seguridad"),i(),t(4,"p",3),o(5,"Roles y permisos del sistema"),i()(),t(6,"div",4)(7,"div",5)(8,"div",6)(9,"h3",7),o(10,"Roles"),i()(),t(11,"div",8),h(12,ir,5,2,"div",9)(13,nr,2,0,"div",10),i()(),t(14,"div",5)(15,"div",6)(16,"h3",7),o(17,"Permisos"),i()(),t(18,"div",11),h(19,rr,3,1,"div",12)(20,or,2,0,"div",10),i()()()()),e&2&&(l(12),m("ngForOf",r.roles),l(),m("ngIf",r.roles.length===0),l(6),m("ngForOf",r.permissions),l(),m("ngIf",r.permissions.length===0))},dependencies:[T,V,A],encapsulation:2})};function ar(s,n){s&1&&(t(0,"div",32),g(1,"div",33),i())}function lr(s,n){s&1&&(v(),t(0,"svg",40),g(1,"path",41),i())}function sr(s,n){if(s&1){let e=y();t(0,"div",34),f("click",function(){let a=p(e).$implicit,c=d();return u(c.toggleSelection(a))}),t(1,"div",35)(2,"div")(3,"p",36),o(4),i(),t(5,"p",37),o(6),i()(),t(7,"div",38),h(8,lr,2,0,"svg",39),i()()()}if(s&2){let e=n.$implicit,r=d();F("border-blue-500",r.isSelected(e)),l(4),x(e.nombre_activo),l(2),x(e.codigo_inventario),l(),F("bg-blue-500",r.isSelected(e))("border-blue-500",r.isSelected(e))("border-gray-600",!r.isSelected(e)),l(),m("ngIf",r.isSelected(e))}}function cr(s,n){s&1&&(t(0,"div",42)(1,"p",43),o(2,"No se encontraron activos."),i()())}function dr(s,n){s&1&&(t(0,"div",44),v(),t(1,"svg",45),g(2,"path",46),i(),S(),t(3,"p"),o(4,"Selecciona activos de la lista para previsualizar sus etiquetas."),i()())}function mr(s,n){if(s&1&&(t(0,"div",47)(1,"div",48),g(2,"img",49),i(),t(3,"div",50)(4,"p",51),o(5,"Alcald\xEDa de Tipitapa"),i(),t(6,"p",52),o(7),i(),t(8,"p",53),o(9),i(),t(10,"div",54)(11,"p"),o(12,"Propiedad Municipal"),i(),t(13,"p"),o(14,"SGAF - Sistema de Gesti\xF3n"),i()()()()),s&2){let e=n.$implicit,r=d();l(2),m("src",r.getQrUrl(e.id),K),l(5),x(e.nombre_activo),l(2),x(e.codigo_inventario)}}function pr(s,n){if(s&1&&(t(0,"div",55),g(1,"img",56),t(2,"div",57)(3,"p",58),o(4,"Alcald\xEDa de Tipitapa"),i(),t(5,"p",59),o(6),i(),t(7,"p",60),o(8),i(),t(9,"div",61)(10,"p"),o(11,"Propiedad Municipal"),i(),t(12,"p"),o(13),i()()()()),s&2){let e=n.$implicit,r=d();l(),m("src",r.getQrUrl(e.id),K),l(5),x(e.nombre_activo),l(2),x(e.codigo_inventario),l(5),b("SGAF ",(e.area==null?null:e.area.nombre)||"")}}var rt=class s{constructor(n,e){this.assetService=n;this.cdr=e;this.searchUpdate.pipe(ye(400),Se()).subscribe(r=>{r.length>2?this.searchAssets(r):this.assets=[]})}assets=[];selectedAssets=[];loading=!1;searchTerm="";searchUpdate=new he;qrUrls=new Map;ngOnInit(){}searchAssets(n){this.loading=!0,this.assetService.getAssets(1,n).subscribe({next:e=>{this.assets=e.data,this.loading=!1,this.cdr.detectChanges()},error:()=>{this.loading=!1,this.cdr.detectChanges()}})}toggleSelection(n){let e=this.selectedAssets.findIndex(r=>r.id===n.id);e>-1?(this.selectedAssets.splice(e,1),this.qrUrls.has(n.id)&&(URL.revokeObjectURL(this.qrUrls.get(n.id)),this.qrUrls.delete(n.id))):(this.selectedAssets.push(n),this.loadQrCode(n.id))}loadQrCode(n){this.assetService.getQrBlob(n).subscribe({next:e=>{let r=URL.createObjectURL(e);this.qrUrls.set(n,r),this.cdr.detectChanges()},error:e=>console.error("Error loading QR",e)})}isSelected(n){return this.selectedAssets.some(e=>e.id===n.id)}printLabels(){window.print()}clearSelection(){this.selectedAssets.forEach(n=>{this.qrUrls.has(n.id)&&URL.revokeObjectURL(this.qrUrls.get(n.id))}),this.qrUrls.clear(),this.selectedAssets=[]}getQrUrl(n){return this.qrUrls.get(n)||"assets/images/loading-qr.png"}static \u0275fac=function(e){return new(e||s)(E(Te),E(W))};static \u0275cmp=I({type:s,selectors:[["app-etiquetas-qr"]],decls:40,vars:11,consts:[[1,"p-6","lg:p-8","no-print"],[1,"flex","items-center","justify-between","mb-8"],[1,"text-3xl","font-black","text-primary","tracking-tight"],[1,"text-secondary","mt-1"],[1,"flex","gap-3"],[1,"btn-secondary",3,"click","disabled"],[1,"btn-primary","flex","items-center","gap-2",3,"click","disabled"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-8"],[1,"lg:col-span-1"],[1,"card","p-6","sticky","top-24"],[1,"text-xl","font-bold","text-primary","mb-4"],[1,"relative","mb-6"],["type","text","placeholder","Buscar por c\xF3digo o nombre...",1,"input-field","w-full","!bg-white","dark:!bg-white/5","!border-gray-300","dark:!border-white/10","pl-10","!text-gray-900","dark:!text-white",3,"ngModelChange","input","ngModel"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","absolute","left-3","top-3","text-blue-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],[1,"space-y-3","max-h-[500px]","overflow-y-auto","pr-2","custom-scrollbar"],["class","text-center py-4",4,"ngIf"],["class","card p-4 cursor-pointer hover:bg-white/5 border border-transparent transition-all group",3,"border-blue-500","click",4,"ngFor","ngForOf"],["class","text-center py-8",4,"ngIf"],[1,"lg:col-span-2"],[1,"card","p-6","min-h-[600px]"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-xl","font-bold","text-primary"],[1,"text-sm","text-secondary"],["class","flex flex-col items-center justify-center h-[500px] text-gray-500",4,"ngIf"],[1,"grid","grid-cols-2","gap-4"],["class","bg-white p-4 rounded-lg flex gap-4 items-center",4,"ngFor","ngForOf"],[1,"hidden","print-only","bg-white","text-black","p-0"],[1,"qr-grid"],["class","qr-card flex gap-3 items-center border border-black p-2",4,"ngFor","ngForOf"],[1,"text-center","py-4"],[1,"animate-spin","rounded-full","h-8","w-8","border-b-2","border-blue-500","mx-auto"],[1,"card","p-4","cursor-pointer","hover:bg-white/5","border","border-transparent","transition-all","group",3,"click"],[1,"flex","items-center","justify-between"],[1,"text-primary","font-medium","group-hover:text-blue-400","transition-colors"],[1,"text-xs","text-secondary","mt-1"],[1,"w-6","h-6","rounded-full","border-2","flex","items-center","justify-center","transition-all"],["xmlns","http://www.w3.org/2000/svg","class","h-4 w-4 text-white","viewBox","0 0 20 20","fill","currentColor",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-4","w-4","text-white"],["fill-rule","evenodd","d","M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule","evenodd"],[1,"text-center","py-8"],[1,"text-gray-500"],[1,"flex","flex-col","items-center","justify-center","h-[500px]","text-gray-500"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-16","w-16","mb-4","opacity-20"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"],[1,"bg-white","p-4","rounded-lg","flex","gap-4","items-center"],[1,"bg-white","p-1","border","border-gray-200","rounded","shrink-0"],["alt","QR",1,"w-20","h-20",3,"src"],[1,"overflow-hidden"],[1,"text-xs","font-bold","text-black","uppercase","truncate"],[1,"text-[10px]","text-gray-600","mt-0.5","truncate"],[1,"text-sm","font-black","text-black","mt-1"],[1,"mt-2","text-[9px]","text-gray-500","leading-tight"],[1,"qr-card","flex","gap-3","items-center","border","border-black","p-2"],["alt","QR",1,"w-24","h-24",3,"src"],[1,"flex-1"],[1,"text-[10px]","font-bold","uppercase","border-b","border-black","pb-1","mb-1"],[1,"text-[9px]","leading-tight","mb-1"],[1,"text-sm","font-black"],[1,"mt-2","text-[8px]","italic","leading-tight"]],template:function(e,r){e&1&&(t(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),o(4,"Etiquetas QR"),i(),t(5,"p",3),o(6,"Generaci\xF3n y exportaci\xF3n de etiquetas para inventario f\xEDsico."),i()(),t(7,"div",4)(8,"button",5),f("click",function(){return r.clearSelection()}),o(9," Limpiar selecci\xF3n "),i(),t(10,"button",6),f("click",function(){return r.printLabels()}),v(),t(11,"svg",7),g(12,"path",8),i(),o(13),i()()(),S(),t(14,"div",9)(15,"div",10)(16,"div",11)(17,"h2",12),o(18,"Buscar Activos"),i(),t(19,"div",13)(20,"input",14),C("ngModelChange",function(c){return w(r.searchTerm,c)||(r.searchTerm=c),c}),f("input",function(){return r.searchUpdate.next(r.searchTerm)}),i(),v(),t(21,"svg",15),g(22,"path",16),i()(),S(),t(23,"div",17),h(24,ar,2,0,"div",18)(25,sr,9,11,"div",19)(26,cr,3,0,"div",20),i()()(),t(27,"div",21)(28,"div",22)(29,"div",23)(30,"h2",24),o(31,"Vista Previa"),i(),t(32,"span",25),o(33),i()(),h(34,dr,5,0,"div",26),t(35,"div",27),h(36,mr,15,3,"div",28),i()()()()(),t(37,"div",29)(38,"div",30),h(39,pr,14,4,"div",31),i()()),e&2&&(l(8),m("disabled",r.selectedAssets.length===0),l(2),m("disabled",r.selectedAssets.length===0),l(3),b(" Imprimir (",r.selectedAssets.length,") "),l(7),_("ngModel",r.searchTerm),l(4),m("ngIf",r.loading),l(),m("ngForOf",r.assets),l(),m("ngIf",r.assets.length===0&&!r.loading&&r.searchTerm.length>2),l(7),b("",r.selectedAssets.length," etiquetas seleccionadas"),l(),m("ngIf",r.selectedAssets.length===0),l(2),m("ngForOf",r.selectedAssets),l(3),m("ngForOf",r.selectedAssets))},dependencies:[T,V,A,L,N,D,R],styles:["@media print{.no-print[_ngcontent-%COMP%]{display:none!important}.print-only[_ngcontent-%COMP%]{display:block!important}.qr-grid[_ngcontent-%COMP%]{display:grid!important;grid-template-columns:repeat(3,1fr)!important;gap:10px!important}.qr-card[_ngcontent-%COMP%]{border:1px solid #000!important;padding:10px!important;page-break-inside:avoid}}"]})};var k=de(me());var ot=class s{constructor(n){this.http=n}apiUrl=U.apiUrl;getProveedores(){return this.http.get(`${this.apiUrl}/proveedores`)}createProveedor(n){return this.http.post(`${this.apiUrl}/proveedores`,n)}updateProveedor(n,e){return this.http.put(`${this.apiUrl}/proveedores/${n}`,e)}deleteProveedor(n){return this.http.delete(`${this.apiUrl}/proveedores/${n}`)}getClasificaciones(){return this.http.get(`${this.apiUrl}/clasificaciones`)}createClasificacion(n){return this.http.post(`${this.apiUrl}/clasificaciones`,n)}updateClasificacion(n,e){return this.http.put(`${this.apiUrl}/clasificaciones/${n}`,e)}deleteClasificacion(n){return this.http.delete(`${this.apiUrl}/clasificaciones/${n}`)}bulkDeleteClasificaciones(n){return this.http.post(`${this.apiUrl}/clasificaciones/bulk-delete`,{ids:n})}getFuentes(){return this.http.get(`${this.apiUrl}/fuentes`)}createFuente(n){return this.http.post(`${this.apiUrl}/fuentes`,n)}updateFuente(n,e){return this.http.put(`${this.apiUrl}/fuentes/${n}`,e)}deleteFuente(n){return this.http.delete(`${this.apiUrl}/fuentes/${n}`)}getTipos(){return this.http.get(`${this.apiUrl}/tipos`)}createTipo(n){return this.http.post(`${this.apiUrl}/tipos`,n)}updateTipo(n,e){return this.http.put(`${this.apiUrl}/tipos/${n}`,e)}deleteTipo(n){return this.http.delete(`${this.apiUrl}/tipos/${n}`)}getCheques(){return this.http.get(`${this.apiUrl}/cheques`)}createCheque(n){return this.http.post(`${this.apiUrl}/cheques`,n)}updateCheque(n,e){return this.http.put(`${this.apiUrl}/cheques/${n}`,e)}deleteCheque(n){return this.http.delete(`${this.apiUrl}/cheques/${n}`)}static \u0275fac=function(e){return new(e||s)($(q))};static \u0275prov=H({token:s,factory:s.\u0275fac,providedIn:"root"})};function gr(s,n){if(s&1){let e=y();t(0,"div",15)(1,"button",16),f("click",function(){p(e);let a=d();return u(a.searchText="")}),v(),t(2,"svg",17),g(3,"path",18),i()()()}}function fr(s,n){if(s&1){let e=y();t(0,"form",28),f("ngSubmit",function(){p(e);let a=d(2);return u(a.saveProveedor())}),t(1,"div",29)(2,"div",30)(3,"label",31),o(4,"Nombre "),t(5,"span",32),o(6,"*"),i()(),t(7,"input",33),C("ngModelChange",function(a){p(e);let c=d(2);return w(c.proveedorForm.nombre,a)||(c.proveedorForm.nombre=a),u(a)}),i()(),t(8,"div",30)(9,"label",31),o(10,"RUC"),i(),t(11,"input",34),C("ngModelChange",function(a){p(e);let c=d(2);return w(c.proveedorForm.ruc,a)||(c.proveedorForm.ruc=a),u(a)}),i()()(),t(12,"div",29)(13,"div",30)(14,"label",31),o(15,"Tel\uFFFDfono"),i(),t(16,"input",35),C("ngModelChange",function(a){p(e);let c=d(2);return w(c.proveedorForm.telefono,a)||(c.proveedorForm.telefono=a),u(a)}),i()(),t(17,"div",30)(18,"label",31),o(19,"Email"),i(),t(20,"input",36),C("ngModelChange",function(a){p(e);let c=d(2);return w(c.proveedorForm.email,a)||(c.proveedorForm.email=a),u(a)}),i()()(),t(21,"div",30)(22,"label",31),o(23,"Direcci\uFFFDn"),i(),t(24,"input",37),C("ngModelChange",function(a){p(e);let c=d(2);return w(c.proveedorForm.direccion,a)||(c.proveedorForm.direccion=a),u(a)}),i()(),t(25,"div",38)(26,"button",39),o(27),i()()()}if(s&2){let e=d(2);l(7),_("ngModel",e.proveedorForm.nombre),l(4),_("ngModel",e.proveedorForm.ruc),l(5),_("ngModel",e.proveedorForm.telefono),l(4),_("ngModel",e.proveedorForm.email),l(4),_("ngModel",e.proveedorForm.direccion),l(3),b(" ",e.editingProveedorId?"Actualizar":"Guardar"," Proveedor ")}}function xr(s,n){if(s&1){let e=y();t(0,"form",28),f("ngSubmit",function(){p(e);let a=d(2);return u(a.saveClasificacion())}),t(1,"div",29)(2,"div",30)(3,"label",31),o(4,"Prefijo (2 d\uFFFDgitos - ej: 01) "),t(5,"span",32),o(6,"*"),i()(),t(7,"input",40),C("ngModelChange",function(a){p(e);let c=d(2);return w(c.clasificacionForm.prefijo,a)||(c.clasificacionForm.prefijo=a),u(a)}),i()(),t(8,"div",30)(9,"label",31),o(10,"Nombre de Clasificaci\uFFFDn "),t(11,"span",32),o(12,"*"),i()(),t(13,"input",41),C("ngModelChange",function(a){p(e);let c=d(2);return w(c.clasificacionForm.nombre,a)||(c.clasificacionForm.nombre=a),u(a)}),i()()(),t(14,"div",30)(15,"label",31),o(16,"C\uFFFDdigo Contable (Original)"),i(),t(17,"input",42),C("ngModelChange",function(a){p(e);let c=d(2);return w(c.clasificacionForm.codigo,a)||(c.clasificacionForm.codigo=a),u(a)}),i()(),t(18,"div",30)(19,"label",31),o(20,"Descripci\uFFFDn"),i(),t(21,"textarea",43),C("ngModelChange",function(a){p(e);let c=d(2);return w(c.clasificacionForm.descripcion,a)||(c.clasificacionForm.descripcion=a),u(a)}),i()(),t(22,"div",38)(23,"button",39),o(24),i()()()}if(s&2){let e=d(2);l(7),_("ngModel",e.clasificacionForm.prefijo),l(6),_("ngModel",e.clasificacionForm.nombre),l(4),_("ngModel",e.clasificacionForm.codigo),l(4),_("ngModel",e.clasificacionForm.descripcion),l(3),b(" ",e.editingClasificacionId?"Actualizar":"Guardar"," Clasificaci\uFFFDn ")}}function hr(s,n){if(s&1){let e=y();t(0,"form",28),f("ngSubmit",function(){p(e);let a=d(2);return u(a.saveFuente())}),t(1,"div",29)(2,"div",30)(3,"label",31),o(4,"Nombre de Fuente "),t(5,"span",32),o(6,"*"),i()(),t(7,"input",44),C("ngModelChange",function(a){p(e);let c=d(2);return w(c.fuenteForm.nombre,a)||(c.fuenteForm.nombre=a),u(a)}),i()(),t(8,"div",30)(9,"label",31),o(10,"Estado"),i(),t(11,"select",45),C("ngModelChange",function(a){p(e);let c=d(2);return w(c.fuenteForm.estado,a)||(c.fuenteForm.estado=a),u(a)}),t(12,"option",46),o(13,"Activo"),i(),t(14,"option",47),o(15,"Inactivo"),i()()()(),t(16,"div",38)(17,"button",39),o(18),i()()()}if(s&2){let e=d(2);l(7),_("ngModel",e.fuenteForm.nombre),l(4),_("ngModel",e.fuenteForm.estado),l(7),b(" ",e.editingFuenteId?"Actualizar":"Guardar"," Fuente ")}}function br(s,n){if(s&1&&(t(0,"option",50),o(1),i()),s&2){let e=n.$implicit;m("ngValue",e.id),l(),M(" ",e.prefijo," ",e.nombre," ")}}function vr(s,n){if(s&1){let e=y();t(0,"form",28),f("ngSubmit",function(){p(e);let a=d(2);return u(a.saveTipo())}),t(1,"div",29)(2,"div",30)(3,"label",31),o(4,"Nombre de Tipo "),t(5,"span",32),o(6,"*"),i()(),t(7,"input",48),C("ngModelChange",function(a){p(e);let c=d(2);return w(c.tipoForm.nombre,a)||(c.tipoForm.nombre=a),u(a)}),i()(),t(8,"div",30)(9,"label",31),o(10,"Clasificaci\uFFFDn "),t(11,"span",32),o(12,"*"),i()(),t(13,"select",49),C("ngModelChange",function(a){p(e);let c=d(2);return w(c.tipoForm.clasificacion_id,a)||(c.tipoForm.clasificacion_id=a),u(a)}),t(14,"option",50),o(15,"Seleccione una clasificaci\uFFFDn"),i(),h(16,br,2,3,"option",51),i()()(),t(17,"div",30)(18,"label",31),o(19,"Descripci\uFFFDn"),i(),t(20,"textarea",52),C("ngModelChange",function(a){p(e);let c=d(2);return w(c.tipoForm.descripcion,a)||(c.tipoForm.descripcion=a),u(a)}),i()(),t(21,"div",38)(22,"button",39),o(23),i()()()}if(s&2){let e=d(2);l(7),_("ngModel",e.tipoForm.nombre),l(6),_("ngModel",e.tipoForm.clasificacion_id),l(),m("ngValue",null),l(2),m("ngForOf",e.clasificaciones),l(4),_("ngModel",e.tipoForm.descripcion),l(3),b(" ",e.editingTipoId?"Actualizar":"Guardar"," Tipo ")}}function _r(s,n){if(s&1){let e=y();t(0,"form",28),f("ngSubmit",function(){p(e);let a=d(2);return u(a.saveCheque())}),t(1,"div",53)(2,"div",30)(3,"label",31),o(4,"N\uFFFDmero de Cheque "),t(5,"span",32),o(6,"*"),i()(),t(7,"input",54),C("ngModelChange",function(a){p(e);let c=d(2);return w(c.chequeForm.numero_cheque,a)||(c.chequeForm.numero_cheque=a),u(a)}),i()(),t(8,"div",30)(9,"label",31),o(10,"Banco "),t(11,"span",32),o(12,"*"),i()(),t(13,"input",55),C("ngModelChange",function(a){p(e);let c=d(2);return w(c.chequeForm.banco,a)||(c.chequeForm.banco=a),u(a)}),i()(),t(14,"div",30)(15,"label",31),o(16,"Cuenta Bancaria"),i(),t(17,"input",56),C("ngModelChange",function(a){p(e);let c=d(2);return w(c.chequeForm.cuenta_bancaria,a)||(c.chequeForm.cuenta_bancaria=a),u(a)}),i()()(),t(18,"div",53)(19,"div",30)(20,"label",31),o(21,"Monto Total"),i(),t(22,"input",57),C("ngModelChange",function(a){p(e);let c=d(2);return w(c.chequeForm.monto_total,a)||(c.chequeForm.monto_total=a),u(a)}),i()(),t(23,"div",30)(24,"label",31),o(25,"Fecha Emisi\uFFFDn"),i(),t(26,"input",58),C("ngModelChange",function(a){p(e);let c=d(2);return w(c.chequeForm.fecha_emision,a)||(c.chequeForm.fecha_emision=a),u(a)}),i()(),t(27,"div",30)(28,"label",31),o(29,"Fecha Vencimiento"),i(),t(30,"input",59),C("ngModelChange",function(a){p(e);let c=d(2);return w(c.chequeForm.fecha_vencimiento,a)||(c.chequeForm.fecha_vencimiento=a),u(a)}),i()()(),t(31,"div",29)(32,"div",30)(33,"label",31),o(34,"Beneficiario "),t(35,"span",32),o(36,"*"),i()(),t(37,"input",60),C("ngModelChange",function(a){p(e);let c=d(2);return w(c.chequeForm.beneficiario,a)||(c.chequeForm.beneficiario=a),u(a)}),i()(),t(38,"div",30)(39,"label",31),o(40,"RUC Beneficiario"),i(),t(41,"input",61),C("ngModelChange",function(a){p(e);let c=d(2);return w(c.chequeForm.beneficiario_ruc,a)||(c.chequeForm.beneficiario_ruc=a),u(a)}),i()()(),t(42,"div",30)(43,"label",31),o(44,"Descripci\uFFFDn"),i(),t(45,"textarea",62),C("ngModelChange",function(a){p(e);let c=d(2);return w(c.chequeForm.descripcion,a)||(c.chequeForm.descripcion=a),u(a)}),i()(),t(46,"div",29)(47,"div",30)(48,"label",31),o(49,"Estado"),i(),t(50,"select",45),C("ngModelChange",function(a){p(e);let c=d(2);return w(c.chequeForm.estado,a)||(c.chequeForm.estado=a),u(a)}),t(51,"option",63),o(52,"Emitido"),i(),t(53,"option",64),o(54,"Cobrado"),i(),t(55,"option",65),o(56,"Anulado"),i()()()(),t(57,"div",38)(58,"button",39),o(59),i()()()}if(s&2){let e=d(2);l(7),_("ngModel",e.chequeForm.numero_cheque),l(6),_("ngModel",e.chequeForm.banco),l(4),_("ngModel",e.chequeForm.cuenta_bancaria),l(5),_("ngModel",e.chequeForm.monto_total),l(4),_("ngModel",e.chequeForm.fecha_emision),l(4),_("ngModel",e.chequeForm.fecha_vencimiento),l(7),_("ngModel",e.chequeForm.beneficiario),l(4),_("ngModel",e.chequeForm.beneficiario_ruc),l(4),_("ngModel",e.chequeForm.descripcion),l(5),_("ngModel",e.chequeForm.estado),l(9),b(" ",e.editingChequeId?"Actualizar":"Guardar"," Cheque ")}}function wr(s,n){if(s&1){let e=y();t(0,"div",19)(1,"div",20)(2,"div",21)(3,"h3",22),o(4),i(),t(5,"button",23),f("click",function(){p(e);let a=d();return u(a.closeForm())}),v(),t(6,"svg",24),g(7,"path",25),i()()(),S(),t(8,"div",26),h(9,fr,28,6,"form",27)(10,xr,25,5,"form",27)(11,hr,19,3,"form",27)(12,vr,24,6,"form",27)(13,_r,60,11,"form",27),i()()()}if(s&2){let e=d();l(4),b(" ",e.editingProveedorId||e.editingClasificacionId||e.editingFuenteId||e.editingTipoId?"Editar":"Nuevo"," Registro "),l(5),m("ngIf",e.activeFormTab==="proveedor"),l(),m("ngIf",e.activeFormTab==="clasificacion"),l(),m("ngIf",e.activeFormTab==="fuente"),l(),m("ngIf",e.activeFormTab==="tipo"),l(),m("ngIf",e.activeFormTab==="cheque")}}function Cr(s,n){if(s&1){let e=y();t(0,"tr",78)(1,"td",79),o(2),i(),t(3,"td",80),o(4),i(),t(5,"td",81),o(6),i(),t(7,"td",81),o(8),i(),t(9,"td",81),o(10),i(),t(11,"td",75)(12,"div",82)(13,"button",83),f("click",function(){let a=p(e).$implicit,c=d(2);return u(c.startEditProveedor(a))}),v(),t(14,"svg",84),g(15,"path",85),i()(),S(),t(16,"button",86),f("click",function(){let a=p(e).$implicit,c=d(2);return u(c.deleteProveedor(a.id))}),v(),t(17,"svg",84),g(18,"path",87),i()()()()()}if(s&2){let e=n.$implicit,r=n.index;l(2),x(r+1),l(2),x(e.nombre),l(2),x(e.ruc||"N/A"),l(2),x(e.telefono||"N/A"),l(2),x(e.email||"N/A")}}function yr(s,n){if(s&1){let e=y();t(0,"div")(1,"div",66)(2,"h3",67),o(3,"Proveedores Registrados"),i(),t(4,"button",68),f("click",function(){p(e);let a=d();return u(a.openForm("proveedor"))}),o(5,"Nuevo Proveedor"),i()(),t(6,"div",69)(7,"div",70)(8,"table",71)(9,"thead")(10,"tr",72)(11,"th",73),o(12,"#"),i(),t(13,"th",74),o(14,"Nombre"),i(),t(15,"th",74),o(16,"RUC"),i(),t(17,"th",74),o(18,"Tel\uFFFDfono"),i(),t(19,"th",74),o(20,"Email"),i(),t(21,"th",75),o(22,"Acciones"),i()()(),t(23,"tbody",76),h(24,Cr,19,5,"tr",77),i()()()()()}if(s&2){let e=d();l(24),m("ngForOf",e.filteredProveedores)}}function Sr(s,n){if(s&1){let e=y();t(0,"button",94),f("click",function(){p(e);let a=d(2);return u(a.bulkDeleteClasificaciones())}),v(),t(1,"svg",95),g(2,"path",87),i(),o(3),i()}if(s&2){let e=d(2);l(3),b(" Eliminar (",e.selectedClasificacionIds.length,") ")}}function Er(s,n){if(s&1){let e=y();t(0,"tr",78)(1,"td",96)(2,"input",91),f("change",function(){let a=p(e).$implicit,c=d(2);return u(c.toggleClasificacionSelection(a.id))}),i()(),t(3,"td",97),o(4),i(),t(5,"td",98),o(6),i(),t(7,"td",80),o(8),i(),t(9,"td",99),o(10),i(),t(11,"td",75)(12,"div",82)(13,"button",83),f("click",function(){let a=p(e).$implicit,c=d(2);return u(c.startEditClasificacion(a))}),v(),t(14,"svg",84),g(15,"path",85),i()(),S(),t(16,"button",86),f("click",function(){let a=p(e).$implicit,c=d(2);return u(c.deleteClasificacion(a.id))}),v(),t(17,"svg",84),g(18,"path",87),i()()()()()}if(s&2){let e=n.$implicit,r=n.index,a=d(2);F("bg-blue-500/10",a.isClasificacionSelected(e.id)),l(2),m("checked",a.isClasificacionSelected(e.id)),l(2),x(r+1),l(2),b(" ",e.prefijo||"---"," "),l(2),b(" ",e.nombre," "),l(2),b(" ",e.codigo||"---"," ")}}function kr(s,n){if(s&1){let e=y();t(0,"div")(1,"div",66)(2,"div",88)(3,"h3",67),o(4,"Clasificaciones Registradas "),i(),h(5,Sr,4,1,"button",89),i(),t(6,"button",68),f("click",function(){p(e);let a=d();return u(a.openForm("clasificacion"))}),o(7,"Nueva Clasificaci\uFFFDn"),i()(),t(8,"div",69)(9,"div",70)(10,"table",71)(11,"thead")(12,"tr",72)(13,"th",90)(14,"input",91),f("change",function(a){p(e);let c=d();return u(c.toggleAllClasificaciones(a))}),i()(),t(15,"th",92),o(16,"#"),i(),t(17,"th",74),o(18,"Prefijo"),i(),t(19,"th",74),o(20,"Nombre"),i(),t(21,"th",74),o(22,"C\uFFFDdigo Contable"),i(),t(23,"th",75),o(24,"Acciones"),i()()(),t(25,"tbody",76),h(26,Er,19,7,"tr",93),i()()()()()}if(s&2){let e=d();l(5),m("ngIf",e.selectedClasificacionIds.length>0),l(9),m("checked",e.selectedClasificacionIds.length===e.clasificaciones.length&&e.clasificaciones.length>0),l(12),m("ngForOf",e.filteredClasificaciones)}}function Ir(s,n){if(s&1){let e=y();t(0,"tr",78)(1,"td",79),o(2),i(),t(3,"td",80),o(4),i(),t(5,"td",74)(6,"span"),o(7),i()(),t(8,"td",75)(9,"div",82)(10,"button",83),f("click",function(){let a=p(e).$implicit,c=d(2);return u(c.startEditFuente(a))}),v(),t(11,"svg",84),g(12,"path",85),i()(),S(),t(13,"button",86),f("click",function(){let a=p(e).$implicit,c=d(2);return u(c.deleteFuente(a.id))}),v(),t(14,"svg",84),g(15,"path",87),i()()()()()}if(s&2){let e=n.$implicit,r=n.index;l(2),x(r+1),l(2),x(e.nombre),l(2),B(e.estado==="ACTIVO"?"badge-emerald":"badge-red"),l(),x(e.estado)}}function Mr(s,n){if(s&1){let e=y();t(0,"div")(1,"div",66)(2,"h3",67),o(3,"Fuentes de Financiamiento"),i(),t(4,"button",68),f("click",function(){p(e);let a=d();return u(a.openForm("fuente"))}),o(5,"Nueva Fuente"),i()(),t(6,"div",69)(7,"div",70)(8,"table",71)(9,"thead")(10,"tr",72)(11,"th",73),o(12,"#"),i(),t(13,"th",74),o(14,"Nombre"),i(),t(15,"th",74),o(16,"Estado"),i(),t(17,"th",75),o(18,"Acciones"),i()()(),t(19,"tbody",76),h(20,Ir,16,5,"tr",77),i()()()()()}if(s&2){let e=d();l(20),m("ngForOf",e.filteredFuentes)}}function Tr(s,n){if(s&1){let e=y();t(0,"tr",78)(1,"td",79),o(2),i(),t(3,"td",80)(4,"span",100),o(5),i(),o(6),i(),t(7,"td",81),o(8),i(),t(9,"td",75)(10,"div",82)(11,"button",83),f("click",function(){let a=p(e).$implicit,c=d(2);return u(c.startEditTipo(a))}),v(),t(12,"svg",84),g(13,"path",85),i()(),S(),t(14,"button",86),f("click",function(){let a=p(e).$implicit,c=d(2);return u(c.deleteTipo(a.id))}),v(),t(15,"svg",84),g(16,"path",87),i()()()()()}if(s&2){let e=n.$implicit,r=n.index,a=d(2);l(2),x(r+1),l(3),b(" ",r+1<10?"0"+(r+1):r+1," "),l(),b(" ",e.nombre," "),l(2),x(e.clasificacion_nombre||a.getClasificacionNombre(e.clasificacion_id))}}function Fr(s,n){if(s&1){let e=y();t(0,"div")(1,"div",66)(2,"h3",67),o(3,"Tipos de Activos"),i(),t(4,"button",68),f("click",function(){p(e);let a=d();return u(a.openForm("tipo"))}),o(5,"Nuevo Tipo"),i()(),t(6,"div",69)(7,"div",70)(8,"table",71)(9,"thead")(10,"tr",72)(11,"th",73),o(12,"#"),i(),t(13,"th",74),o(14,"Nombre"),i(),t(15,"th",74),o(16,"Clasificaci\uFFFDn"),i(),t(17,"th",75),o(18,"Acciones"),i()()(),t(19,"tbody",76),h(20,Tr,17,4,"tr",77),i()()()()()}if(s&2){let e=d();l(20),m("ngForOf",e.filteredTipos)}}function Ar(s,n){if(s&1){let e=y();t(0,"tr",78)(1,"td",79),o(2),i(),t(3,"td",80),o(4),i(),t(5,"td",81),o(6),i(),t(7,"td",81),o(8),i(),t(9,"td",101),o(10),P(11,"number"),i(),t(12,"td",81),o(13),i(),t(14,"td",74)(15,"span"),o(16),i()(),t(17,"td",75)(18,"div",82)(19,"button",83),f("click",function(){let a=p(e).$implicit,c=d(2);return u(c.startEditCheque(a))}),v(),t(20,"svg",84),g(21,"path",85),i()(),S(),t(22,"button",86),f("click",function(){let a=p(e).$implicit,c=d(2);return u(c.deleteCheque(a.id))}),v(),t(23,"svg",84),g(24,"path",87),i()()()()()}if(s&2){let e=n.$implicit,r=n.index;l(2),x(r+1),l(2),x(e.numero_cheque),l(2),x(e.banco),l(2),x(e.beneficiario),l(2),b("$",O(11,9,e.monto_total,"1.2-2")),l(3),x(e.fecha_emision),l(2),B(e.estado==="EMITIDO"?"badge-blue":e.estado==="COBRADO"?"badge-emerald":"badge-red"),l(),x(e.estado)}}function Vr(s,n){if(s&1){let e=y();t(0,"div")(1,"div",66)(2,"h3",67),o(3,"Cheques Registrados"),i(),t(4,"button",68),f("click",function(){p(e);let a=d();return u(a.openForm("cheque"))}),o(5,"Nuevo Cheque"),i()(),t(6,"div",69)(7,"div",70)(8,"table",71)(9,"thead")(10,"tr",72)(11,"th",73),o(12,"#"),i(),t(13,"th",74),o(14,"N\uFFFDmero"),i(),t(15,"th",74),o(16,"Banco"),i(),t(17,"th",74),o(18,"Beneficiario"),i(),t(19,"th",74),o(20,"Monto"),i(),t(21,"th",74),o(22,"Fecha"),i(),t(23,"th",74),o(24,"Estado"),i(),t(25,"th",75),o(26,"Acciones"),i()()(),t(27,"tbody",76),h(28,Ar,25,12,"tr",77),i()()()()()}if(s&2){let e=d();l(28),m("ngForOf",e.filteredCheques)}}var at=class s{constructor(n,e){this.service=n;this.cdr=e}activeTab="clasificaciones";showForm=!1;activeFormTab="clasificacion";loading=!0;searchText="";proveedores=[];clasificaciones=[];fuentes=[];tipos=[];cheques=[];areas=[];usuarios=[];proveedorForm={nombre:"",ruc:"",direccion:"",telefono:"",email:""};editingProveedorId=null;clasificacionForm={nombre:"",codigo:"",prefijo:"",descripcion:""};editingClasificacionId=null;selectedClasificacionIds=[];fuenteForm={nombre:"",estado:"ACTIVO"};editingFuenteId=null;tipoForm={nombre:"",clasificacion_id:null,descripcion:""};editingTipoId=null;chequeForm={numero_cheque:"",banco:"",cuenta_bancaria:"",monto_total:0,fecha_emision:"",fecha_vencimiento:"",beneficiario:"",beneficiario_ruc:"",descripcion:"",estado:"EMITIDO",area_solicitante_id:null,usuario_emisor_id:null};editingChequeId=null;ngOnInit(){this.loadData()}loadData(){this.loading=!0,this.service.getProveedores().subscribe({next:n=>{this.proveedores=n,this.checkLoading()},error:()=>this.checkLoading()}),this.service.getClasificaciones().subscribe({next:n=>{this.clasificaciones=n,this.checkLoading()},error:()=>this.checkLoading()}),this.service.getFuentes().subscribe({next:n=>{this.fuentes=n,this.checkLoading()},error:()=>this.checkLoading()}),this.service.getTipos().subscribe({next:n=>{this.tipos=n,this.checkLoading()},error:()=>this.checkLoading()}),this.service.getCheques().subscribe({next:n=>{this.cheques=n,this.checkLoading()},error:()=>this.checkLoading()})}checkLoading(){this.loading=!1,this.cdr.detectChanges()}get filteredClasificaciones(){if(!this.searchText)return this.clasificaciones;let n=this.searchText.toLowerCase();return this.clasificaciones.filter(e=>e.nombre.toLowerCase().includes(n)||e.prefijo?.toLowerCase().includes(n)||e.codigo?.toLowerCase().includes(n)||e.descripcion?.toLowerCase().includes(n))}get filteredTipos(){if(!this.searchText)return this.tipos;let n=this.searchText.toLowerCase();return this.tipos.filter(e=>e.nombre.toLowerCase().includes(n)||e.clasificacion_nombre?.toLowerCase().includes(n)||e.descripcion?.toLowerCase().includes(n))}get filteredFuentes(){if(!this.searchText)return this.fuentes;let n=this.searchText.toLowerCase();return this.fuentes.filter(e=>e.nombre.toLowerCase().includes(n)||e.estado.toLowerCase().includes(n))}get filteredCheques(){if(!this.searchText)return this.cheques;let n=this.searchText.toLowerCase();return this.cheques.filter(e=>e.numero_cheque.toLowerCase().includes(n)||e.banco.toLowerCase().includes(n)||e.beneficiario.toLowerCase().includes(n)||e.descripcion?.toLowerCase().includes(n)||!1)}get filteredProveedores(){if(!this.searchText)return this.proveedores;let n=this.searchText.toLowerCase();return this.proveedores.filter(e=>e.nombre.toLowerCase().includes(n)||e.ruc?.toLowerCase().includes(n)||e.email?.toLowerCase().includes(n))}openForm(n){this.activeFormTab=n,this.showForm=!0,this.resetForms()}closeForm(){this.showForm=!1,this.resetEditingIds(),this.resetForms()}resetEditingIds(){this.editingProveedorId=null,this.editingClasificacionId=null,this.editingFuenteId=null,this.editingTipoId=null,this.editingChequeId=null}resetForms(){this.editingProveedorId||(this.proveedorForm={nombre:"",ruc:"",direccion:"",telefono:"",email:""}),this.editingClasificacionId||(this.clasificacionForm={nombre:"",codigo:"",prefijo:"",descripcion:""}),this.editingFuenteId||(this.fuenteForm={nombre:"",estado:"ACTIVO"}),this.editingTipoId||(this.tipoForm={nombre:"",clasificacion_id:null,descripcion:""}),this.editingChequeId||(this.chequeForm={numero_cheque:"",banco:"",cuenta_bancaria:"",monto_total:0,fecha_emision:"",fecha_vencimiento:"",beneficiario:"",beneficiario_ruc:"",descripcion:"",estado:"EMITIDO",area_solicitante_id:null,usuario_emisor_id:null})}saveProveedor(){if(!this.proveedorForm.nombre){k.default.fire("Atenci\xF3n","El nombre del proveedor es obligatorio","warning");return}(this.editingProveedorId?this.service.updateProveedor(this.editingProveedorId,this.proveedorForm):this.service.createProveedor(this.proveedorForm)).subscribe({next:()=>{k.default.fire({icon:"success",title:this.editingProveedorId?"Actualizado":"Creado",text:`El proveedor se ha ${this.editingProveedorId?"actualizado":"creado"} correctamente.`,timer:2e3,showConfirmButton:!1}),this.closeForm(),this.loadData()},error:e=>{let r=e.error?.message||e.message||"Error desconocido";k.default.fire("Error",`No se pudo procesar el proveedor: ${r}`,"error")}})}startEditProveedor(n){this.editingProveedorId=n.id,this.proveedorForm={nombre:n.nombre,ruc:n.ruc||"",direccion:n.direccion||"",telefono:n.telefono||"",email:n.email||""},this.openForm("proveedor")}deleteProveedor(n){k.default.fire({title:"\xBFEst\xE1s seguro?",text:"Esta acci\xF3n no se puede revertir",icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",cancelButtonColor:"#64748b",confirmButtonText:"S\xED, eliminar",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&this.service.deleteProveedor(n).subscribe({next:()=>{k.default.fire("Eliminado","El proveedor ha sido eliminado","success"),this.loadData()},error:()=>k.default.fire("Error","No se pudo eliminar el proveedor","error")})})}saveClasificacion(){if(!this.clasificacionForm.nombre){k.default.fire("Atenci\xF3n","El nombre es obligatorio","warning");return}(this.editingClasificacionId?this.service.updateClasificacion(this.editingClasificacionId,this.clasificacionForm):this.service.createClasificacion(this.clasificacionForm)).subscribe({next:()=>{k.default.fire({icon:"success",title:this.editingClasificacionId?"Actualizado":"Creado",text:`La clasificaci\xF3n se ha ${this.editingClasificacionId?"actualizado":"creado"} correctamente.`,timer:2e3,showConfirmButton:!1}),this.closeForm(),this.loadData()},error:e=>{let r=e.error?.message||e.message||"Error desconocido";k.default.fire("Error",`No se pudo procesar la clasificaci\xF3n: ${r}`,"error")}})}startEditClasificacion(n){this.editingClasificacionId=n.id,this.clasificacionForm={nombre:n.nombre,codigo:n.codigo||"",prefijo:n.prefijo||"",descripcion:n.descripcion||""},this.openForm("clasificacion")}deleteClasificacion(n){k.default.fire({title:"\xBFEst\xE1s seguro?",text:"Esta acci\xF3n no se puede revertir",icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",cancelButtonColor:"#64748b",confirmButtonText:"S\xED, eliminar",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&this.service.deleteClasificacion(n).subscribe({next:()=>{k.default.fire("Eliminado","La clasificaci\xF3n ha sido eliminada","success"),this.loadData()},error:()=>k.default.fire("Error","No se pudo eliminar la clasificaci\xF3n","error")})})}toggleClasificacionSelection(n){let e=this.selectedClasificacionIds.indexOf(n);e>-1?this.selectedClasificacionIds.splice(e,1):this.selectedClasificacionIds.push(n)}toggleAllClasificaciones(n){n.target.checked?this.selectedClasificacionIds=this.clasificaciones.map(r=>r.id):this.selectedClasificacionIds=[]}isClasificacionSelected(n){return this.selectedClasificacionIds.includes(n)}bulkDeleteClasificaciones(){if(this.selectedClasificacionIds.length===0){k.default.fire("Atenci\xF3n","Selecciona al menos una clasificaci\xF3n para eliminar","warning");return}k.default.fire({title:"\xBFEliminar seleccionados?",text:`Se eliminar\xE1n ${this.selectedClasificacionIds.length} clasificaciones. Esta acci\xF3n no se puede revertir.`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",cancelButtonColor:"#64748b",confirmButtonText:"S\xED, eliminar",cancelButtonText:"Cancelar"}).then(n=>{n.isConfirmed&&this.service.bulkDeleteClasificaciones(this.selectedClasificacionIds).subscribe({next:()=>{k.default.fire("Eliminados",`${this.selectedClasificacionIds.length} clasificaciones eliminadas`,"success"),this.selectedClasificacionIds=[],this.loadData()},error:e=>{let r=e.error?.message||"No se pudieron eliminar las clasificaciones";k.default.fire("Error",r,"error")}})})}saveFuente(){if(!this.fuenteForm.nombre){k.default.fire("Atenci\xF3n","El nombre es obligatorio","warning");return}(this.editingFuenteId?this.service.updateFuente(this.editingFuenteId,this.fuenteForm):this.service.createFuente(this.fuenteForm)).subscribe({next:()=>{k.default.fire({icon:"success",title:this.editingFuenteId?"Actualizado":"Creado",text:`La fuente se ha ${this.editingFuenteId?"actualizado":"creado"} correctamente.`,timer:2e3,showConfirmButton:!1}),this.closeForm(),this.loadData()},error:e=>{let r=e.error?.message||e.message||"Error desconocido";k.default.fire("Error",`No se pudo procesar la fuente: ${r}`,"error")}})}startEditFuente(n){this.editingFuenteId=n.id,this.fuenteForm={nombre:n.nombre,estado:n.estado},this.openForm("fuente")}deleteFuente(n){k.default.fire({title:"\xBFEst\xE1s seguro?",text:"Esta acci\xF3n no se puede revertir",icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",cancelButtonColor:"#64748b",confirmButtonText:"S\xED, eliminar",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&this.service.deleteFuente(n).subscribe({next:()=>{k.default.fire("Eliminado","La fuente ha sido eliminada","success"),this.loadData()},error:()=>k.default.fire("Error","No se pudo eliminar la fuente","error")})})}saveTipo(){if(!this.tipoForm.nombre||!this.tipoForm.clasificacion_id){k.default.fire("Atenci\xF3n","El nombre y la clasificaci\xF3n son obligatorios","warning");return}(this.editingTipoId?this.service.updateTipo(this.editingTipoId,this.tipoForm):this.service.createTipo(this.tipoForm)).subscribe({next:()=>{k.default.fire({icon:"success",title:this.editingTipoId?"Actualizado":"Creado",text:`El tipo se ha ${this.editingTipoId?"actualizado":"creado"} correctamente.`,timer:2e3,showConfirmButton:!1}),this.closeForm(),this.loadData()},error:e=>{let r=e.error?.message||e.message||"Error desconocido";k.default.fire("Error",`No se pudo procesar el tipo: ${r}`,"error")}})}startEditTipo(n){this.editingTipoId=n.id,this.tipoForm={nombre:n.nombre,clasificacion_id:n.clasificacion_id,descripcion:n.descripcion||""},this.openForm("tipo")}deleteTipo(n){k.default.fire({title:"\xBFEst\xE1s seguro?",text:"Esta acci\xF3n no se puede revertir",icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",cancelButtonColor:"#64748b",confirmButtonText:"S\xED, eliminar",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&this.service.deleteTipo(n).subscribe({next:()=>{k.default.fire("Eliminado","El tipo ha sido eliminado","success"),this.loadData()},error:()=>k.default.fire("Error","No se pudo eliminar el tipo","error")})})}getClasificacionNombre(n){return n?this.clasificaciones.find(r=>r.id===n)?.nombre||"Desconocido":"N/A"}saveCheque(){if(!this.chequeForm.numero_cheque||!this.chequeForm.banco||!this.chequeForm.beneficiario){k.default.fire("Atenci\xF3n","N\xFAmero de cheque, banco y beneficiario son obligatorios","warning");return}(this.editingChequeId?this.service.updateCheque(this.editingChequeId,this.chequeForm):this.service.createCheque(this.chequeForm)).subscribe({next:()=>{k.default.fire({icon:"success",title:this.editingChequeId?"Actualizado":"Creado",text:`El cheque se ha ${this.editingChequeId?"actualizado":"creado"} correctamente.`,timer:2e3,showConfirmButton:!1}),this.closeForm(),this.loadData()},error:e=>{let r=e.error?.message||e.message||"Error desconocido";k.default.fire("Error",`No se pudo procesar el cheque: ${r}`,"error")}})}startEditCheque(n){this.editingChequeId=n.id,this.chequeForm={numero_cheque:n.numero_cheque,banco:n.banco,cuenta_bancaria:n.cuenta_bancaria,monto_total:n.monto_total,fecha_emision:n.fecha_emision,fecha_vencimiento:n.fecha_vencimiento||"",beneficiario:n.beneficiario,beneficiario_ruc:n.beneficiario_ruc||"",descripcion:n.descripcion||"",estado:n.estado,area_solicitante_id:n.area_solicitante_id,usuario_emisor_id:n.usuario_emisor_id},this.openForm("cheque")}deleteCheque(n){k.default.fire({title:"\xBFEst\xE1s seguro?",text:"Esta acci\xF3n no se puede revertir",icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",cancelButtonColor:"#64748b",confirmButtonText:"S\xED, eliminar",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&this.service.deleteCheque(n).subscribe({next:()=>{k.default.fire("Eliminado","El cheque ha sido eliminado","success"),this.loadData()},error:()=>k.default.fire("Error","No se pudo eliminar el cheque","error")})})}handleKeyboardEvent(n){if(n.ctrlKey&&n.altKey&&n.key==="n"){n.preventDefault();let r={proveedores:"proveedor",clasificaciones:"clasificacion",fuentes:"fuente",tipos:"tipo",cheques:"cheque"}[this.activeTab];r&&this.openForm(r)}}static \u0275fac=function(e){return new(e||s)(E(ot),E(W))};static \u0275cmp=I({type:s,selectors:[["app-catalogos-activos"]],hostBindings:function(e,r){e&1&&f("keydown",function(c){return r.handleKeyboardEvent(c)},Re)},decls:31,vars:45,consts:[[1,"p-6","lg:p-8"],[1,"flex","flex-col","md:flex-row","md:items-center","justify-between","gap-4","mb-8"],[1,"text-3xl","font-black","text-primary","tracking-tight"],[1,"text-secondary","mt-1","tracking-tight"],[1,"mb-6"],[1,"relative","group"],["type","text",1,"input-field","w-full","!bg-white","dark:!bg-white/5","!border-gray-300","dark:!border-white/10","rounded-2xl","py-4","pl-14","pr-6","!text-gray-900","dark:!text-white","placeholder-gray-400","focus:outline-none","focus:ring-2","focus:ring-blue-500/50","transition-all","text-lg","shadow-xl","text-center",3,"ngModelChange","ngModel","placeholder"],[1,"absolute","inset-y-0","left-0","pl-6","flex","items-center","pointer-events-none"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-blue-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],["class","absolute inset-y-0 right-0 pr-6 flex items-center",4,"ngIf"],[1,"flex","gap-2","mb-6","overflow-x-auto"],[1,"px-6","py-3","rounded-xl","font-bold","text-sm","transition-all","hover:bg-blue-500","hover:text-white",3,"click"],["class","mb-10 animate-fade-in",4,"ngIf"],[4,"ngIf"],[1,"absolute","inset-y-0","right-0","pr-6","flex","items-center"],[1,"text-gray-400","hover:text-gray-900","dark:hover:text-white","transition-colors",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"mb-10","animate-fade-in"],[1,"card","p-0","overflow-hidden","border-t-4","border-blue-500","shadow-2xl"],[1,"flex","border-b","border-white/5","bg-gray-500/5","justify-between","items-center"],[1,"px-8","py-4","text-sm","font-black","uppercase","tracking-widest","text-blue-500"],[1,"p-2","mr-4","text-muted","hover:text-white","bg-white/5","hover:bg-white/10","rounded-full","transition-all",3,"click"],["fill","none","viewBox","0 0 24 24","stroke-width","2.5","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","d","M6 18L18 6M6 6l12 12"],[1,"px-8","py-8"],["class","space-y-6",3,"ngSubmit",4,"ngIf"],[1,"space-y-6",3,"ngSubmit"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"space-y-2"],[1,"text-xs","font-bold","text-muted"],[1,"text-red-500"],["type","text","name","nombre","placeholder","Ej. Proveedor XYZ",1,"input-field","h-11","text-sm","bg-gray-50/5",3,"ngModelChange","ngModel"],["type","text","name","ruc","placeholder","Ej. 1234567890001",1,"input-field","h-11","text-sm","bg-gray-50/5",3,"ngModelChange","ngModel"],["type","text","name","telefono","placeholder","Ej. 2222-3333",1,"input-field","h-11","text-sm","bg-gray-50/5",3,"ngModelChange","ngModel"],["type","email","name","email","placeholder","Ej. contacto@proveedor.com",1,"input-field","h-11","text-sm","bg-gray-50/5",3,"ngModelChange","ngModel"],["type","text","name","direccion","placeholder","Ej. Calle Principal #123",1,"input-field","h-11","text-sm","bg-gray-50/5",3,"ngModelChange","ngModel"],[1,"flex","justify-end"],["type","submit",1,"btn-primary","px-8","h-11","shadow-xl","shadow-blue-500/20","hover:scale-[1.02]","active:scale-95","transition-all","font-bold","tracking-wide"],["type","text","name","prefijo","placeholder","Ej. 01","maxlength","10",1,"input-field","h-11","text-sm","bg-gray-50/5",3,"ngModelChange","ngModel"],["type","text","name","nombre","placeholder","Ej. Activos Biol\uFFFDgicos",1,"input-field","h-11","text-sm","bg-gray-50/5",3,"ngModelChange","ngModel"],["type","text","name","codigo","placeholder","Ej. 123 005 000 000 000 000",1,"input-field","h-11","text-sm","bg-gray-50/5",3,"ngModelChange","ngModel"],["name","descripcion","rows","2","placeholder","Ej. Hardware principal, perif\uFFFDricos y accesorios inform\uFFFDticos",1,"input-field","text-sm","bg-gray-50/5","resize-none",3,"ngModelChange","ngModel"],["type","text","name","nombre","placeholder","Ej. Fondos Municipales",1,"input-field","h-11","text-sm","bg-gray-50/5",3,"ngModelChange","ngModel"],["name","estado",1,"input-field","h-11","text-sm","bg-gray-50/5",3,"ngModelChange","ngModel"],["value","ACTIVO"],["value","INACTIVO"],["type","text","name","nombre","placeholder","Ej. Computadora",1,"input-field","h-11","text-sm","bg-gray-50/5",3,"ngModelChange","ngModel"],["name","clasificacion_id",1,"input-field","h-11","text-sm","bg-gray-50/5",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["name","descripcion","rows","2","placeholder","Ej. Solo la caja, sin monitor",1,"input-field","text-sm","bg-gray-50/5","resize-none",3,"ngModelChange","ngModel"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],["type","text","name","numero_cheque","placeholder","Ej. 123456",1,"input-field","h-11","text-sm","bg-gray-50/5",3,"ngModelChange","ngModel"],["type","text","name","banco","placeholder","Ej. Banco Nacional",1,"input-field","h-11","text-sm","bg-gray-50/5",3,"ngModelChange","ngModel"],["type","text","name","cuenta_bancaria","placeholder","Ej. 1234567890",1,"input-field","h-11","text-sm","bg-gray-50/5",3,"ngModelChange","ngModel"],["type","number","name","monto_total","placeholder","0.00","step","0.01",1,"input-field","h-11","text-sm","bg-gray-50/5",3,"ngModelChange","ngModel"],["type","date","name","fecha_emision",1,"input-field","h-11","text-sm","bg-gray-50/5",3,"ngModelChange","ngModel"],["type","date","name","fecha_vencimiento",1,"input-field","h-11","text-sm","bg-gray-50/5",3,"ngModelChange","ngModel"],["type","text","name","beneficiario","placeholder","Nombre del beneficiario",1,"input-field","h-11","text-sm","bg-gray-50/5",3,"ngModelChange","ngModel"],["type","text","name","beneficiario_ruc","placeholder","RUC opcional",1,"input-field","h-11","text-sm","bg-gray-50/5",3,"ngModelChange","ngModel"],["name","descripcion","rows","3","placeholder","Descripci\uFFFDn opcional del cheque",1,"input-field","text-sm","bg-gray-50/5",3,"ngModelChange","ngModel"],["value","EMITIDO"],["value","COBRADO"],["value","ANULADO"],[1,"flex","justify-between","items-center","mb-4"],[1,"text-xs","font-black","text-muted","uppercase","tracking-[0.2em]"],[1,"btn-primary","h-10","px-6","shadow-lg",3,"click"],[1,"card","overflow-hidden"],[1,"overflow-x-auto"],[1,"w-full","text-left"],[1,"bg-gray-500/5","text-muted","text-[10px]","font-black","uppercase","tracking-widest","border-b","border-white/5"],[1,"px-6","py-4","w-12"],[1,"px-6","py-4"],[1,"px-6","py-4","text-right"],[1,"divide-y","divide-white/5","font-medium"],["class","hover:bg-gray-500/5 transition-colors",4,"ngFor","ngForOf"],[1,"hover:bg-gray-500/5","transition-colors"],[1,"px-6","py-4","text-xs","font-black","text-muted"],[1,"px-6","py-4","text-sm","font-bold","text-primary"],[1,"px-6","py-4","text-xs","text-muted"],[1,"flex","items-center","justify-end","gap-1"],[1,"p-2","text-muted","hover:text-blue-500","hover:bg-blue-500/10","rounded-lg","transition-all",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"],[1,"p-2","text-muted","hover:text-red-500","hover:bg-red-500/10","rounded-lg","transition-all",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"flex","items-center","gap-4"],["class","btn-secondary h-8 px-4 text-red-400 border-red-500/50 hover:bg-red-500/20 text-xs",3,"click",4,"ngIf"],[1,"px-4","py-4","w-10"],["type","checkbox",1,"w-4","h-4","rounded","border-gray-600","bg-gray-700","text-blue-600","focus:ring-blue-500",3,"change","checked"],[1,"px-4","py-4","w-12"],["class","hover:bg-gray-500/5 transition-colors",3,"bg-blue-500/10",4,"ngFor","ngForOf"],[1,"btn-secondary","h-8","px-4","text-red-400","border-red-500/50","hover:bg-red-500/20","text-xs",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4","mr-1"],[1,"px-4","py-4"],[1,"px-4","py-4","text-xs","font-black","text-muted"],[1,"px-6","py-4","text-sm","font-bold","text-blue-400"],[1,"px-6","py-4","text-xs","font-mono","text-muted"],[1,"text-blue-500","mr-2","font-mono"],[1,"px-6","py-4","text-sm","font-semibold","text-emerald-400"]],template:function(e,r){e&1&&(t(0,"div",0)(1,"div",1)(2,"div")(3,"h2",2),o(4,"Cat\uFFFDlogos de Activos Fijo"),i(),t(5,"p",3),o(6,"Gesti\uFFFDn de proveedores, clasificaciones, fuentes y tipos. "),i()()(),t(7,"div",4)(8,"div",5)(9,"input",6),C("ngModelChange",function(c){return w(r.searchText,c)||(r.searchText=c),c}),i(),t(10,"div",7),v(),t(11,"svg",8),g(12,"path",9),i()(),h(13,gr,4,0,"div",10),i()(),S(),t(14,"div",11)(15,"button",12),f("click",function(){return r.activeTab="clasificaciones"}),o(16),i(),t(17,"button",12),f("click",function(){return r.activeTab="tipos"}),o(18),i(),t(19,"button",12),f("click",function(){return r.activeTab="fuentes"}),o(20),i(),t(21,"button",12),f("click",function(){return r.activeTab="cheques"}),o(22),i(),t(23,"button",12),f("click",function(){return r.activeTab="proveedores"}),o(24),i()(),h(25,wr,14,6,"div",13)(26,yr,25,1,"div",14)(27,kr,27,3,"div",14)(28,Mr,21,1,"div",14)(29,Fr,21,1,"div",14)(30,Vr,29,1,"div",14),i()),e&2&&(l(9),m("placeholder",Ie("Buscar en ",r.activeTab==="tipos"?"Tipos":r.activeTab==="clasificaciones"?"Clasificaciones":r.activeTab==="fuentes"?"Fuentes":r.activeTab==="cheques"?"Cheques":"Proveedores","...")),_("ngModel",r.searchText),l(4),m("ngIf",r.searchText),l(2),F("bg-blue-600",r.activeTab==="clasificaciones")("text-white",r.activeTab==="clasificaciones")("shadow-lg",r.activeTab==="clasificaciones"),l(),b(" Clasificaciones (",r.clasificaciones.length,") "),l(),F("bg-blue-600",r.activeTab==="tipos")("text-white",r.activeTab==="tipos")("shadow-lg",r.activeTab==="tipos"),l(),b(" Tipos (",r.tipos.length,") "),l(),F("bg-blue-600",r.activeTab==="fuentes")("text-white",r.activeTab==="fuentes")("shadow-lg",r.activeTab==="fuentes"),l(),b(" Fuentes (",r.fuentes.length,") "),l(),F("bg-blue-600",r.activeTab==="cheques")("text-white",r.activeTab==="cheques")("shadow-lg",r.activeTab==="cheques"),l(),b(" Cheques (",r.cheques.length,") "),l(),F("bg-blue-600",r.activeTab==="proveedores")("text-white",r.activeTab==="proveedores")("shadow-lg",r.activeTab==="proveedores"),l(),b(" Proveedores (",r.proveedores.length,") "),l(),m("ngIf",r.showForm),l(),m("ngIf",r.activeTab==="proveedores"),l(),m("ngIf",r.activeTab==="clasificaciones"),l(),m("ngIf",r.activeTab==="fuentes"),l(),m("ngIf",r.activeTab==="tipos"),l(),m("ngIf",r.activeTab==="cheques"))},dependencies:[T,V,A,L,ie,re,oe,N,Ue,ne,D,ee,qt,R,te,ce],encapsulation:2})};function Pr(s,n){if(s&1&&(t(0,"p",17),g(1,"i",18),o(2),i()),s&2){let e=d(2);l(2),b(" ",e.error," ")}}function Dr(s,n){if(s&1){let e=y();t(0,"div",10)(1,"label",11),o(2," Ingrese el C\xF3digo de Inventario "),i(),t(3,"div",12)(4,"input",13),C("ngModelChange",function(a){p(e);let c=d();return w(c.codigoInput,a)||(c.codigoInput=a),u(a)}),f("keyup.enter",function(){p(e);let a=d();return u(a.buscarActivo())}),i(),t(5,"button",14),f("click",function(){p(e);let a=d();return u(a.buscarActivo())}),g(6,"i",15),i()(),h(7,Pr,3,1,"p",16),i()}if(s&2){let e=d();l(4),_("ngModel",e.codigoInput),l(),m("disabled",e.loading),l(),F("fa-search",!e.loading)("fa-spinner",e.loading)("fa-spin",e.loading),l(),m("ngIf",e.error)}}function Rr(s,n){if(s&1){let e=y();t(0,"div",19)(1,"div",20)(2,"div",21)(3,"div")(4,"p",22),o(5,"Activo Verificado"),i(),t(6,"h2",23),o(7),i()(),t(8,"div",24),g(9,"i",25),i()()(),t(10,"div",26)(11,"div",27)(12,"span",28),o(13),i(),t(14,"div"),o(15),i()(),t(16,"div",29)(17,"div",30)(18,"h3",31),g(19,"i",32),o(20," Informaci\xF3n T\xE9cnica "),i(),t(21,"div",33)(22,"div")(23,"p",34),o(24,"Marca / Modelo"),i(),t(25,"p",35),o(26),i()(),t(27,"div")(28,"p",34),o(29,"N\xFAmero de Serie"),i(),t(30,"p",35),o(31),i()(),t(32,"div")(33,"p",34),o(34,"Clasificaci\xF3n"),i(),t(35,"p",35),o(36),i()()()(),t(37,"div",30)(38,"h3",31),g(39,"i",36),o(40," Asignaci\xF3n Actual "),i(),t(41,"div",33)(42,"div")(43,"p",34),o(44,"\xC1rea"),i(),t(45,"p",35),o(46),i()(),t(47,"div")(48,"p",34),o(49,"Responsable"),i(),t(50,"p",35),o(51),i()(),t(52,"div")(53,"p",34),o(54,"Ubicaci\xF3n"),i(),t(55,"p",35),o(56),i()()()()(),t(57,"div",37)(58,"h3",31),g(59,"i",38),o(60," Datos Financieros "),i(),t(61,"div",39)(62,"div")(63,"p",34),o(64,"Valor Contable"),i(),t(65,"p",40),o(66),P(67,"number"),i()(),t(68,"div")(69,"p",34),o(70,"Fecha Adquisici\xF3n"),i(),t(71,"p",35),o(72),P(73,"date"),i()(),t(74,"div")(75,"p",34),o(76,"Fuente Fondos"),i(),t(77,"p",35),o(78),i()()()()(),t(79,"div",41)(80,"p",42),o(81,"SGAF V2 \u2022 Verificaci\xF3n de Activo"),i(),t(82,"button",43),f("click",function(){p(e);let a=d();return u(a.nuevaBusqueda())}),g(83,"i",44),o(84," Nueva B\xFAsqueda "),i()()()}if(s&2){let e=d();l(7),x(e.asset.nombre_activo),l(6),b(" ",e.asset.codigo_inventario," "),l(),B("text-xs font-black uppercase px-3 py-1.5 rounded-lg ring-1 "+(e.asset.estado==="BUENO"?"bg-emerald-500/10 text-emerald-600 ring-emerald-500/30":e.asset.estado==="REGULAR"?"bg-orange-500/10 text-orange-600 ring-orange-500/30":"bg-red-500/10 text-red-600 ring-red-500/30")),l(),b(" ",e.asset.estado," "),l(11),M("",e.asset.marca||"N/A"," \u2022 ",e.asset.modelo||"N/A"),l(5),x(e.asset.serie||"SIN SERIE"),l(5),x((e.asset.clasificacion==null?null:e.asset.clasificacion.nombre)||"N/A"),l(10),x((e.asset.area==null?null:e.asset.area.nombre)||"NO ASIGNADO"),l(5),b(" ",e.asset.personal?e.asset.personal.nombre+" "+(e.asset.personal.apellido||""):"SIN ASIGNAR"," "),l(5),x((e.asset.ubicacion==null?null:e.asset.ubicacion.nombre)||"N/A"),l(10),b("C$ ",O(67,15,e.asset.precio_adquisicion,"1.2-2")),l(6),x(O(73,18,e.asset.fecha_adquisicion,"dd/MM/yyyy")),l(6),x((e.asset.fuente_financiamiento==null?null:e.asset.fuente_financiamiento.nombre)||"N/A")}}var Pe=class s{constructor(n,e){this.route=n;this.http=e}codigoInput="";asset=null;loading=!1;error="";ngOnInit(){this.route.params.subscribe(n=>{n.codigo&&(this.codigoInput=n.codigo,this.buscarActivo())}),this.route.queryParams.subscribe(n=>{n.codigo&&(this.codigoInput=n.codigo,this.buscarActivo())})}buscarActivo(){if(!this.codigoInput.trim()){this.error="Ingrese un c\xF3digo de inventario";return}this.loading=!0,this.error="",this.asset=null,this.http.get(`${U.apiUrl}/assets/verify/${encodeURIComponent(this.codigoInput.trim())}`).subscribe({next:n=>{this.loading=!1,n?this.asset=n:this.error="Activo no encontrado"},error:n=>{this.loading=!1,n.status===404?this.error="Activo no encontrado con ese c\xF3digo":this.error="Error al buscar el activo",console.error(n)}})}nuevaBusqueda(){this.asset=null,this.codigoInput="",this.error=""}static \u0275fac=function(e){return new(e||s)(E(Lt),E(q))};static \u0275cmp=I({type:s,selectors:[["app-verificar-activo"]],decls:13,vars:2,consts:[[1,"min-h-screen","bg-gradient-to-br","from-slate-900","via-blue-900","to-slate-900","flex","items-center","justify-center","p-4"],[1,"w-full","max-w-2xl"],[1,"text-center","mb-8"],[1,"inline-flex","items-center","justify-center","w-20","h-20","bg-blue-500/20","rounded-2xl","mb-4"],[1,"fas","fa-qrcode","text-4xl","text-blue-400"],[1,"text-3xl","font-black","text-white","uppercase","tracking-tight"],[1,"text-blue-300/70","text-sm","mt-2"],["class","bg-white/10 backdrop-blur-xl rounded-2xl p-6 border border-white/20 mb-6",4,"ngIf"],["class","bg-white dark:bg-[#111827] rounded-2xl shadow-2xl overflow-hidden border dark:border-white/10 animate-fade-in",4,"ngIf"],[1,"text-center","text-white/40","text-xs","mt-8"],[1,"bg-white/10","backdrop-blur-xl","rounded-2xl","p-6","border","border-white/20","mb-6"],[1,"text-xs","font-bold","text-blue-300","uppercase","tracking-widest","mb-2","block"],[1,"flex","gap-3"],["type","text","placeholder","Ej: 123-004-007-000001",1,"flex-1","bg-white/10","border","border-white/20","rounded-xl","px-4","py-3","text-white","placeholder-white/40","focus:outline-none","focus:ring-2","focus:ring-blue-500","font-mono",3,"ngModelChange","keyup.enter","ngModel"],[1,"px-6","py-3","bg-blue-500","hover:bg-blue-600","text-white","font-bold","rounded-xl","transition-all","disabled:opacity-50",3,"click","disabled"],[1,"fas"],["class","text-red-400 text-sm mt-3 flex items-center gap-2",4,"ngIf"],[1,"text-red-400","text-sm","mt-3","flex","items-center","gap-2"],[1,"fas","fa-exclamation-circle"],[1,"bg-white","dark:bg-[#111827]","rounded-2xl","shadow-2xl","overflow-hidden","border","dark:border-white/10","animate-fade-in"],[1,"bg-gradient-to-r","from-blue-600","to-blue-500","px-6","py-5"],[1,"flex","items-center","justify-between"],[1,"text-blue-100","text-xs","font-bold","uppercase","tracking-widest","mb-1"],[1,"text-xl","font-black","text-white","uppercase"],[1,"bg-white/20","rounded-xl","p-3"],[1,"fas","fa-check-circle","text-2xl","text-white"],[1,"p-6","space-y-6"],[1,"flex","flex-wrap","items-center","gap-3"],[1,"text-sm","font-black","text-blue-600","bg-blue-500/10","px-4","py-2","rounded-lg","ring-1","ring-blue-500/30","font-mono"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-6"],[1,"space-y-4"],[1,"text-[10px]","font-black","text-blue-500","uppercase","tracking-widest","flex","items-center","gap-2"],[1,"fas","fa-info-circle"],[1,"space-y-3"],[1,"text-[10px]","text-gray-400","font-bold","uppercase"],[1,"text-sm","font-semibold","text-gray-800","dark:text-gray-200"],[1,"fas","fa-user-check"],[1,"bg-gray-50","dark:bg-white/5","rounded-xl","p-4","space-y-3"],[1,"fas","fa-dollar-sign"],[1,"grid","grid-cols-3","gap-4"],[1,"text-lg","font-black","text-gray-900","dark:text-white"],[1,"px-6","py-4","bg-gray-50","dark:bg-white/5","border-t","dark:border-white/10","flex","justify-between","items-center"],[1,"text-[9px]","text-gray-400","font-bold","uppercase"],[1,"text-blue-500","hover:text-blue-600","text-sm","font-bold","flex","items-center","gap-2",3,"click"],[1,"fas","fa-search"]],template:function(e,r){e&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),g(4,"i",4),i(),t(5,"h1",5),o(6,"Verificar Activo"),i(),t(7,"p",6),o(8,"Sistema de Gesti\xF3n de Activos Fijos"),i()(),h(9,Dr,8,9,"div",7)(10,Rr,85,21,"div",8),t(11,"p",9),o(12," Sistema de Gesti\xF3n de Activos Fijos \u2022 Alcald\xEDa Municipal "),i()()()),e&2&&(l(9),m("ngIf",!r.asset),l(),m("ngIf",r.asset))},dependencies:[T,A,L,N,D,R,ce,X],styles:["@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .4s ease-out}"]})};var Jt=()=>{let s=Ee(Z),n=Ee(ge);return s.isLoggedIn()?!0:(n.navigate(["/login"]),!1)};var Yt=[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"login",component:ze},{path:"verificar-activo",component:Pe},{path:"verificar-activo/:codigo",component:Pe},{path:"",canActivate:[Jt],children:[{path:"dashboard",component:Be},{path:"catalogos/ubicacion",component:We},{path:"catalogos/recursos-humanos",component:qe},{path:"catalogos/activos-fijo",component:at},{path:"activos",loadComponent:()=>import("./chunk-W6UIULPA.js").then(s=>s.AssetsComponent),title:"Inventario de Activos"},{path:"activos/desuso",loadComponent:()=>import("./chunk-XL7GPPGE.js").then(s=>s.ActivosStateComponent),data:{state:"DESUSO",title:"Activos en Desuso"},title:"Activos en Desuso"},{path:"activos/baja",loadComponent:()=>import("./chunk-XL7GPPGE.js").then(s=>s.ActivosStateComponent),data:{state:"BAJA",title:"Activos de Baja"},title:"Activos de Baja"},{path:"activos/reasignaciones",component:$e},{path:"activos/reportes",component:Ke},{path:"activos/depreciacion",component:Je},{path:"activos/trazabilidad",component:Xe},{path:"activos/etiquetas-qr",component:rt},{path:"sistema/usuarios",component:et},{path:"sistema/respaldo",component:it},{path:"sistema/seguridad",component:nt},{path:"sistema/auditoria",component:tt}]},{path:"**",redirectTo:"dashboard"}];At(zt);function Lr(s){return()=>s.checkAuthStatus()}var Xt={providers:[Ct(),Ot(Yt,Bt(),Nt()),Dt(Rt([Gt])),{provide:Ft,useValue:"es-NI"},{provide:St,useFactory:Lr,deps:[Z],multi:!0}]};var lt=class s{darkThemeKey="dark-theme-enabled";isDarkMode=De(this.getInitialTheme());constructor(){this.applyTheme(this.isDarkMode())}toggleTheme(){let n=!this.isDarkMode();this.isDarkMode.set(n),this.applyTheme(n),localStorage.setItem(this.darkThemeKey,JSON.stringify(n))}getInitialTheme(){let n=localStorage.getItem(this.darkThemeKey);return n!==null?JSON.parse(n):!0}applyTheme(n){n?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}static \u0275fac=function(e){return new(e||s)};static \u0275prov=H({token:s,factory:s.\u0275fac,providedIn:"root"})};var Ur=["mainContent"];function Or(s,n){s&1&&(t(0,"div",3),g(1,"router-outlet"),i())}function Nr(s,n){if(s&1){let e=y();t(0,"div",49),f("click",function(){p(e);let a=d(2);return u(a.toggleSidebar())}),i()}}function Br(s,n){if(s&1){let e=y();be(0),t(1,"a",60),f("click",function(){p(e);let a=d(5);return u(a.closeSidebarMobile())}),g(2,"span",61),o(3),i(),ve()}if(s&2){let e=n.$implicit;l(),m("routerLink",e.route),l(2),b(" ",e.label," ")}}function Wr(s,n){if(s&1&&(t(0,"div",59),h(1,Br,4,2,"ng-container",16),i()),s&2){let e=d(2).$implicit;l(),m("ngForOf",e.children)}}function qr(s,n){if(s&1){let e=y();t(0,"div")(1,"button",52),f("click",function(){p(e);let a=d().$implicit;return u(a.expanded=!a.expanded)}),v(),t(2,"svg",53),g(3,"path",54),i(),S(),t(4,"span",55),o(5),i(),v(),t(6,"svg",56),g(7,"path",57),i()(),h(8,Wr,2,1,"div",58),i()}if(s&2){let e=d().$implicit,r=d(2);l(3),pt("d",r.getIcon(e.icon)),l(2),x(e.label),l(),F("rotate-90",e.expanded),l(2),m("ngIf",e.expanded)}}function Hr(s,n){if(s&1){let e=y();t(0,"a",62),f("click",function(){p(e);let a=d(3);return u(a.closeSidebarMobile())}),v(),t(1,"svg",63),g(2,"path",54),i(),S(),t(3,"span",64),o(4),i()()}if(s&2){let e=d().$implicit,r=d(2);m("routerLink",e.route),l(),F("text-white",!1),l(),pt("d",r.getIcon(e.icon)),l(2),x(e.label)}}function zr(s,n){if(s&1&&(be(0),h(1,qr,9,5,"div",50)(2,Hr,5,5,"a",51),ve()),s&2){let e=n.$implicit;l(),m("ngIf",e.children&&e.children.length>0),l(),m("ngIf",!e.children)}}function Gr(s,n){s&1&&(t(0,"div",69),g(1,"div",70),t(2,"p",71),o(3,"Buscando..."),i()())}function $r(s,n){if(s&1&&(t(0,"div",89)(1,"span",81),o(2,"Serie:"),i(),t(3,"span",82),o(4),i()()),s&2){let e=d().$implicit;l(4),x(e.serie)}}function Qr(s,n){if(s&1){let e=y();t(0,"button",74),f("click",function(){let a=p(e).$implicit,c=d(4);return u(c.selectResult(a))}),t(1,"div",75)(2,"span",76),g(3,"i",77),o(4),i(),t(5,"span",78),o(6),i()(),t(7,"div",79)(8,"div",80)(9,"span",81),o(10,"Marca/Mod:"),i(),t(11,"span",82),o(12),i()(),h(13,$r,5,1,"div",83),i(),t(14,"div",84)(15,"div",79)(16,"div",85),g(17,"i",86),t(18,"span",87),o(19),i()(),t(20,"div",85),g(21,"i",88),t(22,"span",87),o(23),i()()(),t(24,"div"),o(25),i()()()}if(s&2){let e=n.$implicit;l(4),b(" ",e.nombre_activo," "),l(2),b(" ",e.codigo_inventario," "),l(6),M("",e.marca||"N/A"," \u2022 ",e.modelo||"N/A"),l(),m("ngIf",e.serie),l(6),x(e.area_nombre||"Sin Area"),l(4),x(e.personal_nombre?e.personal_nombre+" "+(e.personal_apellido||""):"Sin Asignar"),l(),B("text-[9px] font-black uppercase px-2 py-0.5 rounded self-start sm:self-auto "+(e.estado==="Bueno"?"bg-emerald-500/10 text-emerald-500 ring-1 ring-emerald-500/20":e.estado==="Regular"?"bg-orange-500/10 text-orange-500 ring-1 ring-orange-500/20":"bg-red-500/10 text-red-500 ring-1 ring-red-500/20")),l(),b(" ",e.estado," ")}}function Kr(s,n){if(s&1&&(t(0,"div",72),h(1,Qr,26,10,"button",73),i()),s&2){let e=d(3);l(),m("ngForOf",e.searchResults)}}function Jr(s,n){if(s&1&&(t(0,"div",90)(1,"div",91),v(),t(2,"svg",92),g(3,"path",93),i()(),S(),t(4,"p",94),o(5,"No se encontraron activos para"),i(),t(6,"p",95),o(7),i()()),s&2){let e=d(3);l(7),b('"',e.searchTerm,'" ')}}function Yr(s,n){if(s&1&&(t(0,"div",65),h(1,Gr,4,0,"div",66)(2,Kr,2,1,"div",67)(3,Jr,8,1,"div",68),i()),s&2){let e=d(2);l(),m("ngIf",e.isSearching),l(),m("ngIf",!e.isSearching&&e.searchResults.length>0),l(),m("ngIf",!e.isSearching&&e.searchResults.length===0)}}function Xr(s,n){if(s&1){let e=y();t(0,"button",96),f("click",function(){p(e);let a=d(2);return u(a.scrollToTop())}),v(),t(1,"svg",97),g(2,"path",98),i()()}}function Zr(s,n){s&1&&(t(0,"div",118),g(1,"div",119),t(2,"p",120),o(3,"Cargando informaci\xF3n... "),i()())}function eo(s,n){if(s&1&&(t(0,"div",146),g(1,"img",147),i()),s&2){let e=d(4);l(),m("src",e.selectedAssetQrUrl,K)}}function to(s,n){s&1&&(t(0,"div",148),g(1,"i",149),i())}function io(s,n){if(s&1&&(t(0,"div",150)(1,"h5",151),g(2,"i",152),o(3," Observaciones Adicionales "),i(),t(4,"div",153)(5,"p",154),o(6),i()()()),s&2){let e=d(4);l(6),x(e.selectedAsset.observaciones)}}function no(s,n){if(s&1&&(t(0,"div",121)(1,"div",122)(2,"div",123)(3,"div",124)(4,"h4",125),o(5),i(),t(6,"div",126)(7,"span",127),o(8),i(),t(9,"div"),o(10),i()()(),t(11,"div",128),h(12,eo,2,1,"div",129)(13,to,2,0,"div",130),i()()(),t(14,"div",131)(15,"div",132)(16,"h5",133),g(17,"i",134),o(18," Informaci\xF3n T\xE9cnica "),i(),t(19,"div",135)(20,"div",136)(21,"p",137),o(22,"Marca / Modelo"),i(),t(23,"p",138),o(24),i()(),t(25,"div",136)(26,"p",137),o(27," N\xFAmero de Serie"),i(),t(28,"p",138),o(29),i()(),t(30,"div",136)(31,"p",137),o(32," Categor\xEDa/Clasificaci\xF3n"),i(),t(33,"p",138),o(34),i()()()(),t(35,"div",132)(36,"h5",133),g(37,"i",139),o(38," Asignaci\xF3n Actual "),i(),t(39,"div",135)(40,"div",136)(41,"p",137),o(42," Unidad Administrativa / \xC1rea"),i(),t(43,"p",138),o(44),i()(),t(45,"div",136)(46,"p",137),o(47," Responsable del Bien"),i(),t(48,"p",138),o(49),i()()()(),t(50,"div",140)(51,"h5",133),g(52,"i",141),o(53," Datos Financieros y Adquisici\xF3n "),i(),t(54,"div",142)(55,"div")(56,"p",137),o(57,"Valor Contable"),i(),t(58,"p",143),o(59),P(60,"number"),i()(),t(61,"div")(62,"p",137),o(63,"Fecha de Ingreso"),i(),t(64,"p",138),o(65),P(66,"date"),i()(),t(67,"div")(68,"p",137),o(69," Fuente Fondos"),i(),t(70,"p",144),o(71),i()()()(),h(72,io,7,1,"div",145),i()()),s&2){let e=d(3);l(5),b(" ",e.selectedAsset.nombre_activo," "),l(3),b(" ",e.selectedAsset.codigo_inventario," "),l(),B("text-[10px] font-black uppercase px-3 py-1 rounded-lg ring-1 "+(e.selectedAsset.estado==="Bueno"?"bg-emerald-500/10 text-emerald-500 ring-emerald-500/30":e.selectedAsset.estado==="Regular"?"bg-orange-500/10 text-orange-500 ring-orange-500/30":"bg-red-500/10 text-red-500 ring-red-500/30")),l(),b(" ",e.selectedAsset.estado," "),l(2),m("ngIf",e.selectedAssetQrUrl),l(),m("ngIf",!e.selectedAssetQrUrl),l(11),M("",e.selectedAsset.marca||"N/A"," \u2022 ",e.selectedAsset.modelo||"N/A"),l(5),x(e.selectedAsset.serie||"SIN SERIE"),l(5),x(e.selectedAsset.clasificacion_nombre||(e.selectedAsset.clasificacion==null?null:e.selectedAsset.clasificacion.nombre)||"N/A"),l(10),b("",e.selectedAsset.area_nombre||(e.selectedAsset.area==null?null:e.selectedAsset.area.nombre)||"NON ASSIGNED"," "),l(5),b(" ",e.selectedAsset.personal_nombre||e.selectedAsset.personal!=null&&e.selectedAsset.personal.nombre?(e.selectedAsset.personal_nombre||(e.selectedAsset.personal==null?null:e.selectedAsset.personal.nombre))+" "+(e.selectedAsset.personal_apellido||(e.selectedAsset.personal==null?null:e.selectedAsset.personal.apellido)||""):"CARGO PENDIENTE"," "),l(10),b("C$ ",O(60,18,e.selectedAsset.valor_adquisicion||e.selectedAsset.precio_adquisicion||0,"1.2-2")),l(6),x(O(66,21,e.selectedAsset.fecha_adquisicion,"dd/MM/yyyy")),l(5),m("title",e.selectedAsset.fuente_nombre),l(),x(e.selectedAsset.fuente_nombre||"N/A"),l(),m("ngIf",e.selectedAsset.observaciones)}}function ro(s,n){if(s&1){let e=y();t(0,"div",99),f("click",function(a){p(e);let c=d(2);return u(c.closeAssetModal(a))}),t(1,"div",100),f("click",function(a){return p(e),u(a.stopPropagation())}),t(2,"div",101)(3,"div",102)(4,"div",103),g(5,"i",104),i(),t(6,"div")(7,"h3",105),o(8," Vista R\xE1pida de Activo"),i(),t(9,"p",106),o(10,"Detalles y caracter\xEDsticas t\xE9cnicas"),i()()(),t(11,"button",107),f("click",function(a){p(e);let c=d(2);return u(c.closeAssetModal(a))}),g(12,"i",108),i()(),t(13,"div",109),h(14,Zr,4,0,"div",110)(15,no,73,24,"div",111),i(),t(16,"div",112)(17,"p",113),o(18," Sistema de Gesti\xF3n de Activos Fijos \u2022 SGAF V2 "),i(),t(19,"div",114)(20,"button",115),f("click",function(a){p(e);let c=d(2);return u(c.closeAssetModal(a))}),o(21," Cerrar "),i(),t(22,"button",116),f("click",function(a){p(e);let c=d(2);return u(c.goToAssetList(a))}),g(23,"i",117),o(24," Ir al Listado Completo "),i()()()()()}if(s&2){let e=d(2);l(14),m("ngIf",e.isLoadingAsset),l(),m("ngIf",!e.isLoadingAsset&&e.selectedAsset)}}function oo(s,n){if(s&1){let e=y();t(0,"div",4),h(1,Nr,1,0,"div",5),t(2,"aside",6)(3,"div",7),g(4,"img",8),t(5,"div",9)(6,"span",10),o(7,"SGAF"),i(),t(8,"span",11),o(9,"Activos Fijos"),i()(),t(10,"button",12),f("click",function(){p(e);let a=d();return u(a.toggleSidebar())}),v(),t(11,"svg",13),g(12,"path",14),i()()(),S(),t(13,"nav",15),h(14,zr,3,2,"ng-container",16),i()(),t(15,"div",17)(16,"header",18)(17,"div",19)(18,"button",20),f("click",function(){p(e);let a=d();return u(a.toggleSidebar())}),v(),t(19,"svg",13),g(20,"path",21),i()(),S(),t(21,"div",22)(22,"h1",23),o(23,"Alcald\xEDa de Tipitapa"),i(),t(24,"p",24),o(25," Gesti\xF3n de Activos V2.0"),i()()(),t(26,"div",25)(27,"div",26)(28,"div",27)(29,"input",28),C("ngModelChange",function(a){p(e);let c=d();return w(c.searchTerm,a)||(c.searchTerm=a),u(a)}),f("input",function(){p(e);let a=d();return u(a.onSearchInput())})("focus",function(){p(e);let a=d();return u(a.showResults=!0)})("click",function(a){p(e);let c=d();return c.showResults=!0,u(a.stopPropagation())}),i(),v(),t(30,"svg",29),g(31,"path",30),i()(),h(32,Yr,4,3,"div",31),i(),S(),t(33,"div",32)(34,"button",33),f("click",function(){p(e);let a=d();return u(a.toggleTheme())}),v(),t(35,"svg",34),g(36,"path",35),i()(),S(),t(37,"button",36),f("click",function(){p(e);let a=d();return u(a.toggleTheme())}),v(),t(38,"svg",34),g(39,"path",37),i()()(),S(),t(40,"div",38)(41,"div",39)(42,"span",40),o(43),i(),t(44,"span",41),o(45),P(46,"date"),i()(),t(47,"div",42),o(48),i(),t(49,"button",43),f("click",function(){p(e);let a=d();return u(a.logout())}),v(),t(50,"svg",44),g(51,"path",45),i()()()()(),S(),t(52,"main",46,0),f("scroll",function(a){p(e);let c=d();return u(c.onMainScroll(a))}),g(54,"router-outlet"),i(),h(55,Xr,3,0,"button",47)(56,ro,25,2,"div",48),i()()}if(s&2){let e=d();l(),m("ngIf",e.sidebarOpen),l(),F("translate-x-0",e.sidebarOpen)("-translate-x-full",!e.sidebarOpen),l(12),m("ngForOf",e.menuItems),l(15),_("ngModel",e.searchTerm),l(3),m("ngIf",e.showResults&&e.searchTerm.length>=2),l(2),F("bg-blue-600",e.themeService.isDarkMode())("text-white",e.themeService.isDarkMode())("shadow-lg",e.themeService.isDarkMode())("shadow-blue-500/40",e.themeService.isDarkMode())("text-muted",!e.themeService.isDarkMode()),l(3),F("bg-blue-600",!e.themeService.isDarkMode())("text-white",!e.themeService.isDarkMode())("shadow-lg",!e.themeService.isDarkMode())("shadow-blue-500/40",!e.themeService.isDarkMode())("text-muted",e.themeService.isDarkMode()),l(6),M("",e.user==null?null:e.user.nombre," ",e.user==null?null:e.user.apellido),l(2),x(O(46,35,e.today,"dd MMM yyyy")),l(3),M(" ",e.user==null||e.user.nombre==null?null:e.user.nombre.charAt(0),"",e.user==null||e.user.apellido==null?null:e.user.apellido.charAt(0)," "),l(7),m("ngIf",e.showScrollTop),l(),m("ngIf",e.showAssetModal)}}var st=class s{constructor(n,e,r,a){this.authService=n;this.themeService=e;this.assetService=r;this.router=a;this.isLogin=this.router.url.includes("/login")||this.router.url==="/",console.log("MainLayout Constructor - Initial URL:",this.router.url,"isLogin:",this.isLogin),this.router.events.pipe(dt(c=>c instanceof ut)).subscribe(c=>{this.isLogin=c.urlAfterRedirects.includes("/login"),console.log("MainLayout NavigationEnd - URL:",c.urlAfterRedirects,"isLogin:",this.isLogin)}),this.authService.currentUser.subscribe(c=>{this.user=c}),this.searchSubject.pipe(ye(300),Se(),_t(c=>c.length<2?(this.searchResults=[],this.isSearching=!1,ht([])):(this.isSearching=!0,this.assetService.quickSearch(c).pipe(mt(Q=>console.log("QuickSearch API Response:",Q)),mt(()=>this.isSearching=!1))))).subscribe({next:c=>{console.log("Search results success:",c),this.searchResults=c,this.isSearching=!1,this.showResults=!0},error:c=>{console.error("Search observable error:",c),this.isSearching=!1,this.searchResults=[]}}),this.router.events.pipe(dt(c=>c instanceof ut)).subscribe(()=>{this.checkActiveMenu()})}sidebarOpen=!0;user;today=new Date;showScrollTop=!1;isLogin=!0;searchTerm="";searchResults=[];isSearching=!1;showResults=!1;searchSubject=new he;selectedAsset=null;showAssetModal=!1;isLoadingAsset=!1;selectedAssetQrUrl=null;mainContent;menuItems=[{label:"Panel de Control",icon:"dashboard",route:"/dashboard"},{label:"Cat\xE1logos",icon:"folder",expanded:!1,children:[{label:"Ubicaci\xF3n / Areas",icon:"location",route:"/catalogos/ubicacion"},{label:"Recursos Humanos",icon:"users",route:"/catalogos/recursos-humanos"},{label:"Cat\xE1logos de Activos",icon:"box",route:"/catalogos/activos-fijo"}]},{label:"Activos Fijo",icon:"box",expanded:!0,children:[{label:"Activos",icon:"box",route:"/activos"},{label:"En Desuso",icon:"pause",route:"/activos/desuso"},{label:"De Baja",icon:"trash",route:"/activos/baja"},{label:"Reasignaciones",icon:"transfer",route:"/activos/reasignaciones"},{label:"Reportes",icon:"report",route:"/activos/reportes"},{label:"Depreciaci\xF3n",icon:"chart",route:"/activos/depreciacion"},{label:"Trazabilidad",icon:"history",route:"/activos/trazabilidad"},{label:"Etiquetas QR",icon:"qr",route:"/activos/etiquetas-qr"}]},{label:"Sistema",icon:"settings",expanded:!1,children:[{label:"Usuarios",icon:"users",route:"/sistema/usuarios"},{label:"Respaldo",icon:"backup",route:"/sistema/respaldo"},{label:"Seguridad",icon:"shield",route:"/sistema/seguridad"},{label:"Auditor\xEDa",icon:"clipboard",route:"/sistema/auditoria"}]}];ngOnInit(){this.checkActiveMenu()}checkActiveMenu(){let n=this.router.url;this.menuItems.forEach(e=>{e.children&&e.children.some(a=>a.route&&n.startsWith(a.route))&&(e.expanded=!0)})}toggleSidebar(){this.sidebarOpen=!this.sidebarOpen}closeSidebarMobile(){window.innerWidth<1024&&(this.sidebarOpen=!1)}toggleTheme(){this.themeService.toggleTheme()}logout(){this.authService.logout()}isLoginPage(){return this.router.url.includes("/login")}onSearchInput(){this.showResults=!0,console.log("Search input changed:",this.searchTerm),this.searchSubject.next(this.searchTerm)}selectResult(n){this.searchTerm="",this.searchResults=[],this.showResults=!1,this.selectedAsset=Y({},n),this.showAssetModal=!0,this.isLoadingAsset=!1,this.selectedAssetQrUrl=null,this.assetService.getQrBlob(n.id).subscribe({next:e=>{this.selectedAssetQrUrl=URL.createObjectURL(e)},error:e=>console.error("Error loading QR",e)}),this.assetService.getAsset(n.id).subscribe({next:e=>{this.selectedAsset=Y(Y({},this.selectedAsset),e)},error:e=>{console.error("Error in background asset loading:",e)}})}closeAssetModal(n){n&&(n.stopPropagation(),n.preventDefault()),this.showAssetModal=!1,this.selectedAsset=null,this.selectedAssetQrUrl&&(URL.revokeObjectURL(this.selectedAssetQrUrl),this.selectedAssetQrUrl=null)}goToAssetList(n){n&&(n.stopPropagation(),n.preventDefault()),this.selectedAsset&&(this.router.navigate(["/activos"],{queryParams:{search:this.selectedAsset.codigo_inventario}}),this.closeAssetModal())}onClickOutside(n){if(!this.showResults)return;let e=n.target,r=document.querySelector(".search-container");r&&!r.contains(e)&&(this.showResults=!1)}onMainScroll(n){let e=n.target;this.showScrollTop=e.scrollTop>300}scrollToTop(){if(this.mainContent&&this.mainContent.nativeElement){let n=this.mainContent.nativeElement,e=n.scrollTop,r=500,a=performance.now(),c=Q=>{let Zt=Q-a,xt=Math.min(Zt/r,1),ei=1-Math.pow(1-xt,3);n.scrollTop=e*(1-ei),xt<1&&requestAnimationFrame(c)};requestAnimationFrame(c)}}getIcon(n){let e={dashboard:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6",location:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z M15 11a3 3 0 11-6 0 3 3 0 016 0z",users:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z",box:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4",user:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z",transfer:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4",report:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",chart:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6",history:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z",qr:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 17h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z",backup:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12",shield:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z",clipboard:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01",folder:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z",settings:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z M15 12a3 3 0 11-6 0 3 3 0 016 0z",pause:"M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z",trash:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"};return e[n]||e.box}static \u0275fac=function(e){return new(e||s)(E(Z),E(lt),E(Te),E(ge))};static \u0275cmp=I({type:s,selectors:[["app-main-layout"]],viewQuery:function(e,r){if(e&1&&Et(Ur,5),e&2){let a;kt(a=It())&&(r.mainContent=a.first)}},hostBindings:function(e,r){e&1&&f("click",function(c){return r.onClickOutside(c)},yt)},decls:2,vars:2,consts:[["mainContent",""],["class","min-h-screen",4,"ngIf"],["class","flex h-screen overflow-hidden","style","background-color: var(--bg-primary);",4,"ngIf"],[1,"min-h-screen"],[1,"flex","h-screen","overflow-hidden",2,"background-color","var(--bg-primary)"],["class","fixed inset-0 bg-black/60 backdrop-blur-sm z-40 lg:hidden animate-fade-in",3,"click",4,"ngIf"],[1,"fixed","lg:static","inset-y-0","left-0","z-50","w-64","border-r","transition-transform","duration-300","lg:transform-none","lg:w-64","bg-secondary","border-color","flex","flex-col","shadow-2xl","lg:shadow-none",2,"background-color","var(--bg-secondary)","border-color","var(--border-color)"],[1,"flex","items-center","gap-3","px-6","h-20","border-b","shrink-0",2,"border-color","var(--border-color)"],["src","assets/logo-alcaldia.png","alt","Logo",1,"w-10","h-10","object-contain"],[1,"flex","flex-col"],[1,"font-black","text-primary","text-lg","tracking-tighter","leading-none"],[1,"text-[9px]","text-blue-500","font-bold","uppercase","tracking-[0.2em]"],[1,"ml-auto","lg:hidden","text-muted","hover:text-primary",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"flex-1","overflow-y-auto","py-6","px-4","custom-scrollbar","space-y-1"],[4,"ngFor","ngForOf"],[1,"flex-1","flex","flex-col","relative"],[1,"h-16","lg:h-20","border-b","flex","items-center","justify-between","px-4","lg:px-8","sticky","top-0","z-20","transition-all",2,"background-color","var(--bg-header)","border-color","var(--border-color)","backdrop-filter","blur(8px)"],[1,"flex","items-center","gap-4"],[1,"lg:hidden","p-2","-ml-2","text-muted","hover:text-primary","active:scale-95","transition-transform",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h16M4 18h7"],[1,"block"],[1,"text-base","lg:text-lg","font-black","text-primary","tracking-tight","leading-tight"],[1,"text-[9px]","lg:text-[10px]","text-muted","font-bold","uppercase","tracking-widest","hidden","xs:block"],[1,"flex","items-center","gap-6"],[1,"relative","hidden","xl:block","w-80","search-container"],[1,"relative"],["type","text","placeholder","Buscador inteligente...",1,"input-field","w-full","!pl-12","h-11","text-sm","shadow-sm",3,"ngModelChange","input","focus","click","ngModel"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4","absolute","left-4","top-3.5","text-blue-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],["class","absolute top-full left-0 right-0 mt-2 bg-white dark:bg-[#1a1f2e] border dark:border-white/10 rounded-xl shadow-[0_20px_50px_rgba(0,0,0,0.3)] overflow-hidden z-[9999] border-gray-200",4,"ngIf"],[1,"flex","items-center","bg-gray-500/5","rounded-2xl","p-1","border","border-white/5"],["title","Cambiar a Modo Oscuro",1,"p-2.5","rounded-xl","transition-all","duration-300","flex","items-center","justify-center",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"],["title","Cambiar a Modo Claro",1,"p-2.5","rounded-xl","transition-all","duration-300","flex","items-center","justify-center",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 3v1m0 16v1m9-9h-1M4 12H3m15.364-6.364l-.707.707M6.343 17.657l-.707.707M17.657 17.657l-.707-.707M6.343 6.343l-.707-.707M12 8a4 4 0 100 8 4 4 0 000-8z"],[1,"flex","items-center","gap-4","pl-6","border-l",2,"border-color","var(--border-color)"],[1,"flex","flex-col","items-end","hidden","sm:flex"],[1,"text-sm","font-bold","text-primary","leading-none"],[1,"text-[10px]","text-muted","font-bold","tracking-widest","mt-1","uppercase"],[1,"w-11","h-11","rounded-2xl","bg-gradient-to-br","from-blue-500","to-cyan-500","flex","items-center","justify-center","text-white","font-black","text-sm","shadow-xl","shadow-blue-500/30"],["title","Cerrar sesi\xF3n",1,"p-2.5","text-muted","hover:text-red-500","transition-colors","rounded-xl","hover:bg-red-500/5","group",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","group-hover:scale-110","transition-transform"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"],[1,"flex-1","overflow-y-auto","overflow-x-hidden","relative","custom-scrollbar",3,"scroll"],["class","fixed bottom-8 right-8 w-12 h-12 bg-blue-600 hover:bg-blue-700 text-white rounded-full shadow-2xl shadow-blue-500/40 flex items-center justify-center transition-all duration-300 hover:scale-110 active:scale-95 z-50 animate-fade-in","title","Ir al inicio",3,"click",4,"ngIf"],["class","fixed inset-0 z-[10000] flex items-center justify-center p-4 sm:p-6 backdrop-blur-md bg-black/40 animate-fade-in-down",3,"click",4,"ngIf"],[1,"fixed","inset-0","bg-black/60","backdrop-blur-sm","z-40","lg:hidden","animate-fade-in",3,"click"],[4,"ngIf"],["routerLinkActive","bg-blue-500 text-white shadow-lg shadow-blue-500/30","class","flex items-center gap-3 px-3 py-3 text-secondary hover:bg-gray-100 dark:hover:bg-white/5 rounded-xl transition-all group",3,"routerLink","click",4,"ngIf"],[1,"w-full","flex","items-center","gap-3","px-3","py-3","text-primary","hover:bg-gray-100","dark:hover:bg-white/5","rounded-xl","transition-all","group","select-none",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"h-5","w-5","shrink-0","text-muted","group-hover:text-blue-500","transition-colors"],["stroke-linecap","round","stroke-linejoin","round"],[1,"flex-1","text-left","text-sm","font-bold","tracking-tight"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4","text-muted","transition-transform","duration-200"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],["class","mt-1 space-y-1 pl-11 animate-fade-in-down",4,"ngIf"],[1,"mt-1","space-y-1","pl-11","animate-fade-in-down"],["routerLinkActive","text-blue-500 font-bold",1,"block","py-2","text-sm","text-secondary","hover:text-primary","transition-colors","relative","group",3,"click","routerLink"],["routerLinkActive","bg-blue-500 ring-2 ring-blue-500/30",1,"absolute","-left-4","top-1/2","-translate-y-1/2","w-1.5","h-1.5","rounded-full","bg-gray-300","group-hover:bg-blue-500","transition-colors"],["routerLinkActive","bg-blue-500 text-white shadow-lg shadow-blue-500/30",1,"flex","items-center","gap-3","px-3","py-3","text-secondary","hover:bg-gray-100","dark:hover:bg-white/5","rounded-xl","transition-all","group",3,"click","routerLink"],["fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"h-5","w-5","shrink-0","group-hover:scale-110","transition-transform"],[1,"text-sm","font-bold","tracking-tight"],[1,"absolute","top-full","left-0","right-0","mt-2","bg-white","dark:bg-[#1a1f2e]","border","dark:border-white/10","rounded-xl","shadow-[0_20px_50px_rgba(0,0,0,0.3)]","overflow-hidden","z-[9999]","border-gray-200"],["class","p-6 text-center",4,"ngIf"],["class","max-h-80 overflow-y-auto custom-scrollbar",4,"ngIf"],["class","p-8 text-center bg-gray-50/50 dark:bg-white/5",4,"ngIf"],[1,"p-6","text-center"],[1,"animate-spin","rounded-full","h-6","w-6","border-b-2","border-blue-500","mx-auto"],[1,"text-[10px]","text-muted","mt-2","font-bold","uppercase","tracking-widest"],[1,"max-h-80","overflow-y-auto","custom-scrollbar"],["class","w-full text-left px-5 py-4 hover:bg-blue-500/5 dark:hover:bg-blue-500/10 border-b last:border-0 border-gray-100 dark:border-white/5 transition-all group active:scale-[0.99]",3,"click",4,"ngFor","ngForOf"],[1,"w-full","text-left","px-5","py-4","hover:bg-blue-500/5","dark:hover:bg-blue-500/10","border-b","last:border-0","border-gray-100","dark:border-white/5","transition-all","group","active:scale-[0.99]",3,"click"],[1,"flex","items-center","justify-between","mb-1.5"],[1,"text-xs","font-black","text-gray-900","dark:text-white","truncate","pr-4","group-hover:text-blue-500","transition-colors","uppercase","gap-2","flex","items-center"],[1,"fas","fa-box","text-blue-500/50","text-[10px]"],[1,"text-[10px]","font-black","text-blue-500","bg-blue-500/10","px-2","py-1","rounded-md","uppercase","shrink-0","ring-1","ring-blue-500/20"],[1,"flex","flex-wrap","items-center","gap-x-4","gap-y-1"],[1,"text-[10px]","text-gray-500","dark:text-gray-400","truncate","uppercase","font-bold","tracking-tight","flex","items-center","gap-1.5"],[1,"text-muted"],[1,"dark:text-gray-300","font-medium"],["class","text-[10px] text-gray-500 dark:text-gray-400 truncate uppercase font-bold tracking-tight flex items-center gap-1.5 sm:border-l dark:border-white/10 sm:pl-4",4,"ngIf"],[1,"mt-2.5","pt-2.5","border-t","border-gray-100","dark:border-white/5","flex","flex-col","sm:flex-row","sm:items-center","justify-between","gap-2"],[1,"flex","items-center","gap-1.5","text-[9px]","font-bold","text-muted","uppercase"],[1,"fas","fa-map-marker-alt","text-[8px]","text-blue-500/50"],[1,"dark:text-gray-400"],[1,"fas","fa-user-tie","text-[8px]","text-blue-500/50"],[1,"text-[10px]","text-gray-500","dark:text-gray-400","truncate","uppercase","font-bold","tracking-tight","flex","items-center","gap-1.5","sm:border-l","dark:border-white/10","sm:pl-4"],[1,"p-8","text-center","bg-gray-50/50","dark:bg-white/5"],[1,"text-blue-500/20","mb-2","flex","justify-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-8","w-8"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9.172 9.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-xs","text-gray-500","font-medium"],[1,"text-xs","font-bold","text-gray-900","dark:text-white","mt-1","italic"],["title","Ir al inicio",1,"fixed","bottom-8","right-8","w-12","h-12","bg-blue-600","hover:bg-blue-700","text-white","rounded-full","shadow-2xl","shadow-blue-500/40","flex","items-center","justify-center","transition-all","duration-300","hover:scale-110","active:scale-95","z-50","animate-fade-in",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2.5",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","d","M5 15l7-7 7 7"],[1,"fixed","inset-0","z-[10000]","flex","items-center","justify-center","p-4","sm:p-6","backdrop-blur-md","bg-black/40","animate-fade-in-down",3,"click"],[1,"bg-white","dark:bg-[#111827]","w-full","max-w-2xl","rounded-2xl","shadow-[0_30px_100px_rgba(0,0,0,0.5)]","border","dark:border-white/10","overflow-hidden","flex","flex-col","max-h-[90vh]",3,"click"],[1,"px-6","py-5","border-b","dark:border-white/10","flex","items-center","justify-between","bg-gray-50/50","dark:bg-white/5"],[1,"flex","items-center","gap-3"],[1,"h-10","w-10","bg-blue-500/10","rounded-xl","flex","items-center","justify-center","text-blue-500"],[1,"fas","fa-box","text-xl"],[1,"text-base","font-black","text-gray-900","dark:text-white","uppercase","tracking-tight"],[1,"text-[10px]","text-muted","font-bold","uppercase","tracking-widest","mt-0.5"],["type","button",1,"p-2","hover:bg-red-500/10","hover:text-red-500","rounded-lg","transition-colors","text-muted",3,"click"],[1,"fas","fa-times","text-lg"],[1,"flex-1","overflow-y-auto","p-6","custom-scrollbar"],["class","py-12 flex flex-col items-center justify-center",4,"ngIf"],["class","space-y-8 animate-fade-in",4,"ngIf"],[1,"px-6","py-5","border-t","dark:border-white/10","flex","flex-col","sm:flex-row","gap-3","items-center","justify-between","bg-gray-50/50","dark:bg-white/5"],[1,"text-[9px]","text-muted","font-bold","uppercase","tracking-tighter"],[1,"flex","items-center","gap-3","w-full","sm:w-auto"],["type","button",1,"flex-1","sm:flex-none","px-6","py-2.5","text-xs","font-bold","uppercase","tracking-widest","text-secondary","hover:text-primary","transition-colors",3,"click"],["type","button",1,"flex-1","sm:flex-none","btn-primary","px-8","py-2.5","text-xs","font-bold","uppercase","tracking-widest","shadow-blue-500/40",3,"click"],[1,"fas","fa-external-link-alt","mr-2"],[1,"py-12","flex","flex-col","items-center","justify-center"],[1,"animate-spin","rounded-full","h-10","w-10","border-b-2","border-blue-500"],[1,"mt-4","text-xs","text-muted","font-bold","uppercase","tracking-widest"],[1,"space-y-8","animate-fade-in"],[1,"relative","p-5","bg-blue-500/5","dark:bg-blue-500/10","rounded-2xl","border","border-blue-500/20","overflow-hidden"],[1,"flex","flex-col","sm:flex-row","sm:items-center","justify-between","gap-4"],[1,"flex-1"],[1,"text-xl","font-black","text-gray-900","dark:text-white","uppercase","leading-tight","mb-2"],[1,"flex","flex-wrap","items-center","gap-3"],[1,"text-xs","font-black","text-blue-600","dark:text-blue-400","bg-blue-500/10","px-3","py-1","rounded-lg","ring-1","ring-blue-500/30"],[1,"flex-shrink-0"],["class","w-24 h-24 bg-white rounded-xl p-2 shadow-lg border",4,"ngIf"],["class","w-24 h-24 bg-gray-100 dark:bg-gray-800 rounded-xl flex items-center justify-center",4,"ngIf"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-8"],[1,"space-y-6"],[1,"text-[10px]","font-black","text-blue-500","uppercase","tracking-widest","flex","items-center","gap-2"],[1,"fas","fa-info-circle","text-xs"],[1,"space-y-4"],[1,"group"],[1,"text-[10px]","text-muted","font-bold","uppercase","tracking-widest","mb-1"],[1,"text-xs","font-semibold","text-gray-800","dark:text-gray-200","uppercase"],[1,"fas","fa-user-check","text-xs"],[1,"col-span-1","sm:col-span-2","space-y-6","mt-2"],[1,"fas","fa-dollar-sign","text-xs"],[1,"grid","grid-cols-1","sm:grid-cols-3","gap-6","p-4","bg-gray-50/50","dark:bg-white/5","rounded-xl","border","dark:border-white/5"],[1,"text-sm","font-black","text-gray-900","dark:text-white","uppercase"],[1,"text-xs","font-semibold","text-gray-800","dark:text-gray-200","uppercase","truncate",3,"title"],["class","col-span-1 sm:col-span-2 space-y-3",4,"ngIf"],[1,"w-24","h-24","bg-white","rounded-xl","p-2","shadow-lg","border"],["alt","QR Code",1,"w-full","h-full","object-contain",3,"src"],[1,"w-24","h-24","bg-gray-100","dark:bg-gray-800","rounded-xl","flex","items-center","justify-center"],[1,"fas","fa-spinner","fa-spin","text-gray-400"],[1,"col-span-1","sm:col-span-2","space-y-3"],[1,"text-[10px]","font-black","text-muted","uppercase","tracking-widest","flex","items-center","gap-2"],[1,"fas","fa-comment-alt","text-xs"],[1,"p-4","bg-gray-50/30","dark:bg-white/5","border","border-dashed","dark:border-white/10","rounded-xl"],[1,"text-xs","text-secondary","italic","leading-relaxed"]],template:function(e,r){e&1&&h(0,Or,2,0,"div",1)(1,oo,57,38,"div",2),e&2&&(m("ngIf",r.isLogin),l(),m("ngIf",!r.isLogin))},dependencies:[T,V,A,je,jt,Le,Ut,L,N,D,R,ce,X],encapsulation:2})};var ct=class s{title=De("frontend");constructor(){console.log("SGAF2 App Initializing...")}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=I({type:s,selectors:[["app-root"]],decls:1,vars:0,template:function(e,r){e&1&&g(0,"app-main-layout")},dependencies:[st],encapsulation:2})};Vt(ct,Xt).catch(s=>console.error(s));
